(window.webpackJsonp=window.webpackJsonp||[]).push([["reset-password-modal"],{692:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));var o=r(0),n=r(1),s=r.n(n),a=r(5),i=r.n(a),l=r(11),c=r(6),u=r(4),p=r(2),d=r(9),f=r(10);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,o,n,s,a){try{var i=e[s](a),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(o,n)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var s=e.apply(t,r);function a(e){_(s,o,n,a,i,"next",e)}function i(e){_(s,o,n,a,i,"throw",e)}a(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=E(e);if(t){var n=E(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x={password:""},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,r,n,s=h(a);function a(){var e;w(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=s.call.apply(s,[this].concat(r))).onResetComplete=function(t,r){if(r.setSubmitting(!1),r.resetForm({password:""}),t)return console.error(t),void r.setStatus({error_msg:t});r.setStatus({reset_complete:!0}),e.props.logoutClient().then((function(){Object(u.redirectToLogin)(e.props.is_logged_in,Object(p.getLanguage)())}))},e.handleSubmit=function(t,r){var o=e.props.verification_code,n={reset_password:1,new_password:t.password,verification_code:o};f.b.resetPassword(n).then(function(){var t=b(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.error?e.onResetComplete(o.error.message,r):e.onResetComplete(null,r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.validateReset=function(e){var t={};return Object(u.validLength)(e.password,{min:8,max:25})?Object(u.validPassword)(e.password)||(t.password=Object(u.getErrorMessages)().password()):t.password=Object(p.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},e}return t=a,(r=[{key:"render",value:function(){return o.createElement("div",{className:"reset-password"},o.createElement(l.Formik,{initialValues:x,initialStatus:{reset_complete:!1,error_msg:""},validate:this.validateReset,onSubmit:this.handleSubmit},(function(e){var t=e.handleBlur,r=e.errors,n=e.values,s=e.touched,a=e.isSubmitting,d=e.handleChange,f=e.status;return o.createElement(l.Form,null,o.createElement(o.Fragment,null,f.reset_complete?o.createElement("div",{className:"reset-password__password-selection"},o.createElement(c.Text,{as:"p",weight:"bold",className:"reset-password__heading"},o.createElement(p.Localize,{i18n_default_text:"Your password has been changed"})),o.createElement(c.Text,{as:"p",size:"xxs",className:"reset-password__subtext"},o.createElement(p.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):o.createElement("div",{className:"reset-password__password-selection"},o.createElement(c.Text,{as:"p",weight:"bold",className:"reset-password__heading"},o.createElement(p.Localize,{i18n_default_text:"Choose a new password"})),o.createElement("fieldset",{className:"reset-password__fieldset"},o.createElement(c.PasswordMeter,{input:n.password,has_error:!(!s.password||!r.password),custom_feedback_messages:Object(u.getErrorMessages)().password_warnings},o.createElement(c.PasswordInput,{className:"reset-password__password-field",name:"password",label:Object(p.localize)("Create a password"),onChange:d,onBlur:t,error:s.password&&r.password,value:n.password,"data-lpignore":"true",required:!0}))),o.createElement(c.Text,{as:"p",size:"xxs",className:"reset-password__subtext"},f.error_msg?o.createElement(p.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:f.error_msg}}):o.createElement(p.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),o.createElement(c.Button,{className:i()("reset-password__btn",{"reset-password__btn--disabled":!n.password||r.password||a}),type:"submit",is_disabled:!n.password||r.password||a,primary:!0},o.createElement(p.Localize,{i18n_default_text:"Reset my password"})))))})))}}])&&g(t.prototype,r),n&&g(t,n),a}(o.Component);O.propTypes={enableApp:s.a.func,isModalVisible:s.a.func,verification_code:s.a.string};var R=function(e){var t=e.enableApp,r=e.disableApp,n=e.is_loading,s=e.is_visible,a=e.is_logged_in,i=e.logoutClient,l=e.verification_code,u=e.toggleResetPasswordModal;return o.createElement(c.Dialog,{is_visible:s,disableApp:r,enableApp:t,is_loading:n},o.createElement(O,{is_logged_in:a,verification_code:l,isModalVisible:u,enableApp:t,logoutClient:i}))};R.propTypes={disableApp:s.a.func,enableApp:s.a.func,is_loading:s.a.bool,is_visible:s.a.bool,logoutClient:s.a.func,toggleResetPasswordModal:s.a.func,verification_code:s.a.string};var j=Object(d.b)((function(e){var t=e.ui,r=e.client;return{is_visible:t.is_reset_password_modal_visible,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,is_logged_in:r.is_logged_in,logoutClient:r.logout,toggleResetPasswordModal:t.toggleResetPasswordModal,verification_code:r.verification_code.reset_password}}))(R)}}]);
//# sourceMappingURL=core.reset-password-modal.5bc5eacd592bb1c75015.js.map