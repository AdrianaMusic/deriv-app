(window.webpackJsonp=window.webpackJsonp||[]).push([["account-info"],{610:function(e,t,n){var c,a,i,r;window,e.exports=(c=n(14),a=n(0),i=n(26),r=n(3),function(e){var t={};function n(c){if(t[c])return t[c].exports;var a=t[c]={i:c,l:!1,exports:{}};return e[c].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(c,a,function(t){return e[t]}.bind(null,a));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=140)}({0:function(e,t){e.exports=c},1:function(e,t){e.exports=a},140:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(0),r=n.n(i),o=n(1),s=n(3),l=function(e){var t=e.amount,n=e.className,c=e.currency,i=void 0===c?"USD":c,r=e.has_sign,l=e.should_format,u=void 0===l||l,_="";+t&&(t<0||r)&&(_=t>0?"+":"-");var p=r||u?Math.abs(t):t,d=u?Object(s.formatMoney)(i,p,!0):p;return o.createElement(o.Fragment,null,r&&_,o.createElement("span",{className:a()(n,"symbols","symbols--".concat(i.toLowerCase()))}),d)};l.propTypes={amount:r.a.oneOfType([r.a.number,r.a.string]),className:r.a.string,currency:r.a.string,has_sign:r.a.bool,should_format:r.a.bool};var u=o.memo(l);n(83),t.default=u},2:function(e,t){e.exports=i},3:function(e,t){e.exports=r},83:function(e,t,n){}}).default)},611:function(e,t,n){},624:function(e,t,n){var c,a,i;window,e.exports=(c=n(14),a=n(0),i=n(26),function(e){var t={};function n(c){if(t[c])return t[c].exports;var a=t[c]={i:c,l:!1,exports:{}};return e[c].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(c,a,function(t){return e[t]}.bind(null,a));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=122)}({0:function(e,t){e.exports=c},1:function(e,t){e.exports=a},122:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(1),r=n(0),o=n.n(r),s=n(27);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,e);var t,n,c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return d(this,n)}}(r);function r(){var e;u(this,r);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=c.call.apply(c,[this].concat(n))).onClick=function(){(0,e.props.onClick)()},e}return t=r,(n=[{key:"componentDidUpdate",value:function(e){e.count===this.props.count&&e.label===this.props.label&&e.header_content===this.props.header_content||this.props.setActiveLineStyle()}},{key:"render",value:function(){var e=this.props,t=e.active_tab_ref,n=e.count,c=e.id,r=e.header_content,o=e.is_active,l=e.is_label_hidden,u=e.label,_=e.top,p=e.bottom,d=e.header_fit_content,f=a()("dc-tabs__item",{"dc-tabs__active":o,"dc-tabs__item--top":_,"dc-tabs__item--bottom":p,"dc-tabs__item--header-fit-content":d,"dc-tabs__item--is-hidden":l});return i.createElement("li",{id:c,className:f,onClick:this.onClick,ref:t},r||u,!!n&&i.createElement(s.default,{className:"dc-tabs__item__counter",count:n}))}}])&&_(t.prototype,n),r}(i.Component);m.propTypes={className:o.a.string,count:o.a.number,is_active:o.a.bool,is_label_hidden:o.a.bool,label:o.a.string,onClick:o.a.func};var b=m;function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(r,e);var t,n,c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return v(this,n)}}(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=c.call(this,e)).onTabItemClick=function(e){t.setState({active_index:e})},t.setActiveLineStyle=function(){if(t.props.header_fit_content&&t.active_tab_ref&&t.tabs_wrapper_ref){var e=t.tabs_wrapper_ref.getBoundingClientRect(),n=t.active_tab_ref.getBoundingClientRect();t.setState({active_line_style:{left:n.left-e.left,width:n.width}})}},t.setActiveTabRef=function(e){t.active_tab_ref=e,t.setActiveLineStyle()},t.setTabsWrapperRef=function(e){t.tabs_wrapper_ref=e,t.setActiveLineStyle()},t.state={active_index:e.active_index||0},t}return t=r,(n=[{key:"componentDidUpdate",value:function(e,t){-1!==this.props.active_index&&t.active_index!==this.state.active_index&&(this.setState({active_index:this.state.active_index||0}),"function"==typeof this.props.onTabItemClick&&this.props.onTabItemClick(this.state.active_index)),this.props.active_index!==e.active_index&&this.setState({active_index:this.props.active_index})}},{key:"render",value:function(){var e,t,n,c=this,r=this.props,o=r.children,s=r.className,l=r.top,u=r.bottom,_=r.center,p=r.fit_content,d=r.header_fit_content,f=r.single_tab_has_no_label,m=this.state.active_index,g=p?"150px":"".concat((100/o.length).toFixed(2),"%");return i.createElement("div",{className:a()("dc-tabs",(e={},t="dc-tabs dc-tabs--".concat(s),n=s,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),style:{"--tab-width":"".concat(g)}},i.createElement("ul",{className:a()("dc-tabs__list",{"dc-tabs__list--top":l,"dc-tabs__list--bottom":u,"dc-tabs__list--center":_,"dc-tabs__list--header-fit-content":d}),ref:this.setTabsWrapperRef},i.Children.map(o,(function(e,t){var n=e.props,a=n.count,r=n.header_content,s=n.label;return i.createElement(b,{count:a,is_active:t===m,key:s,is_label_hidden:1===o.length&&f,label:s,top:l,bottom:u,header_fit_content:d,active_tab_ref:t===m?c.setActiveTabRef:null,header_content:r,onClick:function(){return c.onTabItemClick(t)},setActiveLineStyle:c.setActiveLineStyle})})),i.createElement("span",{className:a()("dc-tabs__active-line",{"dc-tabs__active-line--top":l,"dc-tabs__active-line--bottom":u,"dc-tabs__active-line--fit-content":p,"dc-tabs__active-line--header-fit-content":d,"dc-tabs__active-line--is-hidden":1===o.length&&f}),style:this.state.active_line_style})),i.createElement("div",{className:"dc-tabs__content"},i.Children.map(o,(function(e,t){if(t===m)return e.props.children}))))}}])&&h(t.prototype,n),r}(i.Component);E.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node])};var O=E;n(98),t.default=O},2:function(e,t){e.exports=i},27:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(0),r=n.n(i),o=n(1),s=function(e){var t=e.className,n=e.count;return o.createElement("div",{className:a()("dc-counter",t)},n)};s.propTypes={className:r.a.string,count:r.a.number};var l=s;n(32),t.default=l},32:function(e,t,n){},98:function(e,t,n){}}).default)},625:function(e,t,n){},751:function(e,t,n){"use strict";n.r(t);var c=n(6),a=n.n(c),i=n(4),r=n.n(i),o=n(0),s=n(98),l=n(28),u=n.n(l),_=(n(66),n(7)),p=n.n(_),d=(n(31),n(30)),f=n.n(d),m=(n(65),n(43)),b=n.n(m),g=(n(85),n(2)),h=n(37),y=n.n(h),v=(n(72),n(78)),w=n.n(v),E=(n(157),n(19)),O=n(13),x=n.n(O),j=(n(51),n(610)),k=n.n(j),N=(n(611),n(624)),S=n.n(N),C=(n(625),n(42)),A=n.n(C),T=(n(84),n(3)),D=n(8),M=n(83),R=n(270),L=function(e){var t=e.currency;return e.is_virtual?o.createElement(g.Localize,{i18n_default_text:"Demo"}):t?Object(T.getCurrencyDisplayCode)(t):o.createElement(g.Localize,{i18n_default_text:"No currency assigned"})},P=function(e){var t=e.account_type;return o.createElement("div",null,Object(M.b)(t))},z=function(e){var t=e.account_type,n=e.balance,c=e.currency,i=e.currency_icon,r=e.display_type,s=e.has_balance,l=e.is_disabled,u=e.is_virtual,_=e.loginid,d=e.onClickAccount,f=e.selected_loginid;return l&&!c?null:o.createElement(o.Fragment,null,o.createElement("div",{id:"dt_".concat(_),className:a()("acc-switcher__account",{"acc-switcher__account--selected":_===f,"acc-switcher__account--disabled":l}),onClick:l?void 0:d},o.createElement("span",{className:"acc-switcher__id"},o.createElement(p.a,{icon:c?i:"IcCurrencyUnknown",className:"acc-switcher__id-icon",size:24}),o.createElement("span",null,"currency"===r?o.createElement(L,{is_virtual:u,currency:c}):o.createElement(P,{account_type:t}),o.createElement("div",{className:"acc-switcher__loginid-text"},_)),s&&o.createElement("span",{className:"acc-switcher__balance"},c&&o.createElement(k.a,{currency:c,amount:Object(T.formatMoney)(c,n,!0),should_format:!1})))))},I=function(e){var t=e.children,n=e.header,c=e.is_visible,i=e.toggleVisibility;return o.createElement(o.Fragment,null,o.createElement("div",{className:a()("acc-switcher",{"acc-info--show":!c}),onClick:i},o.createElement("span",{className:"acc-switcher__list-title"},n),o.createElement(p.a,{icon:"IcChevronDown",className:"acc-info__select-arrow acc-info__select-arrow--invert"})),c&&o.createElement(o.Fragment,null,t))};I.propTypes={children:r.a.node,header:r.a.oneOfType([r.a.object,r.a.string]),is_visible:r.a.bool,toggleVisibility:r.a.func};var F=I;function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,n,c,a,i,r){try{var o=e[i](r),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(c,a)}function B(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,c=q(e);if(t){var a=q(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(l,e);var t,n,c,i,r,s=J(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).toggleVisibility=function(e){var n,c,a;t.setState((n={},c="is_".concat(e,"_visible"),a=!t.state["is_".concat(e,"_visible")],c in n?Object.defineProperty(n,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[c]=a,n))},t.setWrapperRef=function(e){t.wrapper_ref=e},t.updateAccountTabIndex=function(e){t.setState({active_tab_index:e})},t.handleClickOutside=function(e){var n=!e.target.classList.contains("acc-info");t.wrapper_ref&&!t.wrapper_ref.contains(e.target)&&t.props.is_visible&&n&&t.props.toggleAccountsDialog()},t.handleLogout=function(){t.props.toggleAccountsDialog(),t.props.is_positions_drawer_on&&t.props.togglePositionsDrawer(),t.props.logoutClient().then((function(){t.props.routeBackInApp(t.props.history)}))},t.redirectToMt5=function(e){t.props.toggleAccountsDialog(),t.props.history.push("".concat(T.routes.mt5,"#").concat(e))},t.openMt5RealAccount=function(e){sessionStorage.setItem("open_mt5_account_type","real.".concat(e)),t.redirectToMt5Real()},t.redirectToMt5Real=function(){!t.props.is_logged_in||t.props.is_mt5_allowed?t.redirectToMt5("real"):window.open(Object(T.urlFor)("user/metatrader",{legacy:!0}))},t.onListEnter=function(){return t.setState({has_autohide:!1})},t.onListLeave=function(){return t.setState({has_autohide:!0})},t.openMt5DemoAccount=function(e){sessionStorage.setItem("open_mt5_account_type","demo.".concat(e)),t.redirectToMt5Demo()},t.redirectToMt5Demo=function(){t.redirectToMt5("demo")},t.setAccountCurrency=function(){t.props.toggleAccountsDialog(),t.props.toggleSetCurrencyModal()},t.onClickUpgrade=function(){"svg"===t.props.can_upgrade_to?t.props.openRealAccountSignup():window.open(Object(T.urlFor)("new_account/maltainvestws",{legacy:!0}))},t.isDemo=function(e){return/^demo/.test(e.group)},t.isReal=function(e){return!t.isDemo(e)},t.getRemainingAccounts=function(e){var t=[{account_types:["svg"],icon:"Synthetic",title:Object(g.localize)("Synthetic"),type:"synthetic"},{account_types:["vanuatu","svg_standard","svg_financial"],icon:"Financial",title:Object(g.localize)("Financial"),type:"financial"},{account_types:["labuan"],icon:"Financial STP",title:Object(g.localize)("Financial STP"),type:"financial_stp"}];return e.forEach((function(e){var n=e.split(/[demo|real]_/)[1],c=t.findIndex((function(e){return e.account_types.indexOf(n)>-1}));t.splice(c,1)})),t},t.state={active_tab_index:e.is_virtual?1:0,is_demo_deriv_visible:!0,is_demo_dmt5_visible:!0,is_real_deriv_visible:!0,is_real_dmt5_visible:!0,has_autohide:!0},t}return t=l,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),this.props.updateMt5LoginList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"doSwitch",value:(i=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.toggleAccountsDialog(),this.props.account_loginid!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.props.switchAccount(t);case 5:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(n,c){var a=i.apply(e,t);function r(e){U(a,n,c,r,o,"next",e)}function o(e){U(a,n,c,r,o,"throw",e)}r(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(!this.props.is_logged_in)return!1;var t=this.props.is_mt5_allowed?Object(g.localize)("Total assets in your Deriv and DMT5 demo accounts."):Object(g.localize)("Total assets in your Deriv demo accounts."),n=this.props.is_mt5_allowed?Object(g.localize)("Total assets in your Deriv and DMT5 real accounts."):Object(g.localize)("Total assets in your Deriv real accounts."),c=this.is_real_account_tab?n:t,i=o.createElement("div",{className:"acc-switcher__list-wrapper"},o.createElement(F,{header:o.createElement(g.Localize,{i18n_default_text:"Deriv Accounts"}),is_visible:this.state.is_demo_deriv_visible,toggleVisibility:function(){e.toggleVisibility("demo_deriv")}},o.createElement("div",{className:"acc-switcher__accounts"},this.sorted_account_list.filter((function(e){return e.is_virtual})).map((function(t){return o.createElement(z,{key:t.loginid,balance:e.props.accounts[t.loginid].balance,currency:e.props.accounts[t.loginid].currency,currency_icon:"IcCurrency-".concat(t.icon),display_type:"currency",has_balance:"balance"in e.props.accounts[t.loginid],is_disabled:t.is_disabled,is_virtual:t.is_virtual,loginid:t.loginid,onClickAccount:t.is_disabled?void 0:e.doSwitch.bind(e,t.loginid),selected_loginid:e.props.account_loginid})})))),this.props.is_mt5_allowed&&o.createElement(o.Fragment,null,o.createElement("div",{className:"acc-switcher__separator acc-switcher__separator--no-padding"}),o.createElement(F,{header:o.createElement(g.Localize,{i18n_default_text:"DMT5 Accounts"}),is_visible:this.state.is_demo_dmt5_visible,toggleVisibility:function(){e.toggleVisibility("demo_dmt5")}},this.props.is_loading_mt5?o.createElement("div",{className:"acc-switcher__accounts--is-loading"},o.createElement(R.b,{speed:3})):o.createElement(o.Fragment,null,!!this.demo_mt5.length&&o.createElement("div",{className:"acc-switcher__accounts"},this.demo_mt5.map((function(t){return o.createElement(z,{key:t.login,account_type:t.group,balance:t.balance,currency:t.currency,currency_icon:"IcMt5-".concat(Object(M.b)(t.group)),has_balance:"balance"in t,is_virtual:!0,loginid:t.display_login,onClickAccount:e.redirectToMt5Demo})}))),this.remaining_demo_mt5.map((function(t){return o.createElement("div",{key:t.title,className:"acc-switcher__new-account"},o.createElement(p.a,{icon:"IcMt5-".concat(t.icon),size:24}),o.createElement("span",{className:"acc-switcher__new-account-text"},t.title),o.createElement(x.a,{onClick:function(){return e.openMt5DemoAccount(t.type)},className:"acc-switcher__new-account-btn",secondary:!0,small:!0},Object(g.localize)("Add")))})))))),r=o.createElement("div",{className:"acc-switcher__list-wrapper",onMouseEnter:this.onListEnter,onMouseLeave:this.onListLeave},o.createElement(o.Fragment,null,o.createElement(F,{header:o.createElement(g.Localize,{i18n_default_text:"Deriv Accounts"}),is_visible:this.state.is_real_deriv_visible,toggleVisibility:function(){e.toggleVisibility("real_deriv")}},o.createElement("div",{className:"acc-switcher__accounts"},this.sorted_account_list.filter((function(e){return!e.is_virtual})).map((function(t){return o.createElement(z,{key:t.loginid,balance:e.props.accounts[t.loginid].balance,currency:e.props.accounts[t.loginid].currency,currency_icon:"IcCurrency-".concat(t.icon),display_type:"currency",has_balance:"balance"in e.props.accounts[t.loginid],is_disabled:t.is_disabled,is_virtual:t.is_virtual,loginid:t.loginid,onClickAccount:t.is_disabled?void 0:e.doSwitch.bind(e,t.loginid),selected_loginid:e.props.account_loginid})}))),this.can_upgrade&&o.createElement("div",{className:"acc-switcher__new-account"},o.createElement(p.a,{icon:"IcDeriv",size:24}),o.createElement("span",{className:"acc-switcher__new-account-text"},Object(g.localize)("Deriv account")),o.createElement(x.a,{onClick:this.onClickUpgrade,className:"acc-switcher__new-account-btn",secondary:!0,small:!0},Object(g.localize)("Add"))),!this.can_upgrade&&(this.can_open_multi||this.props.can_change_fiat_currency||!this.has_set_currency)&&o.createElement(x.a,{className:"acc-switcher__btn",secondary:!0,onClick:this.has_set_currency?this.props.openRealAccountSignup:this.setAccountCurrency},this.can_open_multi?Object(g.localize)("Add or manage account"):Object(g.localize)("Manage account")))),this.props.is_mt5_allowed&&o.createElement(o.Fragment,null,o.createElement("div",{className:"acc-switcher__separator acc-switcher__separator--no-padding"}),o.createElement(F,{header:o.createElement(g.Localize,{i18n_default_text:"DMT5 Accounts"}),is_visible:this.state.is_real_dmt5_visible,toggleVisibility:function(){e.toggleVisibility("real_dmt5")}},this.props.is_loading_mt5?o.createElement("div",{className:"acc-switcher__accounts--is-loading"},o.createElement(R.b,{speed:3})):o.createElement(o.Fragment,null,!!this.real_mt5.length&&o.createElement("div",{className:"acc-switcher__accounts"},this.real_mt5.map((function(t){return o.createElement(z,{key:t.login,account_type:t.group,balance:t.balance,currency:t.currency,currency_icon:"IcMt5-".concat(Object(M.b)(t.group)),has_balance:"balance"in t,loginid:t.display_login,onClickAccount:e.redirectToMt5Real})}))),this.remaining_real_mt5.map((function(t){return o.createElement("div",{key:t.title,className:"acc-switcher__new-account"},o.createElement(p.a,{icon:"IcMt5-".concat(t.icon),size:24}),o.createElement("span",{className:"acc-switcher__new-account-text"},t.title),o.createElement(x.a,{onClick:function(){return e.openMt5RealAccount(t.type)},className:"acc-switcher__new-account-btn",secondary:!0,small:!0,is_disabled:!e.props.has_any_real_account||"financial_stp"===t.type&&e.props.is_pending_authentication},Object(g.localize)("Add")))}))))));return o.createElement("div",{className:"acc-switcher__list",ref:this.setWrapperRef},o.createElement(S.a,{active_index:this.state.active_tab_index,className:"acc-switcher__list-tabs",onTabItemClick:this.updateAccountTabIndex,top:!0},o.createElement("div",{label:Object(g.localize)("Real")},o.createElement(u.a,null,o.createElement(A.a,{height:"354px"},r)),o.createElement(f.a,null,o.createElement(y.a,{className:"acc-switcher__list-container",max_autoheight_offset:"204px"},r))),o.createElement("div",{label:Object(g.localize)("Demo")},o.createElement(u.a,null,o.createElement(A.a,{height:"354px"},i)),o.createElement(f.a,null,o.createElement(y.a,{className:"acc-switcher__list-container",max_autoheight_offset:"204px"},i)))),o.createElement("div",{className:a()("acc-switcher__separator",{"acc-switcher__separator--auto-margin":this.props.is_mobile})}),o.createElement("div",{className:"acc-switcher__total"},o.createElement("span",null,o.createElement(g.Localize,{i18n_default_text:"Total assets"})),o.createElement("span",{className:"acc-switcher__balance"},o.createElement(k.a,{currency:this.is_real_account_tab?this.props.obj_total_balance.currency:"USD",amount:Object(T.formatMoney)(this.is_real_account_tab?this.props.obj_total_balance.currency:"USD",this.is_real_account_tab?this.total_real_assets:this.total_demo_assets,!0),should_format:!1}))),o.createElement("div",{className:"acc-switcher__total-subtitle"},o.createElement("span",null,c)),o.createElement("div",{className:"acc-switcher__separator"}),o.createElement("div",{id:"dt_logout_button",className:"acc-switcher__logout"},o.createElement("span",{className:"acc-switcher__logout-text",onClick:this.handleLogout},Object(g.localize)("Log out")),o.createElement(p.a,{icon:"IcLogout",className:"acc-switcher__logout-icon drawer__icon",onClick:this.handleLogout})))}},{key:"is_real_account_tab",get:function(){return 0===this.state.active_tab_index}},{key:"sorted_account_list",get:function(){var e=this;return this.props.account_list.slice().sort((function(t,n){var c=e.props.accounts[t.loginid].currency,a=e.props.accounts[n.loginid].currency,i=Object(T.isCryptocurrency)(c),r=Object(T.isCryptocurrency)(a),o=!i,s=!r;return t.is_virtual||n.is_virtual?t.is_virtual?1:-1:i&&r||o&&s?c<a?-1:1:o&&r?-1:1}))}},{key:"sorted_mt5_list",get:function(){return this.props.mt5_login_list.slice().sort((function(e,t){return/demo/.test(e.group)&&!/demo/.test(t.group)?1:/demo/.test(t.group)&&!/demo/.test(e.group)||/svg$/.test(e.group)?-1:/vanuatu|svg_(standard|financial)/.test(e.group)?/svg$/.test(t.group)?1:-1:1}))}},{key:"demo_mt5",get:function(){return this.sorted_mt5_list.filter(this.isDemo)}},{key:"remaining_demo_mt5",get:function(){var e=this,t=Object.keys(this.demo_mt5).map((function(t){return e.demo_mt5[t].group}));return this.getRemainingAccounts(t)}},{key:"real_mt5",get:function(){return this.sorted_mt5_list.filter(this.isReal)}},{key:"remaining_real_mt5",get:function(){var e=this,t=Object.keys(this.real_mt5).map((function(t){return e.real_mt5[t].group}));return this.getRemainingAccounts(t)}},{key:"has_set_currency",get:function(){return this.props.account_list.filter((function(e){return!e.is_virtual})).some((function(e){return"Real"!==e.title}))}},{key:"can_upgrade",get:function(){return!(!this.props.is_virtual||!this.props.can_upgrade_to)}},{key:"can_open_multi",get:function(){return!(this.props.is_virtual||!(this.props.available_crypto_currencies.length>0))}},{key:"total_demo_assets",get:function(){var e=this.props.account_list.find((function(e){return e.is_virtual})).loginid,t=this.props.accounts[e]?this.props.accounts[e].balance:0,n=this.props.mt5_login_list.filter((function(e){return/^demo/.test(e.group)})).reduce((function(e,t){return e.balance+=t.balance,e}),{balance:0});return Array.isArray(this.props.mt5_login_list)?n.balance+t:t}},{key:"total_real_assets",get:function(){return this.props.obj_total_balance.amount_real+this.props.obj_total_balance.amount_mt5}}])&&B(t.prototype,n),c&&B(t,c),l}(o.Component);G.propTypes={available_crypto_currencies:r.a.array,account_list:r.a.array,account_loginid:r.a.string,accounts:r.a.object,can_change_fiat_currency:r.a.bool,can_upgrade_to:r.a.string,has_any_real_account:r.a.bool,is_loading_mt5:r.a.bool,is_logged_in:r.a.bool,is_mt5_allowed:r.a.bool,is_pending_authentication:r.a.bool,is_positions_drawer_on:r.a.bool,is_virtual:r.a.bool,is_visible:r.a.bool,logoutClient:r.a.func,mt5_login_list:r.a.array,obj_total_balance:r.a.object,openRealAccountSignup:r.a.func,switchAccount:r.a.func,toggleAccountsDialog:r.a.func,togglePositionsDrawer:r.a.func,toggleSetCurrencyModal:r.a.func,updateMt5LoginList:r.a.func};var H=Object(E.withRouter)(Object(D.b)((function(e){var t=e.client,n=e.common,c=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,account_loginid:t.loginid,accounts:t.accounts,can_change_fiat_currency:t.can_change_fiat_currency,account_list:t.account_list,can_upgrade_to:t.can_upgrade_to,is_loading_mt5:t.is_populating_mt5_account_list,is_logged_in:t.is_logged_in,is_mt5_allowed:t.is_mt5_allowed,is_pending_authentication:t.is_pending_authentication,is_virtual:t.is_virtual,has_any_real_account:t.has_any_real_account,mt5_login_list:t.mt5_login_list,obj_total_balance:t.obj_total_balance,switchAccount:t.switchAccount,logoutClient:t.logout,updateMt5LoginList:t.updateMt5LoginList,routeBackInApp:n.routeBackInApp,is_positions_drawer_on:c.is_positions_drawer_on,openRealAccountSignup:c.openRealAccountSignup,toggleAccountsDialog:c.toggleAccountsDialog,togglePositionsDrawer:c.togglePositionsDrawer,toggleSetCurrencyModal:c.toggleSetCurrencyModal}}))(G)),K=function(e){var t=e.disableApp,n=e.enableApp,c=e.is_visible,i=e.is_upgrade_enabled,r=e.toggle;return o.createElement(w.a,{id:"dt_account_switcher_modal",className:"accounts-switcher",enableApp:n,is_open:c,is_vertical_top:!0,disableApp:t,has_close_icon:!1,toggleModal:r,height:"auto",width:"calc(100vw - 32px)"},o.createElement(y.a,{className:a()("acc-switcher__wrapper","acc-switcher__wrapper--is-mobile"),max_autoheight_offset:"48px"},o.createElement(H,{is_mobile:!0,is_visible:!0,toggle:r,is_upgrade_enabled:i})))};K.propTypes={children:r.a.any,onClose:r.a.func,title:r.a.string,visible:r.a.bool,wrapperClassName:r.a.string};var Q=K;var X=function(e){var t=e.is_disabled,n=e.disabled_message,c=e.children;return t&&n?o.createElement(b.a,{alignment:"bottom",message:n,zIndex:99999},c):o.createElement(o.Fragment,null,c)},Y=function(e){var t,n,c,i=e.acc_switcher_disabled_message,r=e.balance,l=e.currency,_=e.disableApp,d=e.enableApp,m=e.is_dialog_on,b=e.is_virtual,h=e.toggleDialog,y=e.is_disabled;return o.createElement("div",{className:"acc-info__wrapper"},o.createElement("div",{className:"acc-info__separator"}),o.createElement(X,{is_disabled:y,disabled_message:i},o.createElement("div",{className:a()("acc-info",{"acc-info--show":m,"acc-info--is-virtual":b,"acc-info--is-disabled":y}),onClick:y?void 0:h},o.createElement("span",{className:"acc-info__id"},o.createElement(u.a,null,o.createElement(p.a,{icon:"IcCurrency-".concat(b?"virtual":l||"Unknown"),className:"acc-info__id-icon acc-info__id-icon--".concat(b?"virtual":l),size:24})),o.createElement(f.a,null,(b||l)&&o.createElement(p.a,{icon:"IcCurrency-".concat(b?"virtual":l),className:"acc-info__id-icon acc-info__id-icon--".concat(b?"virtual":l),size:24}))),void 0!==r&&o.createElement("p",{className:a()("acc-info__balance",{"acc-info__balance--no-currency":!l&&!b})},o.createElement("span",{className:a()("symbols",(t={},n="symbols--".concat((l||"").toLowerCase()),c=l,n in t?Object.defineProperty(t,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[n]=c,t))}),!l&&o.createElement(g.Localize,{i18n_default_text:"No currency assigned"}),l&&r),y?o.createElement(p.a,{icon:"IcLock"}):o.createElement(p.a,{icon:"IcChevronDownBold",className:"acc-info__select-arrow"}))),o.createElement(f.a,null,o.createElement(Q,{is_visible:m,disableApp:_,enableApp:d,toggle:h})),o.createElement(u.a,null,o.createElement(s.CSSTransition,{in:m,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},unmountOnExit:!0},o.createElement("div",{className:"acc-switcher__wrapper"},o.createElement(H,{is_visible:m,toggle:h})))))};Y.propTypes={acc_switcher_disabled_message:r.a.string,account_type:r.a.string,balance:r.a.string,currency:r.a.string,is_dialog_on:r.a.bool,is_disabled:r.a.bool,is_virtual:r.a.bool,loginid:r.a.string,toggleDialog:r.a.func};t.default=Y}}]);
//# sourceMappingURL=core.account-info.6e4d724a8fce69928323.js.map