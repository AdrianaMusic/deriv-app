(window.webpackJsonp=window.webpackJsonp||[]).push([["reset-password-modal"],{723:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return O}));var n=r(0),o=r(6),s=r.n(o),a=r(11),i=r.n(a),l=r(12),c=r(5),u=r(2),p=r(10),d=r(63),f=r(28),m=r(13);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r,n,o,s,a){try{var i=e[s](a),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){w(s,n,o,a,i,"next",e)}function i(e){w(s,n,o,a,i,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S={password:""},P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,r,o,s=h(a);function a(){var e;v(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).onResetComplete=function(t,r){if(r.setSubmitting(!1),r.resetForm({password:""}),t)return console.error(t),void r.setStatus({error_msg:t});r.setStatus({reset_complete:!0}),e.props.logoutClient().then((function(){Object(f.redirectToLogin)()}))},e.handleSubmit=function(t,r){var n=e.props.verification_code,o={reset_password:1,new_password:t.password,verification_code:n};m.b.resetPassword(o).then(function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.error?e.onResetComplete(n.error.message,r):e.onResetComplete(null,r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.validateReset=function(e){var t={};return e.password&&(e.password.length<8||!Object(d.c)(e.password))&&(t.password=!0),t},e}return t=a,(r=[{key:"render",value:function(){return n.createElement("div",{className:"reset-password"},n.createElement(l.c,{initialValues:S,initialStatus:{reset_complete:!1,error_msg:""},validate:this.validateReset,onSubmit:this.handleSubmit},(function(e){var t=e.handleBlur,r=e.errors,o=e.values,s=e.touched,a=e.isSubmitting,p=e.handleChange,d=e.status;return n.createElement(l.b,null,n.createElement(n.Fragment,null,d.reset_complete?n.createElement("div",{className:"reset-password__password-selection"},n.createElement("p",{className:"reset-password__heading"},n.createElement(u.Localize,{i18n_default_text:"Your password has been changed"})),n.createElement("p",{className:"reset-password__subtext"},n.createElement(u.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):n.createElement("div",{className:"reset-password__password-selection"},n.createElement("p",{className:"reset-password__heading"},n.createElement(u.Localize,{i18n_default_text:"Choose a new password"})),n.createElement("fieldset",{className:"reset-password__fieldset"},n.createElement(c.PasswordMeter,{input:o.password,has_error:!(!s.password||!r.password)},n.createElement(c.PasswordInput,{className:"reset-password__password-field",name:"password",label:Object(u.localize)("Create a password"),onChange:p,onBlur:t,error:s.password&&r.password,value:o.password,"data-lpignore":"true",required:!0}))),n.createElement("p",{className:"reset-password__subtext"},d.error_msg?n.createElement(u.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:d.error_msg}}):n.createElement(u.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),n.createElement(c.Button,{className:i()("reset-password__btn",{"reset-password__btn--disabled":!o.password||r.password||a}),type:"submit",is_disabled:!o.password||r.password||a,primary:!0},n.createElement(u.Localize,{i18n_default_text:"Reset my password"})))))})))}}])&&g(t.prototype,r),o&&g(t,o),a}(n.Component);P.propTypes={enableApp:s.a.func,isModalVisible:s.a.func,verification_code:s.a.string};var C=function(e){var t=e.enableApp,r=e.disableApp,o=e.is_loading,s=e.is_visible,a=e.logoutClient,i=e.verification_code,l=e.toggleResetPasswordModal;return n.createElement(c.Dialog,{is_visible:s,disableApp:r,enableApp:t,is_loading:o},n.createElement(P,{verification_code:i,isModalVisible:l,enableApp:t,logoutClient:a}))};C.propTypes={disableApp:s.a.func,enableApp:s.a.func,is_loading:s.a.bool,is_visible:s.a.bool,logoutClient:s.a.func,toggleResetPasswordModal:s.a.func,verification_code:s.a.string};var O=Object(p.b)((function(e){var t=e.ui,r=e.client;return{is_visible:t.is_reset_password_modal_visible,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,logoutClient:r.logout,toggleResetPasswordModal:t.toggleResetPasswordModal,verification_code:r.verification_code.reset_password}}))(C)}}]);
//# sourceMappingURL=core.reset-password-modal.a7216b0ca062052bab54.js.map