(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["mt5"],{"./Modules/MT5/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"MT5PasswordModal",(function(){return v})),n.d(t,"MT5ServerErrorDialog",(function(){return P})),n.d(t,"default",(function(){return Jn}));var a=n("../node_modules/formik/dist/formik.esm.js"),r=n("../node_modules/prop-types/index.js"),o=n.n(r),c=n("react"),i=n("react-router"),s=n("@deriv/components"),l=n("@deriv/shared"),u=n("@deriv/translations"),d=n("../node_modules/classnames/index.js"),m=n.n(d),p=function(e){var t=e.classNameMessage,n=void 0===t?void 0:t,a=e.has_cancel,r=e.has_submit,o=e.icon,i=e.message,l=e.onCancel,d=e.onSubmit,p=e.heading,_=e.icon_size,f=e.text_submit,b=e.text_cancel,h=e.is_open,g=e.toggleModal,y=e.title,v=e.has_close_icon,w=e.width,O=void 0===w?void 0:w,E=function(){return o||null},j=function(e){var t=e.className;return c.createElement(s.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})};return c.createElement(s.Modal,{className:"mt5-success-dialog",is_open:h,toggleModal:g,has_close_icon:v,small:!y,title:y,width:O},c.createElement(s.Modal.Body,null,c.createElement("div",{className:m()("success-change__icon-area",{"success-change__icon-area--large":"large"===_,"success-change__icon-area--xlarge":"xlarge"===_})},c.createElement(E,null),c.createElement(j,{className:"bottom-right-overlay"})),!p&&c.createElement("h2",{className:"dc-modal-header__title"},c.createElement(u.Localize,{i18n_default_text:"Success!"})),p&&p,c.isValidElement(i)&&i,!c.isValidElement(i)&&c.createElement("p",{className:n},i)),c.createElement(s.Modal.Footer,null,a&&c.createElement(s.Button,{onClick:l,has_effect:!0,text:b||Object(u.localize)("Maybe later"),secondary:!0,large:!0}),r&&c.createElement(s.Button,{has_effect:!0,onClick:d,text:f,primary:!0,large:!0})))};p.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},p.propTypes={classNameMessage:o.a.string,has_cancel:o.a.bool,has_submit:o.a.bool,heading:o.a.oneOfType([o.a.string,o.a.object]),icon:o.a.object,icon_size:o.a.string,icon_type:o.a.string,message:o.a.oneOfType([o.a.string,o.a.object]),onCancel:o.a.func,onSubmit:o.a.func,text_submit:o.a.string};var _=p,f=(n("./sass/app/modules/mt5/mt5.scss"),n("./Stores/connect.js"));function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var h=function(e,t){return"real"===t?Object(u.localize)("You have created a DMT5 {{account_title}} account. To start trading, transfer funds from your Deriv account into this account.",{account_title:e}):Object(u.localize)("You have created a DMT5 {{account_title}} account.",{account_title:e})},g=function(e){var t=b({},e);return c.createElement(a.c,{initialValues:{password:""},validate:t.validatePassword,onSubmit:function(e,n){t.submitMt5Password(e.password,n.setSubmitting)}},(function(e){var n=e.handleSubmit,a=e.setFieldTouched,r=e.handleChange,o=e.handleBlur,i=e.errors,d=e.values,m=e.isSubmitting,p=e.touched;return c.createElement("form",{onSubmit:n},c.createElement("div",{className:"mt5-password-modal__content"},c.createElement("h2",null,c.createElement(u.Localize,{i18n_default_text:"Choose a password for your DMT5 {{ account_type }} account",values:{account_type:t.account_title}})),c.createElement("div",{className:"dc-modal__container_mt5-password-modal__body"},c.createElement("div",{className:"input-element"},c.createElement(s.PasswordMeter,{input:d.password,has_error:!(!p.password||!i.password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var t=e.has_warning;return c.createElement(s.PasswordInput,{autoComplete:"password",label:Object(u.localize)("Create a password"),error:p.password&&i.password,hint:!t&&Object(u.localize)("Minimum of eight lower and uppercase English letters with numbers"),name:"password",value:d.password,onBlur:o,onChange:function(e){a("password",!0),r(e)}})}))),t.is_real_financial_stp&&c.createElement("div",{className:"dc-modal__container_mt5-password-modal__description"},c.createElement(u.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA). All other accounts, including your Deriv account, are not subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA)."})))),c.createElement(s.FormSubmitButton,{is_disabled:m||!d.password||Object.keys(i).length>0,has_cancel:!0,cancel_label:Object(u.localize)("Cancel"),onCancel:t.closeModal,is_absolute:Object(l.isMobile)(),is_loading:m,label:Object(u.localize)("Add account"),form_error:t.form_error}))}))},y=function(e){var t=e.account_title,n=e.account_type,a=e.disableMt5PasswordModal,r=e.email,o=e.form_error,i=e.history,d=e.has_mt5_error,m=e.is_mt5_password_modal_enabled,p=e.is_mt5_success_dialog_enabled,f=e.setMt5SuccessDialog,b=e.setMt5Error,y=e.submitMt5Password,v=function(e){var t={};return Object(l.validLength)(e.password,{min:8,max:25})?Object(l.validPassword)(e.password)||(t.password=Object(l.getErrorMessages)().password()):t.password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.password.toLowerCase()===r.toLowerCase()&&(t.password=Object(u.localize)("Your password cannot be the same as your email address.")),t},w=function(){f(!1),b(!1)},O=function(){w(),a()},E=function(){return function(e){switch(e){case"synthetic":return c.createElement(s.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return c.createElement(s.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return c.createElement(s.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}(n.type)},j=m&&!d&&!p,S=!d&&p,z="real_financial_stp"===[n.category,n.type].join("_");return c.createElement(c.Fragment,null,c.createElement(s.DesktopWrapper,null,c.createElement(s.Modal,{className:"mt5-password-modal",is_open:j,toggleModal:O,has_close_icon:!0},c.createElement(g,{account_title:t,closeModal:O,form_error:o,submitMt5Password:y,is_real_financial_stp:z,validatePassword:v}))),c.createElement(s.MobileWrapper,null,c.createElement(s.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:j,onClose:O,wrapper_classname:"mt5-password-modal"},c.createElement(g,{account_title:t,closeModal:O,form_error:o,is_real_financial_stp:z,submitMt5Password:y,validatePassword:v}))),c.createElement(_,{is_open:S,toggleModal:O,onCancel:O,onSubmit:function(){a(),w(),"real"===n.category&&i.push(l.routes.cashier_acc_transfer)},classNameMessage:"mt5-password-modal__message",message:h(t,n.category),icon:c.createElement(E,null),icon_size:"xlarge",text_submit:"real"===n.category?Object(u.localize)("Transfer now"):Object(u.localize)("OK"),has_cancel:"real"===n.category}))};y.propTypes={account_title:o.a.string,account_type:o.a.object,disableMt5PasswordModal:o.a.func,email:o.a.string,error_message:o.a.string,has_mt5_error:o.a.bool,is_mt5_password_modal_enabled:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool,setMt5Error:o.a.func,setMt5SuccessDialog:o.a.func,submitMt5Password:o.a.func};var v=Object(f.b)((function(e){var t=e.client,n=e.modules;return{email:t.email,account_title:n.mt5.account_title,account_type:n.mt5.account_type,disableMt5PasswordModal:n.mt5.disableMt5PasswordModal,error_message:n.mt5.error_message,has_mt5_error:n.mt5.has_mt5_error,is_mt5_success_dialog_enabled:n.mt5.is_mt5_success_dialog_enabled,is_mt5_password_modal_enabled:n.mt5.is_mt5_password_modal_enabled,setMt5Error:n.mt5.setError,setMt5SuccessDialog:n.mt5.setMt5SuccessDialog,submitMt5Password:n.mt5.submitMt5Password}}))(Object(i.withRouter)(y));function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=x(e);if(t){var r=x(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,a,r=S(o);function o(){return O(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.has_mt5_error&&!this.props.is_mt5_success_dialog_enabled;return c.createElement(s.Dialog,{title:Object(u.localize)("Somethingâ€™s not right"),confirm_button_text:Object(u.localize)("OK"),onConfirm:this.props.clearMt5Error,disableApp:this.props.disableApp,enableApp:this.props.enableApp,is_visible:e},this.props.error_message||c.createElement(u.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))}}])&&E(t.prototype,n),a&&E(t,a),o}(c.Component);M.propTypes={clearMt5Error:o.a.func,disableApp:o.a.func,enableApp:o.a.func,error_message:o.a.string,has_mt5_error:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool};var P=Object(f.b)((function(e){var t=e.ui,n=e.modules;return{clearMt5Error:n.mt5.clearMt5Error,disableApp:t.disableApp,enableApp:t.enableApp,error_message:n.mt5.error_message,has_mt5_error:n.mt5.has_mt5_error,is_mt5_success_dialog_enabled:n.mt5.is_mt5_success_dialog_enabled}}))(M),N=n("./Services/ws-methods.js"),k=n("./templates/_common/components/loading.jsx"),A=function(){return c.createElement("div",{className:"mt5-real-accounts-display"},c.createElement(k.a,null))},T=function(e){var t=e.onClickSignup;return c.createElement("div",{className:"mt5-dashboard__missing-real"},c.createElement("h1",{className:"mt5-dashboard__missing-real--heading"},c.createElement(u.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."})),c.createElement(s.Button,{className:"mt5-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},c.createElement("span",{className:"btn__text"},c.createElement(u.Localize,{i18n_default_text:"Create a Deriv account"}))))};T.propTypes={onClickSignup:o.a.func};var C=T,D=n("@deriv/account/dist/js/file-uploader-container"),I=n.n(D),R=n("@deriv/account/dist/js/form-sub-header"),L=n.n(R),F=n("@deriv/account/dist/js/poa-expired"),B=n.n(F),U=n("@deriv/account/dist/js/poa-needs-review"),W=n.n(U),q=n("@deriv/account/dist/js/poa-verified"),V=n.n(q),Y=n("@deriv/account/dist/js/poa-unverified"),H=n.n(Y),K=n("@deriv/account/dist/js/poa-submitted"),X=n.n(K),$=n("@deriv/account/dist/js/poa-status-codes"),G=n.n($);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ae=function(e){var t=e.maxLength,n=e.name,r=e.optional,o=void 0!==r&&r,i=ne(e,["maxLength","name","optional"]);return c.createElement(a.a,{name:n},(function(e){var a=e.field,r=e.form,l=r.errors,u=r.touched;return c.createElement(s.Input,te({type:"text",required:!o,name:n,autoComplete:"off",maxLength:t||"30",error:u[a.name]&&l[a.name]},a,i))}))},re=function(e){var t,n=e.values,a=e.residence_list,r=e.account_opening_reason,o=e.is_tin_required,i=Q(a.filter((function(e){return e.text===n.tax_residence&&e.tin_format})),1)[0],s=Q(null!==(t=null==i?void 0:i.tin_format)&&void 0!==t?t:[],1)[0],l=s||"^[A-Za-z0-9./s-]{0,25}$",d={citizen:[function(e){return!!e},function(e){return a.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return a.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!n.tax_residence&&o||s)||!!e},function(e){return!l||e.match(l)}],account_opening_reason:[function(e){return!!e},function(e){return r.map((function(e){return e.value})).includes(e)}]},m={citizen:Object(u.localize)("Citizenship"),tax_residence:Object(u.localize)("Tax residence"),tax_identification_number:Object(u.localize)("Tax identification number"),account_opening_reason:Object(u.localize)("Account opening reason")},p={};return Object.entries(d).forEach((function(e){var t,a=Q(e,2),r=a[0],o=a[1].findIndex((function(e){return!e(n[r])}));-1!==o&&(p[r]=c.createElement(c.Fragment,null,(t=m[r],[Object(u.localize)("{{field_name}} is required",{field_name:t}),Object(u.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o]))})),p},oe=function(e,t,n,a,r,o){var c=e.citizen,i=e.tax_residence,s=ne(e,["citizen","tax_residence"]),l=function(e,t,n){var a,r;return n.forEach((function(n){n.text===e&&(a=n),n.text===t&&(r=n)})),{citizen:a,tax_residence:r}}(c,i,o),u=l.citizen,d=l.tax_residence;a(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({citizen:void 0!==u?u.value:"",tax_residence:void 0!==d?d.value:""},s),t.setSubmitting,r)},ce=function(e){var t,n,r=e.onSave,o=e.is_fully_authenticated,i=e.is_loading,d=e.landing_company,m=e.residence_list,p=e.onCancel,_=e.onSubmit,f=e.value,b=e.index,h=e.form_error,g=[{text:Object(u.localize)("Hedging"),value:"Hedging"},{text:Object(u.localize)("Income Earning"),value:"Income Earning"},{text:Object(u.localize)("Speculative"),value:"Speculative"},{text:Object(u.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],y=null!==(t=null==d||null===(n=d.config)||void 0===n?void 0:n.tax_details_required)&&void 0!==t&&t,v=function(e){r(b,e),p()};return 0===m.length||i?c.createElement(s.Loading,{is_fullscreen:!1}):c.createElement(a.c,{initialValues:{citizen:f.citizen,tax_residence:f.tax_residence,tax_identification_number:f.tax_identification_number,account_opening_reason:f.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return re({values:e,residence_list:m,account_opening_reason:g,is_tin_required:y})},onSubmit:function(e,t){return oe(e,t,b,_,!Object(l.isDeepEqual)(f,e),m)}},(function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.handleChange,i=e.handleBlur,d=e.errors,p=e.touched,_=e.values,b=e.setFieldValue,y=e.isValid;return c.createElement(s.AutoHeightWrapper,{default_height:200,height_offset:Object(l.isDesktop)()?148:null},(function(e){var w=e.height,O=e.setRef;return c.createElement("form",{className:"mt5-financial-stp-modal__form",ref:O,onSubmit:t,autoComplete:"off"},c.createElement(s.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:Object(l.isDesktop)()},c.createElement("p",{className:"details-form__description"},c.createElement(u.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),c.createElement(s.ThemedScrollbars,{height:w,is_bypassed:Object(l.isMobile)()},c.createElement("div",{className:"details-form__elements"},c.createElement(L.a,{title:Object(u.localize)("Details")}),c.createElement("fieldset",{className:"account-form__fieldset"},c.createElement(s.DesktopWrapper,null,c.createElement(a.a,{name:"citizen"},(function(e){var t=e.field;return c.createElement(s.Autocomplete,te({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:Object(u.localize)("Citizenship"),error:p.citizen&&d.citizen,disabled:f.citizen&&o,list_items:m,onItemSelection:function(e){return b("citizen",e.value?e.text:"",!0)},list_portal_id:"modal_root",required:!0}))}))),c.createElement(s.MobileWrapper,null,c.createElement(s.SelectNative,{placeholder:Object(u.localize)("Please select"),label:Object(u.localize)("Citizenship"),value:_.citizen,list_items:m,error:p.citizen&&d.citizen,disabled:f.citizen&&o,use_text:!0,onChange:function(e){return b("citizen",e.target.value,!0)},required:!0}))),c.createElement(L.a,{title:Object(u.localize)("Tax information")}),c.createElement("fieldset",{className:"account-form__fieldset"},c.createElement(s.DesktopWrapper,null,c.createElement(a.a,{name:"tax_residence"},(function(e){var t=e.field;return c.createElement(s.Autocomplete,te({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:Object(u.localize)("Tax residence"),error:p.tax_residence&&d.tax_residence,disabled:f.tax_residence&&o,list_items:m,onItemSelection:function(e){var t=e.value,n=e.text;return b("tax_residence",t?n:"",!0)},list_portal_id:"modal_root"},t))}))),c.createElement(s.MobileWrapper,null,c.createElement(s.SelectNative,{placeholder:Object(u.localize)("Please select"),label:Object(u.localize)("Tax residence"),value:_.tax_residence,error:p.tax_residence&&d.tax_residence,disabled:f.tax_residence&&o,list_items:m,use_text:!0,onChange:function(e){return b("tax_residence",e.target.value,!0)},required:!0}))),c.createElement("fieldset",{className:"account-form__fieldset"},c.createElement(ae,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:Object(u.localize)("Tax identification number"),placeholder:Object(u.localize)("Tax identification number"),value:_.tax_identification_number,onBlur:i,optional:!0})),c.createElement(L.a,{title:Object(u.localize)("Account opening reason")}),c.createElement(a.a,{name:"account_opening_reason"},(function(e){var t=e.field;return c.createElement(c.Fragment,null,c.createElement(s.DesktopWrapper,null,c.createElement(s.Dropdown,te({placeholder:Object(u.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:g,value:_.account_opening_reason,onChange:r,handleBlur:i,error:p.account_opening_reason&&d.account_opening_reason,list_portal_id:"modal_root"},t))),c.createElement(s.MobileWrapper,null,c.createElement(s.SelectNative,te({placeholder:Object(u.localize)("Please select"),name:t.name,label:Object(u.localize)("Account opening reason"),list_items:g,value:_.account_opening_reason,error:p.account_opening_reason&&d.account_opening_reason,onChange:function(e){r(e),b("account_opening_reason",e.target.value,!0)}},t))))}))))),c.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},h&&c.createElement(s.FormSubmitErrorMessage,{message:h}),c.createElement(s.FormSubmitButton,{cancel_label:Object(u.localize)("Previous"),is_disabled:n||!y,is_absolute:Object(l.isMobile)(),label:Object(u.localize)("Next"),onCancel:function(){return v(_)}})))}))}))};ce.propTypes={is_fully_authenticated:o.a.bool,is_loading:o.a.bool,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,residence_list:o.a.array,value:o.a.object,landing_company:o.a.object.isRequired};var ie=ce;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ue(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){ue(o,a,r,c,i,"next",e)}function i(e){ue(o,a,r,c,i,"throw",e)}c(void 0)}))}}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ye(e);if(t){var r=ye(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=c.createRef(),we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,n,r,o=he(i);function i(){var e;_e(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).is_mounted=!1,e.file_uploader_ref=void 0,e.state={document_file:[],file_error_message:null,form_error:"",poa_status:"none",is_loading:!0,resubmit_poa:!1,has_poi:!1},e.validateForm=function(t){if([G.a.verified,G.a.pending].includes(e.state.poa_status))return{};var n={address_line_1:[function(e){return!!e},function(e){return Object(l.validAddress)(e)},function(e){return Object(l.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||Object(l.validAddress)(e)},function(e){return Object(l.validLength)(e,{max:70})}],address_city:[function(e){return!!e},function(e){return Object(l.validLength)(e,{min:1,max:35})},function(e){return Object(l.validLetterSymbol)(e)}],address_state:[function(e){return!!e},function(e){return!e||Object(l.validLength)(e,{min:1,max:35})}],address_postcode:[function(e){return Object(l.validLength)(e,{min:1,max:20})},function(e){return Object(l.validPostCode)(e)}]},a={address_line_1:[Object(u.localize)("First line of address is required"),Object(u.localize)("First line of address is not in a proper format."),Object(u.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[Object(u.localize)("Second line of address is not in a proper format."),Object(u.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[Object(u.localize)("Town/City is required."),Object(u.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),Object(u.localize)("Town/City is not in a proper format.")],address_state:[Object(u.localize)("State/Province is required."),Object(u.localize)("State/Province is not in a proper format.")],address_postcode:[Object(u.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),Object(u.localize)("Only letters, numbers, space, and hyphen are allowed.")]},r={};return Object.entries(n).forEach((function(e){var n=me(e,2),o=n[0],c=n[1].findIndex((function(e){return!e(t[o])}));-1!==c&&(r[o]=a[o][c])})),r},e.handleCancel=function(t){e.props.onSave(e.props.index,t),e.props.onCancel()},e.onFileDrop=function(t,n,a,r){a("document_file",!0),r("document_file",t),e.setState({document_file:t,file_error_message:n})},e.proceed=function(){e.props.onSubmit(e.props.index,e.state)},e.onSubmit=function(){var t=de(regeneratorRuntime.mark((function t(n,a){var r,o,c,i,s,l,d,m,p,_,f,b,h,g,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.document_file,r=le(n,["document_file"]),a.setSubmitting(!0),t.next=4,N.a.setSettings(r);case 4:if(!(o=t.sent).error){t.next=9;break}return e.setState({form_error:o.error.message}),a.setSubmitting(!1),t.abrupt("return");case 9:return t.next=11,N.a.authorized.storage.getSettings();case 11:if(c=t.sent,i=c.error,s=c.get_settings,!i){t.next=17;break}return e.setState({form_error:i.message}),t.abrupt("return");case 17:return l=s.address_line_1,d=s.address_line_2,m=s.address_city,p=s.address_state,_=s.address_postcode,e.setState({address_line_1:l,address_line_2:d,address_city:m,address_postcode:_,address_state:p,form_error:""}),t.prev=19,t.next=22,e.file_uploader_ref.current.upload();case 22:if(!(f=t.sent).warning){t.next=27;break}return e.setState({form_error:f.warning}),a.setSubmitting(!1),t.abrupt("return");case 27:return t.next=29,N.a.authorized.storage.getAccountStatus();case 29:if(b=t.sent,h=b.error,g=b.get_account_status,!h){t.next=36;break}return e.setState({form_error:i.message}),a.setSubmitting(!1),t.abrupt("return");case 36:y=g.authentication.identity,!(y&&"none"===y.status)?e.proceed():(e.setState({form_error:Object(u.localize)("Identity confirmation failed. You will be redirected to the previous step.")}),setTimeout((function(){e.handleCancel(s)}),3e3)),t.next=44;break;case 41:t.prev=41,t.t0=t.catch(19),e.setState({form_error:t.t0.message});case 44:a.setSubmitting(!1),e.props.onSave(e.props.index,n),e.props.onSubmit(e.props.index,n,a.setSubmitting);case 47:case"end":return t.stop()}}),t,null,[[19,41]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleResubmit=function(){e.setState({resubmit_poa:!0})},e.setFileUploadRef=function(t){e.file_uploader_ref=t},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.is_mounted=!0,N.a.authorized.getAccountStatus().then((function(t){N.a.wait("states_list").then((function(){var n=t.get_account_status.authentication,a=n.document,r=n.identity,o=!(!r||"none"!==r.status);e.is_mounted&&(e.setState({poa_status:a.status,has_poi:o,is_loading:!1}),e.props.refreshNotifications())}))}))}},{key:"isFormDisabled",value:function(e,t){return(!this.state.poa_status||this.state.poa_status!==G.a.verified)&&0!==Object.keys(t).length}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.states_list,r=t.value,o=r.address_line_1,i=r.address_line_2,d=r.address_city,m=r.address_state,p=r.address_postcode,_=this.state,f=_.is_loading,b=_.resubmit_poa,h=_.submitted_poa,g=!f&&(b||this.state.poa_status===G.a.none);return c.createElement(a.c,{initialValues:{address_line_1:o,address_line_2:i,address_city:d,address_state:m,address_postcode:p,document_file:this.state.document_file},validateOnMount:!0,validate:this.validateForm,onSubmit:this.onSubmit,innerRef:ve},(function(t){var r=t.dirty,o=t.errors,i=t.handleSubmit,d=t.isSubmitting,m=t.handleBlur,p=t.setFieldTouched,_=t.setFieldValue,y=t.values,v=t.touched;return c.createElement(s.AutoHeightWrapper,{default_height:200},(function(t){var w=t.setRef,O=t.height;return c.createElement("form",{ref:w,onSubmit:i,className:"mt5-proof-of-address"},c.createElement(s.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:Object(l.isDesktop)()},f&&c.createElement(s.Loading,{is_fullscreen:!1,className:"account___intial-loader"}),g&&c.createElement(s.ThemedScrollbars,{autohide:!1,height:"".concat(O-77,"px"),is_bypassed:Object(l.isMobile)()},c.createElement("div",{className:"mt5-proof-of-address__field-area"},c.createElement(L.a,{subtitle:Object(u.localize)("(All fields are required)"),title:Object(u.localize)("Address information")}),c.createElement(ae,{name:"address_line_1",maxLength:255,required:!0,label:Object(u.localize)("First line of address*"),placeholder:Object(u.localize)("First line of address*"),onBlur:m}),c.createElement(ae,{name:"address_line_2",maxLength:255,label:Object(u.localize)("Second line of address (optional)"),optional:!0,placeholder:Object(u.localize)("Second line of address"),onBlur:m}),c.createElement("div",{className:"mt5-proof-of-address__inline-fields"},c.createElement(ae,{maxLength:255,name:"address_city",required:!0,label:Object(u.localize)("Town/City*"),placeholder:Object(u.localize)("Town/City*"),onBlur:m}),c.createElement("fieldset",{className:"address-state__fieldset"},(null==n?void 0:n.length)>0?c.createElement(c.Fragment,null,c.createElement(s.DesktopWrapper,null,c.createElement(a.a,{name:"address_state"},(function(e){var t=e.field;return c.createElement(s.Dropdown,{id:"address_state",required:!0,className:"address_state-dropdown",is_align_text_left:!0,list:n,error:v[t.name]&&o[t.name],name:"address_state",value:y.address_state,onChange:function(e){return _("address_state",e.target.value,!0)},placeholder:Object(u.localize)("State/Province*"),list_portal_id:"modal_root"})}))),c.createElement(s.MobileWrapper,null,c.createElement(s.SelectNative,{label:Object(u.localize)("State/Province*"),value:y.address_state,list_items:n,error:v.address_state&&o.address_state,onChange:function(e){return _("address_state",e.target.value,!0)},required:!0}))):c.createElement(ae,{name:"address_state",label:Object(u.localize)("State/Province*"),placeholder:Object(u.localize)("State/Province*"),required:!0,onBlur:m})),c.createElement(ae,{maxLength:255,name:"address_postcode",label:Object(u.localize)("Postal/ZIP code*"),placeholder:Object(u.localize)("Postal/ZIP code*"),onBlur:m})),c.createElement("div",{className:"mt5-proof-of-address__file-upload"},c.createElement(I.a,{onRef:function(t){return e.setFileUploadRef(t)},getSocket:N.a.getSocket,onFileDrop:function(t){var n=t.document_file,a=t.file_error_message;return e.onFileDrop(n,a,p,_)}})))),e.state.poa_status!==G.a.none&&!b&&c.createElement(s.ThemedScrollbars,{height:O,is_bypassed:Object(l.isMobile)()},h&&c.createElement(X.a,{is_description_disabled:!0,has_poi:e.state.has_poi}),e.state.poa_status===G.a.pending&&c.createElement(W.a,{is_description_disabled:!0}),e.state.poa_status===G.a.verified&&c.createElement(V.a,{is_description_disabled:!0,has_poi:e.state.has_poi}),e.state.poa_status===G.a.expired&&c.createElement(B.a,{onClick:e.handleResubmit}),(e.state.poa_status===G.a.rejected||e.state.poa_status===G.a.suspected)&&c.createElement(H.a,null)),c.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},(e.state.poa_status===G.a.verified||g)&&c.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:Object(u.localize)("Previous"),is_disabled:e.isFormDisabled(r,o)||e.state.document_file&&e.state.document_file.length<1||!!e.state.file_error_message,label:Object(u.localize)("Next"),is_absolute:Object(l.isMobile)(),is_loading:d,form_error:e.state.form_error,onCancel:function(){return e.handleCancel(y)}}))))}))}))}}])&&fe(t.prototype,n),r&&fe(t,r),i}(c.Component);we.propTypes={onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,storeProofOfAddress:o.a.func,value:o.a.object};var Oe=we,Ee=n("@deriv/account/dist/js/proof-of-identity-container"),je=n.n(Ee);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ae(e);if(t){var r=Ae(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(i,e);var t,n,r,o=Ne(i);function i(){var e;xe(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).state={poi_state:"none"},e.onStateChange=function(t){var n=t.status;return e.setState({poi_state:n})},e.validateForm=function(){var t={};return["pending","verified"].includes(e.state.poi_state)||(t.poi_state=!0),t},e}return t=i,(n=[{key:"render",value:function(){var e=this;return c.createElement(a.c,{initialValues:{poi_state:this.props.value.poi_state},validate:this.validateForm,onSubmit:function(t,n){return e.props.onSubmit(e.props.index,{poi_state:e.state.poi_state},n.setSubmitting)}},(function(t){var n=t.handleSubmit;return c.createElement(s.AutoHeightWrapper,{default_height:200},(function(t){var a=t.setRef,r=t.height;return c.createElement("form",{ref:a,className:"mt5-proof-of-identity",onSubmit:n},c.createElement("div",{className:"details-form"},c.createElement("input",{type:"hidden",name:"poi_state",value:e.state.poi_state,readOnly:!0}),c.createElement(s.Div100vhContainer,{className:"mt5-proof-of-identity__fields",height_offset:"180px",is_disabled:Object(l.isDesktop)()},c.createElement(je.a,ze({},e.props,{serviceToken:N.a.serviceToken,notificationEvent:N.a.notificationEvent,getAccountStatus:N.a.authorized.getAccountStatus,height:r,onStateChange:e.onStateChange,is_trading_button_enabled:!1,is_description_enabled:!1}))),c.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},c.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:Object(u.localize)("Previous"),is_disabled:!["pending","verified"].includes(e.state.poi_state),is_absolute:Object(l.isMobile)(),label:Object(u.localize)("Next"),onCancel:e.props.onCancel,form_error:e.props.form_error}))))}))}))}}])&&Me(t.prototype,n),r&&Me(t,r),i}(c.PureComponent);Te.propTypes={form_error:o.a.string,index:o.a.number,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,refreshNotifications:o.a.func,addNotificationByKey:o.a.func,removeNotificationMessage:o.a.func,value:o.a.object};var Ce=Te;function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Fe(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){Fe(o,a,r,c,i,"next",e)}function i(e){Fe(o,a,r,c,i,"throw",e)}c(void 0)}))}}function Ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ye(e);if(t){var r=Ye(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=0,Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(o,e);var t,n,a,r=qe(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).clearError=function(){t.setState({form_error:""})},t.nextStep=function(){t.clearError(),t.has_more_steps?t.goNext():t.finishWizard()},t.finishWizard=function(){t.props.openPendingDialog(),t.props.toggleModal()},t.prevStep=function(){t.setState({step:t.state.step-1,form_error:""})},t.updateValue=function(){var e=Be(regeneratorRuntime.mark((function e(n,a,r){var o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(c.length>3&&void 0!==c[3])||c[3])||He!==n){e.next=10;break}return e.next=4,N.a.setSettings(a);case 4:if(!(o=e.sent).error){e.next=9;break}return t.setState({form_error:o.error.message}),r(!1),e.abrupt("return");case 9:t.initiatePersonalDetails(r);case 10:t.saveFormData(n,a),t.nextStep(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),t.initiatePersonalDetails=function(){var e=Be(regeneratorRuntime.mark((function e(n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.authorized.storage.getSettings();case 2:if(!(a=e.sent).error){e.next=7;break}return t.setState({form_error:a.error.message}),"function"==typeof n&&n(!1),e.abrupt("return");case 7:r=Object.assign([],t.state.items),a.get_settings.citizen&&(r[He].form_value.citizen=t.transform(a.get_settings.citizen)),a.get_settings.tax_residence&&(r[He].form_value.tax_residence=t.transform(a.get_settings.tax_residence)),a.get_settings.tax_identification_number&&(r[He].form_value.tax_identification_number=a.get_settings.tax_identification_number),a.get_settings.account_opening_reason&&(r[He].form_value.account_opening_reason=a.get_settings.account_opening_reason),t.setState({items:r},t.props.refreshNotifications);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.transform=function(e){var n=Re(t.props.residence_list.filter((function(t){return t.value===e})),1)[0];return Object(l.getPropertyValue)(n,["text"])||e},t.goNext=function(){t.setState({step:t.state.step+1})},t.getCurrent=function(e){return e?t.state.items[t.state_index][e]:t.state.items[t.state_index]},t.saveFormData=function(e,n){var a=Object.assign([],t.state.items);a[e].form_value=n,t.state_index===He&&(a[He].form_value.citizen=t.transform(n.citizen),a[He].form_value.tax_residence=t.transform(n.tax_residence)),t.setState({items:a})},t.state={finished:void 0,step:0,form_error:"",is_loading:!1,items:[{header:{active_title:Object(u.localize)("Complete your personal details"),title:Object(u.localize)("Personal details")},body:ie,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:Object(u.localize)("Complete your proof of identity"),title:Object(u.localize)("Proof of identity")},body:Ce,form_value:{poi_state:"unknown"},props:["addNotificationByKey","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:Object(u.localize)("Complete your proof of address"),title:Object(u.localize)("Proof of address")},body:Oe,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.state_index===He&&(this.setState({is_loading:!0}),this.initiatePersonalDetails().then((function(){e.setState({is_loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.getCurrent("body"),n=this.getCurrent("form_value"),a=(this.getCurrent("props")||[]).reduce((function(t,n){return Object.assign(t,(a={},r=n,o=e.props[n],r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a));var a,r,o}),{}),r=this.getCurrent("height")||"auto";return c.createElement(s.Div100vhContainer,{className:"mt5-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:Object(l.isDesktop)(),height_offset:"40px"},c.createElement("div",{className:"mt5-financial-stp-modal__heading"},this.getCurrent()&&c.createElement(c.Fragment,null,c.createElement(s.DesktopWrapper,null,c.createElement(s.FormProgress,{steps:this.state.items,current_step:this.state.step})),c.createElement(s.MobileWrapper,null,c.createElement("div",{className:"mt5-financial-stp-modal__header-steps"},c.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-title"},c.createElement(u.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:this.state.step+1,steps:this.state.items.length,step_title:this.state.items[this.state.step].header.title}})),this.state.items[this.state.step].header.active_title&&c.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-subtitle"},this.state.items[this.state.step].header.active_title))))),c.createElement("div",{className:"mt5-financial-stp-modal__body"},c.createElement(t,Ie({value:n,index:this.state_index,onSubmit:this.updateValue,height:r,is_loading:this.state.is_loading,onCancel:this.prevStep,onSave:this.saveFormData,form_error:this.state.form_error},a))))}},{key:"state_index",get:function(){return this.state.step}},{key:"has_more_steps",get:function(){return this.state.step+1<this.state.items.length}}])&&Ue(t.prototype,n),a&&Ue(t,a),o}(c.Component);Ke.propTypes={openPendingDialog:o.a.func,toggleModal:o.a.func};var Xe=Object(f.b)((function(e){var t=e.client,n=e.modules.mt5,a=e.ui;return{addNotificationByKey:a.addNotificationMessageByKey,get_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:n.openPendingDialog,refreshNotifications:t.refreshNotifications,removeNotificationMessage:a.removeNotificationMessage,removeNotificationByKey:a.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:n.storeProofOfAddress}}))(Ke);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=tt(e);if(t){var r=tt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return et(this,n)}}function et(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(o,e);var t,n,a,r=Qe(o);function o(){return Ge(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.disableApp,n=e.enableApp,a=e.is_mt5_financial_stp_modal_open,r=e.disableMt5FinancialStpModal;return c.createElement(c.Fragment,null,c.createElement(s.DesktopWrapper,null,c.createElement(s.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:Object(u.localize)("Create a DMT5 real Financial STP account"),enableApp:n,is_open:a,has_close_icon:!0,height:"740px",toggleModal:r},c.createElement(Xe,{toggleModal:r}))),c.createElement(s.MobileWrapper,null,c.createElement(s.MobileDialog,{portal_element_id:"modal_root",title:Object(u.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:a,onClose:r},c.createElement(Xe,{toggleModal:r}))))}}])&&Ze(t.prototype,n),a&&Ze(t,a),o}(c.Component),at=Object(f.b)((function(e){var t=e.ui,n=e.modules;return{disableApp:t.disableApp,enableApp:t.enableApp,disableMt5FinancialStpModal:n.mt5.disableMt5FinancialStpModal,is_mt5_financial_stp_modal_open:n.mt5.is_mt5_financial_stp_modal_open}}))(nt);function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var lt=function(e){var t=e.is_visible,n=e.toggleModal,a=e.message;return c.createElement(s.Modal,{is_open:t,small:!0,toggleModal:n},c.createElement(s.Modal.Body,null,a),c.createElement(s.Modal.Footer,null,c.createElement(s.Button,{has_effect:!0,text:Object(u.localize)("OK"),onClick:n,primary:!0})))},ut=function(e){var t=e.name,n=e.tooltip,a=e.counter,r=it(c.useState(!1),2),o=r[0],i=r[1],l=function(){return i(!o)};return n?c.createElement(c.Fragment,null,c.createElement("p",{className:"mt5-attribute-describer",onClick:l},t,c.createElement(s.MobileWrapper,null,c.createElement("span",{className:"counter"},a))),c.createElement(s.DesktopWrapper,null,c.createElement(s.Popover,{alignment:"right",icon:"counter",counter:a,message:n,zIndex:9998})),c.createElement(s.MobileWrapper,null,c.createElement(lt,{toggleModal:l,is_visible:o,message:n}))):c.createElement("p",{className:"mt5-attribute-describer"},t)},dt=function(e){var t=e.landing_companies,n=e.is_eu,a=e.is_eu_country,r=e.is_logged_in,o=r&&n||!r&&a;return function(e,t,n){return t.map((function(t){var a,r,o,c=t.attribute,i=t.synthetic,s=t.financial_stp,l=t.financial;return n?ot(ot(ot({attribute:c},(null==e||null===(a=e.mt_gaming_company)||void 0===a?void 0:a.financial)?{synthetic:i}:{}),(null==e||null===(r=e.mt_financial_company)||void 0===r?void 0:r.financial)?{financial:l}:{}),(null==e||null===(o=e.mt_financial_company)||void 0===o?void 0:o.financial_stp)?{financial_stp:s}:{}):ot(ot(ot({attribute:c},{synthetic:i}),{financial:l}),{financial_stp:s})}))}(t,[{attribute:c.createElement(ut,{name:Object(u.localize)("Account currency")}),synthetic:o?Object(u.localize)("EUR"):Object(u.localize)("USD"),financial:o?Object(u.localize)("EUR/GBP"):Object(u.localize)("USD"),financial_stp:Object(u.localize)("USD")},{attribute:c.createElement(ut,{name:Object(u.localize)("Maximum leverage")}),synthetic:Object(u.localize)("Up to 1:1000"),financial:o?Object(u.localize)("Up to 1:30"):Object(u.localize)("Up to 1:1000"),financial_stp:Object(u.localize)("Up to 1:100")},{attribute:c.createElement(ut,{name:Object(u.localize)("Order execution")}),synthetic:Object(u.localize)("Market"),financial:Object(u.localize)("Market"),financial_stp:Object(u.localize)("Market")},{attribute:c.createElement(ut,{name:Object(u.localize)("Spread")}),synthetic:Object(u.localize)("Fixed/Variable"),financial:Object(u.localize)("Variable"),financial_stp:Object(u.localize)("Variable")},{attribute:c.createElement(ut,{name:Object(u.localize)("Commission")}),synthetic:Object(u.localize)("No"),financial:Object(u.localize)("No"),financial_stp:Object(u.localize)("No")},{attribute:c.createElement(ut,{name:Object(u.localize)("Minimum deposit")}),synthetic:Object(u.localize)("No"),financial:Object(u.localize)("No"),financial_stp:Object(u.localize)("No")},{attribute:c.createElement(ut,{name:Object(u.localize)("Margin call")}),synthetic:Object(u.localize)("100%"),financial:o?Object(u.localize)("100%"):Object(u.localize)("150%"),financial_stp:Object(u.localize)("150%")},{attribute:c.createElement(ut,{name:Object(u.localize)("Stop out level")}),synthetic:Object(u.localize)("50%"),financial:o?Object(u.localize)("50%"):Object(u.localize)("75%"),financial_stp:Object(u.localize)("75%")},{attribute:c.createElement(ut,{name:Object(u.localize)("Number of assets")}),synthetic:Object(u.localize)("10+"),financial:Object(u.localize)("50+"),financial_stp:Object(u.localize)("50+")},{attribute:c.createElement(ut,{name:Object(u.localize)("Cryptocurrency trading")}),synthetic:Object(u.localize)("N/A"),financial:Object(u.localize)("24/7"),financial_stp:Object(u.localize)("24/7")},{attribute:c.createElement(ut,{name:Object(u.localize)("Trading instruments")}),synthetic:Object(u.localize)("Synthetics"),financial:o?Object(u.localize)("FX-majors (standard), FX-minors, Commodities, Cryptocurrencies"):Object(u.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_stp:Object(u.localize)("FX-majors, FX-minors, FX-exotics, Cryptocurrencies")}],r)},mt=function(){return c.createElement("div",{className:"mt5-compare-account--hint"},c.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},c.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--circle"}),c.createElement(u.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),c.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},c.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--star mt5-compare-accounts__star"},"*"),c.createElement(u.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your MT5 account to support your positions at all times."})))},pt=function(e){var t,n,a,r=e.is_eu,o=e.landing_companies,i=e.is_eu_country,d=e.is_logged_in,m=it(c.useState([]),2),p=m[0],_=m[1],f=it(c.useState("1.5fr 1fr 2fr 1fr"),2),b=f[0],h=f[1];return c.useEffect((function(){var e,t,n;(_(dt({landing_companies:o,is_eu:r,is_eu_country:i,is_logged_in:d})),d)&&h("1.5fr ".concat((null==o||null===(e=o.mt_gaming_company)||void 0===e?void 0:e.financial)?"1fr":""," ").concat((null==o||null===(t=o.mt_financial_company)||void 0===t?void 0:t.financial)?"2fr":""," ").concat((null==o||null===(n=o.mt_financial_company)||void 0===n?void 0:n.financial_stp)?" 1fr ":""))}),[o.mt_financial_company,o.mt_gaming_company,r,d,i,o]),c.createElement("div",{className:"mt5-compare-accounts",style:{"--mt5-compare-accounts-template-columns":b}},c.createElement(s.Table,{fixed:!0,scroll_height:Object(l.isMobile)()?"100%":"calc(100% - 130px)"},c.createElement(s.Table.Header,null,c.createElement(s.Table.Row,{className:"mt5-compare-accounts__table-row"},c.createElement(s.Table.Head,{fixed:!0}),d?c.createElement(c.Fragment,null,(null==o||null===(t=o.mt_gaming_company)||void 0===t?void 0:t.financial)&&c.createElement(s.Table.Head,null,Object(u.localize)("Synthetic")),(null==o||null===(n=o.mt_financial_company)||void 0===n?void 0:n.financial)&&c.createElement(s.Table.Head,null,Object(u.localize)("Financial"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*")),(null==o||null===(a=o.mt_financial_company)||void 0===a?void 0:a.financial_stp)&&c.createElement(s.Table.Head,null,Object(u.localize)("Financial STP"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*"))):c.createElement(c.Fragment,null,c.createElement(s.Table.Head,null,Object(u.localize)("Synthetic")),c.createElement(s.Table.Head,null,Object(u.localize)("Financial"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*")),c.createElement(s.Table.Head,null,Object(u.localize)("Financial STP"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*"))))),c.createElement(s.Table.Body,null,p.map((function(e,t){return c.createElement(s.Table.Row,{key:t,className:"mt5-compare-accounts__table-row"},Object.keys(e).map((function(t,n){return c.createElement(s.Table.Cell,{key:n,fixed:0===n},e[t])})))})))),c.createElement(s.DesktopWrapper,null,c.createElement(mt,null)))},_t=Object(f.b)((function(e){var t=e.modules,n=e.ui,a=e.client;return{disableApp:n.disableApp,enableApp:n.enableApp,is_compare_accounts_visible:t.mt5.is_compare_accounts_visible,is_loading:a.is_populating_mt5_account_list,is_eu:a.is_eu,is_eu_country:a.is_eu_country,is_logged_in:a.is_logged_in,landing_companies:a.landing_companies,toggleCompareAccounts:t.mt5.toggleCompareAccountsModal}}))((function(e){var t=e.disableApp,n=e.enableApp,a=e.is_compare_accounts_visible,r=e.landing_companies,o=e.is_loading,i=e.is_logged_in,l=e.is_eu,d=e.is_eu_country,m=e.toggleCompareAccounts;return c.createElement("div",{className:"mt5-compare-accounts-modal__wrapper"},c.createElement(s.Button,{className:"mt5-dashboard__welcome-message--button",has_effect:!0,text:Object(u.localize)("Compare accounts"),onClick:m,secondary:!0,disabled:o}),c.createElement(c.Suspense,{fallback:c.createElement(s.UILoader,null)},c.createElement(s.DesktopWrapper,null,c.createElement(s.Modal,{className:"mt5-dashboard__compare-accounts",disableApp:t,enableApp:n,is_open:a,title:Object(u.localize)("Compare accounts"),toggleModal:m,type:"button",height:"696px",width:"903px"},c.createElement(pt,{is_logged_in:i,is_eu:l,is_eu_country:d,landing_companies:r}))),c.createElement(s.MobileWrapper,null,c.createElement(s.MobileDialog,{portal_element_id:"deriv_app",title:Object(u.localize)("Compare accounts"),wrapper_classname:"mt5-dashboard__compare-accounts",visible:a,onClose:m,footer:c.createElement(mt,null)},c.createElement(pt,{is_logged_in:i,is_eu:l,is_eu_country:d,landing_companies:r})))))})),ft=function(e){return e?"Deriv-Demo":"Deriv-Server"},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||Object(l.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return ht({category:"real"})}},ht=function(e){var t=e.category,n=e.loginid,a="demo"===t?"Deriv-Demo":"Deriv-Server",r=null!=n?n:"";return"https://trade.mql5.com/trade?servers=".concat(a,"&trade_server=").concat(a).concat(r&&"&login=".concat(r))},gt=function(){return c.createElement("div",{className:"mt5-dashboard__download-center"},c.createElement("h1",{className:"mt5-dashboard__download-center--heading"},c.createElement(u.Localize,{i18n_default_text:"Run MT5 from your browser or download the MT5 app for your devices"})),c.createElement("div",{className:"mt5-dashboard__download-center-options"},c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop"},c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-devices"},c.createElement(s.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),c.createElement(s.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51}),c.createElement("a",{href:ht({category:"demo"}),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationWebDemo",width:138,height:40}))),c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-links"},c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link",href:bt("windows"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationWindows",width:138,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link",href:bt("linux"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationLinux",width:138,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link--top",href:ht({category:"real"}),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationWebReal",width:138,height:40}))),c.createElement("p",{className:"mt5-dashboard__download-center--hint"},c.createElement(u.Localize,{i18n_default_text:"The MT5 desktop app is not supported by macOS, Windows XP, Windows 2003, and Windows Vista."}))),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},c.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),c.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},c.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:bt("android"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:bt("ios"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))},yt=n("./Stores/Modules/MT5/mt5-store.js");function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=kt(e);if(t){var r=kt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ct=function(e){var t=e.count_from,n=void 0===t?60:t,a=e.onTimeout,r=At(c.useState(n),2),o=r[0],i=r[1];return c.useEffect((function(){if(0!==o){var e=setTimeout((function(){i(o-1)}),1e3);return function(){return clearTimeout(e)}}return a(),function(){}}),[o]),c.createElement("span",{className:"countdown"},o)},Dt=function(e){var t=e.sendVerifyEmail,n=e.password_type,a=e.account_type,r=e.account_group,o=At(c.useState(!1),2),i=o[0],l=o[1],d=At(c.useState(!1),2),m=d[0],p=d[1];c.useEffect((function(){localStorage.setItem("mt5_reset_password_intent",[r,a].join(".")),localStorage.setItem("mt5_reset_password_type",n),t()}),[]);return c.createElement("div",{className:"mt5-verification-email-sent"},c.createElement(s.Icon,{icon:"IcEmailSent",size:128}),c.createElement("h2",{className:"mt5-verification-email-sent__title"},c.createElement(u.Localize,{i18n_default_text:"We've sent you an email"})),c.createElement("p",{className:"mt5-verification-email-sent__description"},c.createElement(u.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!i&&c.createElement(s.Button,{className:"mt5-verification-email-sent__resend-button",primary:!0,onClick:function(){l(!0)}},c.createElement(u.Localize,{i18n_default_text:"Didn't receive the email?"})),i&&c.createElement(c.Fragment,null,c.createElement("p",{className:"mt5-verification-email-sent__title mt5-verification-email-sent__title--sub"},c.createElement(u.Localize,{i18n_default_text:"Didn't receive the email?"})),c.createElement("p",{className:"mt5-verification-email-sent__description"},c.createElement(u.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),c.createElement(s.Button,{className:"mt5-verification-email-sent__resend-button",large:!0,primary:!0,disabled:m,onClick:function(){t(),p(!0)}},!m&&c.createElement(u.Localize,{i18n_default_text:"Resend email"}),m&&c.createElement(c.Fragment,null,c.createElement(u.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[c.createElement(Ct,{key:0,onTimeout:function(){return p(!1)},count_from:60})]})))))},It=function(e){var t=e.toggleModal,n=e.is_investor;return c.createElement("div",{className:"mt5-password-manager__success"},c.createElement(s.Icon,{icon:"IcPasswordUpdated",size:128}),c.createElement("h1",{className:"mt5-password-manager__success-header"},c.createElement(u.Localize,{i18n_default_text:"Password changed"})),c.createElement("p",{className:"mt5-password-manager__success-paragraph"},n?c.createElement(u.Localize,{i18n_default_text:"Your investor password has been changed."}):c.createElement(u.Localize,{i18n_default_text:"Your password has been changed."})),c.createElement(s.Button,{onClick:t,className:"mt5-password-manager__success-btn",primary:!0,large:!0},c.createElement("p",{className:"dc-btn__text"},Object(u.localize)("OK"))))},Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(i,e);var t,n,r,o=Pt(i);function i(){var e;zt(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).multi_step_ref=c.createRef(),e.state={active_tab_index:0,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1},e.showError=function(t,n){e.setState(St({},"error_message_".concat(t),n))},e.hideError=function(t){var n;e.setState((St(n={},"error_message_".concat(t),""),St(n,"is_submit_success_".concat(t),!0),n))},e.updateAccountTabIndex=function(t){e.setState({active_tab_index:t,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1})},e}return t=i,(n=[{key:"componentDidUpdate",value:function(e){!e.is_visible&&this.props.is_visible&&this.setState({active_tab_index:0,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.enableApp,r=t.email,o=t.disableApp,i=t.is_visible,d=t.selected_login,m=t.selected_account,p=t.toggleModal,_=t.selected_account_type,f=t.selected_account_group,b=function(e){var t={};return Object(l.validLength)(e.new_password,{min:8,max:25})?Object(l.validPassword)(e.new_password)?e.new_password.toLowerCase()===r.toLowerCase()&&(t.new_password=Object(u.localize)("Your password cannot be the same as your email address.")):t.new_password=Object(l.getErrorMessages)().password():t.new_password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=Object(u.localize)("This field is required")),t},h=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,yt.a.changePassword(Et({login:a},n));case 5:(r=t.sent)?e.showError(n.password_type,r):e.hideError(n.password_type);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(e){jt(o,a,r,c,i,"next",e)}function i(e){jt(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}(),g=function(){return e.state.is_submit_success_main?c.createElement(It,{toggleModal:p}):c.createElement(a.c,{initialValues:{old_password:"",new_password:"",password_type:"main"},validate:b,onSubmit:h},(function(t){var n=t.isSubmitting,r=t.errors,o=t.setFieldTouched,i=t.values,d=t.touched;return c.createElement(a.b,{className:"mt5-password-manager__main-form",noValidate:!0},e.state.error_message_main&&c.createElement("p",{className:"mt5-password-manager--error-message"},e.state.error_message_main),c.createElement(a.a,{name:"old_password"},(function(e){var t=e.field;return c.createElement(s.PasswordInput,wt({},t,{label:Object(u.localize)("Current password"),error:d.old_password&&r.old_password,required:!0}))})),c.createElement(a.a,{name:"new_password"},(function(e){var t=e.field;return c.createElement(s.PasswordMeter,{input:t.value,has_error:!(!d.new_password||!r.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return c.createElement(s.PasswordInput,wt({},t,{autoComplete:"password",label:Object(u.localize)("New password"),hint:!n&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:d.new_password&&r.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),c.createElement("div",{className:"mt5-password-manager__actions"},c.createElement(s.Button,{className:"mt5-password-manager--button",is_disabled:n||!i.old_password||!i.new_password||Object.keys(r).length>0,is_loading:n,text:Object(u.localize)("Change password"),primary:!0,large:!0}),c.createElement(s.Button,{className:"mt5-password-manager--button",type:"button",onClick:function(){e.setState({password_type:"main"},(function(){var t;return null===(t=e.multi_step_ref.current)||void 0===t?void 0:t.nextStep()}))},text:Object(u.localize)("Reset main password"),tertiary:!0,large:!0})))}))},y=function(){return e.state.is_submit_success_investor?c.createElement(It,{toggleModal:p,is_investor:!0}):c.createElement("div",{className:"mt5-password-manager__investor-wrapper"},c.createElement("p",{className:"mt5-password-manager--paragraph"},c.createElement(u.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),c.createElement("p",{className:"mt5-password-manager--paragraph"},c.createElement(u.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),e.state.error_message_investor&&c.createElement("p",{className:"mt5-password-manager--error-message"},e.state.error_message_investor),c.createElement(a.c,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:b,onSubmit:h},(function(t){var n=t.isSubmitting,r=t.errors,o=t.setFieldTouched,i=t.values,d=t.touched;return c.createElement(a.b,{className:"mt5-password-manager__investor-form",noValidate:!0},c.createElement(a.a,{name:"old_password"},(function(e){var t=e.field;return c.createElement(s.PasswordInput,wt({},t,{label:Object(u.localize)("Current investor password"),error:d.old_password&&r.old_password,required:!0}))})),c.createElement(a.a,{name:"new_password"},(function(e){var t=e.field;return c.createElement(s.PasswordMeter,{input:t.value,has_error:!(!d.new_password||!r.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return c.createElement(s.PasswordInput,wt({},t,{autoComplete:"password",label:Object(u.localize)("New investor password"),hint:!n&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:d.new_password&&r.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),c.createElement("div",{className:"mt5-password-manager__actions"},c.createElement(s.Button,{className:"mt5-password-manager--button",is_disabled:n||!i.old_password||!i.new_password||Object.keys(r).length>0,is_loading:n,text:Object(u.localize)("Change investor password"),primary:!0,large:!0}),c.createElement(s.Button,{className:"mt5-password-manager--button",type:"button",onClick:function(){e.setState({password_type:"investor"},(function(){var t;return null===(t=e.multi_step_ref.current)||void 0===t?void 0:t.nextStep()}))},text:Object(u.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))},v=function(){return c.createElement(c.Fragment,null,c.createElement(s.Tabs,{active_index:e.state.active_tab_index,onTabItemClick:e.updateAccountTabIndex,top:!0},c.createElement("div",{label:Object(u.localize)("Main password")},c.createElement(s.DesktopWrapper,null,c.createElement(s.ThemedScrollbars,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",is_bypassed:Object(l.isMobile)(),autohide:!1},c.createElement(g,null))),c.createElement(s.MobileWrapper,null,c.createElement(s.Div100vhContainer,{className:"mt5-password-manager__scroll-wrapper",height_offset:"120px"},c.createElement(g,null)))),c.createElement("div",{label:Object(u.localize)("Investor password")},c.createElement(s.DesktopWrapper,null,c.createElement(s.ThemedScrollbars,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)"},c.createElement(y,null))),c.createElement(s.MobileWrapper,null,c.createElement(s.Div100vhContainer,{className:"mt5-password-manager__scroll-wrapper",height_offset:"120px"},c.createElement(y,null))))))},w=[{component:c.createElement(v,null)},{component:c.createElement(Dt,{sendVerifyEmail:this.props.sendVerifyEmail,password_type:this.state.password_type,account_type:_,account_group:f})}],O=function(){return c.createElement(s.MultiStep,{ref:e.multi_step_ref,steps:w,className:"mt5-password-manager",lbl_previous:Object(u.localize)("Back")})};return c.createElement(c.Suspense,{fallback:c.createElement(s.UILoader,null)},c.createElement(s.DesktopWrapper,null,c.createElement(s.Modal,{className:"mt5-password-manager__modal",disableApp:o,enableApp:n,is_open:i,title:"real"===f?Object(u.localize)("Manage DMT5 Real {{account_title}} account password",{account_title:m}):Object(u.localize)("Manage DMT5 Demo {{account_title}} account password",{account_title:m}),toggleModal:p,height:"688px",width:"904px"},c.createElement(O,null))),c.createElement(s.MobileWrapper,null,c.createElement(s.PageOverlay,{is_open:i,portal_id:"deriv_app",header:Object(u.localize)("Manage password"),onClickClose:p},c.createElement(O,null))))}}])&&xt(t.prototype,n),r&&xt(t,r),i}(c.Component);Rt.propTypes={email:o.a.string,is_visible:o.a.bool,selected_account:o.a.string,selected_login:o.a.string,toggleModal:o.a.func};var Lt=Object(f.b)((function(e){var t=e.modules.mt5,n=e.client,a=e.ui;return{email:n.email,enableApp:a.enableApp,disableApp:a.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(Rt);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Yt(e);if(t){var r=Yt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Vt(this,n)}}function Vt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ht="USD",Kt=1e3,Xt=1e4,$t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(o,e);var t,n,a,r=qt(o);function o(){var e;Bt(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).accountTitle=function(){return e.props.mt5_companies&&e.props.current_account?e.props.mt5_companies[e.props.current_account.category][e.props.current_account.type].title:""},e.closeSuccess=function(){e.props.closeSuccessTopUpModal()},e}return t=o,(n=[{key:"render",value:function(){if(!this.props.mt5_companies||!this.props.current_account)return null;var e=this.accountTitle(),t=Ht,n=Kt,a=Xt;return c.createElement(c.Fragment,null,c.createElement(s.Modal,{toggleModal:this.props.closeTopUpModal,is_open:this.props.is_top_up_virtual_open,className:"top-up-virtual",title:Object(u.localize)("Fund top up"),width:"384px"},c.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},c.createElement("p",{className:"dc-modal__container_top-up-virtual__description"},c.createElement(u.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[c.createElement(s.Money,{key:0,amount:a,currency:t,show_currency:!0}),c.createElement(s.Money,{key:1,amount:n,currency:t,show_currency:!0})]})),c.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},c.createElement(u.Localize,{i18n_default_text:"DMT5 {{ account_title }} account",values:{account_title:e}})),c.createElement("div",null,c.createElement("p",{className:"dc-modal__container_top-up-virtual--balance-descriptor"},c.createElement(u.Localize,{i18n_default_text:"Current balance"})),c.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},c.createElement(s.Money,{amount:this.props.current_account.display_balance,currency:this.props.current_account.currency}))),c.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},c.createElement(s.Button,{is_disabled:this.props.current_account.balance>1e3,type:"button",onClick:this.props.topUpVirtual,primary:!0,large:!0},c.createElement(u.Localize,{i18n_default_text:"Top up Â <0></0>",components:[c.createElement(s.Money,{key:0,amount:a,currency:t,show_currency:!0})]}))))),c.createElement(_,{is_open:this.props.is_top_up_virtual_success,toggleModal:this.closeSuccess,has_close_icon:!0,title:Object(u.localize)("Fund top up"),icon:c.createElement(s.Icon,{icon:"IcCashierWallet",size:128}),heading:c.createElement("h3",{className:"mt5-success-topup__heading"},c.createElement(u.Localize,{i18n_default_text:"<0></0> has been credited into your DMT5 {{title}} account.",values:{title:e},components:[c.createElement(s.Money,{key:0,amount:a,currency:t,show_currency:!0})]})),message:c.createElement("div",{className:"mt5-success-topup__description"},c.createElement("p",null,c.createElement(u.Localize,{i18n_default_text:"New current balance"})),c.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},c.createElement(s.Money,{amount:this.props.current_account.balance,currency:this.props.current_account.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}}])&&Ut(t.prototype,n),a&&Ut(t,a),o}(c.Component);$t.propTypes={account_title:o.a.string,closeSuccessTopUpModal:o.a.func,closeTopUpVirtual:o.a.func,currency:o.a.string,display_balance:o.a.string,is_top_up_virtual_open:o.a.bool,is_top_up_virtual_success:o.a.bool,topUpVirtual:o.a.func};var Gt=Object(f.b)((function(e){var t=e.ui,n=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:n.mt5.current_account,mt5_companies:n.mt5.mt5_companies,topUpVirtual:n.mt5.topUpVirtual}}))($t),Zt=n("react-router-dom"),Jt=n("./Stores/Modules/MT5/Helpers/mt5-config.js");function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=on(e);if(t){var r=on(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return rn(this,n)}}function rn(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function dn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var mn=function(e){var t,n,a,r,o=e.current_list,c=e.children,i=dn(e,["current_list","children"]),s=localStorage.getItem("mt5_reset_password_intent"),l=localStorage.getItem("mt5_reset_password_type")||"main";if(s&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(s)&&o){var u=ln(s.split("."),2);t=u[0],n=u[1],a=o["".concat(t,".").concat(n)].login,r=Object(Jt.c)()[t][n].title}else if(o){var d=ln(Object.keys(o).pop().split("."),2);t=d[0],n=d[1],a=o["".concat(t,".").concat(n)].login,r=Object(Jt.c)()[t][n].title}else a="",r="";return c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({login:a,title:r,type:l},i))},pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(i,e);var t,n,r,o=an(i);function i(){var e;en(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).state={has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""},e.renderErrorBox=function(t){e.setState({has_error:!0,error_message:t.message})},e.clearAddressBar=function(){localStorage.removeItem("mt5_reset_password_intent"),localStorage.removeItem("mt5_reset_password_type"),e.props.history.push("".concat(l.routes.mt5))},e.validatePassword=function(t){var n={};return Object(l.validLength)(t.new_password,{min:8,max:25})?Object(l.validPassword)(t.new_password)||(n.new_password=Object(l.getErrorMessages)().password()):n.new_password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t.new_password.toLowerCase()===e.props.email.toLowerCase()&&(n.new_password=Object(u.localize)("Your password cannot be the same as your email address.")),n},e.resetPassword=function(t,n,a,r){var o=r.setSubmitting,c=new URLSearchParams(window.location.search);o(!0);var i={login:a,password_type:n,new_password:t.new_password,verification_code:c.get("code")};N.a.mt5PasswordReset(i).then((function(t){t.error&&"InvalidToken"===t.error.code?e.renderErrorBox(t.error):(e.setState({is_finished:!0,changed_password_type:n}),e.clearAddressBar()),o(!1)}))},e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.is_mt5_reset_password_modal_enabled,r=t.setMt5PasswordResetModal,o=t.current_list;return c.createElement(s.Modal,{className:"mt5-reset-password-modal",is_open:n,toggleModal:function(){return r(!1)},title:Object(u.localize)("Reset DMT5 password")},!this.is_list_fetched&&!this.state.has_error&&c.createElement(s.Loading,{is_fullscreen:!1}),this.is_list_fetched&&!this.state.has_error&&!this.state.is_finished&&c.createElement(mn,{current_list:o},(function(t){var n=t.title,r=t.type,o=t.login;return c.createElement(a.c,{initialValues:{new_password:""},validate:e.validatePassword,onSubmit:function(t,n){return e.resetPassword(t,r,o,n)}},(function(e){var t=e.handleSubmit,a=e.errors,o=e.values,i=e.isSubmitting,d=e.handleChange,m=e.handleBlur,p=e.touched;return c.createElement("form",{autoComplete:"off",onSubmit:t},c.createElement("div",{className:"mt5-reset-password"},c.createElement("div",{className:"mt5-reset-password__container"},c.createElement("h2",{className:"mt5-reset-password__heading"},c.createElement(u.Localize,{i18n_default_text:"Reset DMT5 {{title}} password",values:{title:n}})),c.createElement("div",{className:"mt5-reset-password__password-area"},c.createElement(s.PasswordMeter,{input:o.new_password,has_error:!(!p.new_password||!a.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var t=e.has_warning;return c.createElement(s.PasswordInput,{className:"mt5-reset-password__password-field",name:"new_password",label:Object(u.localize)("New {{type}} password",{type:r}),onChange:d,onBlur:m,error:p.new_password&&a.new_password,value:o.new_password,"data-lpignore":"true",required:!0,hint:!t&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers.")})}))),i&&c.createElement(s.Loading,{is_fullscreen:!1}),!i&&c.createElement(s.FormSubmitButton,{is_disabled:i||!o.new_password||Object.keys(a).length>0,errors:a,is_center:!0,large:!0,label:Object(u.localize)("Create {{type}} password",{type:r})}))))}))})),this.state.has_error&&c.createElement("div",{className:"mt5-reset-password__error"},c.createElement(s.Icon,{icon:"IcMt5Expired",size:128}),c.createElement("p",{className:"mt5-reset-password__heading"},this.state.error_message),c.createElement("p",{className:"mt5-reset-password__description mt5-reset-password__description--is-centered"},c.createElement(u.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),c.createElement(s.Button,{primary:!0,large:!0,onClick:function(){e.clearAddressBar(),r(!1)}},c.createElement(u.Localize,{i18n_default_text:"Ok"}))),this.state.is_finished&&c.createElement("div",{className:"mt5-reset-password__success"},c.createElement(s.Icon,{icon:"IcMt5PasswordUpdated",size:128}),c.createElement("div",{className:"mt5-reset-password__heading"},c.createElement(u.Localize,{i18n_default_text:"Password saved"})),c.createElement("div",{className:"mt5-reset-password__description"},c.createElement(u.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===this.state.changed_password_type?Object(u.localize)("main"):Object(u.localize)("investor")}})),c.createElement(s.Button,{primary:!0,large:!0,onClick:function(){return r(!1)}},c.createElement(u.Localize,{i18n_default_text:"Ok"}))))}},{key:"is_list_fetched",get:function(){return 0!==Object.keys(this.props.current_list).length}}])&&tn(t.prototype,n),r&&tn(t,r),i}(c.Component);pn.propTypes={email:r.string,is_mt5_reset_password_modal_enabled:r.any,setMt5PasswordResetModal:r.any,current_list:r.any};var _n,fn,bn,hn,gn=Object(Zt.withRouter)(Object(f.b)((function(e){var t=e.modules.mt5;return{email:e.client.email,is_mt5_reset_password_modal_enabled:t.is_mt5_reset_password_modal_enabled,setMt5PasswordResetModal:t.setMt5PasswordResetModal,current_list:t.current_list}}))(pn)),yn=Object(f.b)((function(e){var t=e.ui,n=e.modules.mt5;return{enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:n.closeMT5PendingDialog,is_mt5_pending_dialog_open:n.is_mt5_pending_dialog_open}}))((function(e){var t=e.enableApp,n=e.disableApp,a=e.toggleModal,r=e.is_mt5_pending_dialog_open;return c.createElement(s.Modal,{title:Object(u.localize)("Thanks for submitting your documents!"),className:"mt5-pending-dialog",is_open:r,disableApp:n,enableApp:t,toggleModal:a,has_close_icon:!1,small:!0},c.createElement(s.Modal.Body,null,c.createElement(u.Localize,{i18n_default_text:"Weâ€™ll process your documents within 1-3 days. Once they are verified, weâ€™ll notify you via email."})),c.createElement(s.Modal.Footer,null,c.createElement(s.Button,{has_effect:!0,text:Object(u.localize)("OK"),onClick:a,primary:!0})))})),vn=function(e){var t=e.display_name,n=e.label,a=e.success_msg,r=e.info_msg,o=e.text_copy;return c.createElement("div",{className:"mt5-dashboard__info-copy"},c.createElement("div",{className:"mt5-dashboard__info-display"},c.createElement("span",{className:"mt5-dashboard__info-label"},n,":"),t),c.createElement(s.Clipboard,{text_copy:o,info_message:r,success_message:a}))};function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=(wn(_n={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),wn(_n,Object(u.localize)("Margin call"),Object(u.localize)("100%")),wn(_n,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),wn(_n,Object(u.localize)("Number of assets"),Object(u.localize)("10+")),_n),En=(wn(fn={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),wn(fn,Object(u.localize)("Margin call"),Object(u.localize)("150%")),wn(fn,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),wn(fn,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),fn),jn=(wn(bn={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:30")),wn(bn,Object(u.localize)("Margin call"),Object(u.localize)("100%")),wn(bn,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),wn(bn,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),bn),Sn=(wn(hn={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:100")),wn(hn,Object(u.localize)("Margin call"),Object(u.localize)("150%")),wn(hn,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),wn(hn,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),hn);function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pn(e,t){return(Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=An(e);if(t){var r=An(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return kn(this,n)}}function kn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(o,e);var t,n,a,r=Nn(o);function o(){return xn(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return c.createElement(s.Clipboard,{text_copy:this.props.text,info_message:Object(u.localize)("Click here to copy account login number and paste into the login box in MT5 platform along with your password."),success_message:Object(u.localize)("Account login number copied!"),className:"mt5-account-card__clipboard"})}}])&&Mn(t.prototype,n),a&&Mn(t,a),o}(c.PureComponent),Cn={synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform"},Dn=function(e){var t=e.display_login;return c.createElement("div",{className:"mt5-account-card__login"},c.createElement(u.Localize,{i18n_default_text:"<0>Account login no.</0><1>{{display_login}}</1>",values:{display_login:t},components:[c.createElement("span",{key:0}),c.createElement("strong",{key:1})]}),c.createElement(Tn,{text:t}))},In=function(e){var t=e.button_label,n=e.handleClickSwitchAccount,a=e.has_real_account,r=e.is_accounts_switcher_on,o=e.is_button_primary,i=e.is_disabled,l=e.is_virtual,d=e.onSelectAccount,p=e.type;if(l&&a&&"real"===p.category&&"financial_stp"===p.type&&"function"==typeof n)return c.createElement("div",{className:"mt5-account-card__action-wrapper"},c.createElement(u.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a DMT5 Financial STP account.</1>",components:[c.createElement("a",{className:m()("mt5-account-card__action-wrapper__link link link--orange",{"mt5-account-card__action-wrapper__link--disabled":r}),key:0,onClick:n}),c.createElement(s.Text,{key:1,line_height:"xs",size:"xxs"})]}));var _="real"===p.category?c.createElement(u.Localize,{i18n_default_text:"Add real account"}):c.createElement(u.Localize,{i18n_default_text:"Add demo account"}),f=t||_;return c.createElement(s.Button,{className:"mt5-account-card__account-selection",onClick:d,type:"button",is_disabled:i,primary:o,secondary:!o,large:!0},f)},Rn=function(e){var t=e.button_label,n=e.commission_message,a=e.descriptor,r=e.existing_data,o=e.has_mt5_account,i=e.has_real_account,l=e.is_accounts_switcher_on,d=e.is_button_primary,p=e.is_disabled,_=e.is_logged_in,f=e.is_virtual,b=e.specs,h=e.title,g=e.type,y=e.onSelectAccount,v=e.onClickFund,w=e.onPasswordManager,O=e.toggleAccountsDialog,E=e.toggleShouldShowRealAccountsList,j=g.type?c.createElement(s.Icon,{icon:Cn[g.type],size:64}):null,S="synthetic"===g.type&&"real"===g.category,z="demo"===g.category;return c.createElement("div",{className:m()("mt5-account-card",{"mt5-account-card__logged-out":!_})},S&&c.createElement("div",{className:"mt5-account-card__banner"},c.createElement(u.Localize,{i18n_default_text:"Most popular"})),z&&c.createElement("div",{className:"mt5-account-card__banner mt5-account-card__banner--demo"},c.createElement(u.Localize,{i18n_default_text:"DEMO"})),c.createElement("div",{className:m()("mt5-account-card__type",{"mt5-account-card__type--has-banner":S||z}),id:"mt5_".concat(g.category,"_").concat(g.type)},j,c.createElement("div",{className:"mt5-account-card__type--description"},c.createElement("h1",{className:"mt5-account-card--heading"},h),(!r||!_)&&c.createElement("p",{className:"mt5-account-card--paragraph"},a),r&&r.display_balance&&_&&c.createElement("p",{className:"mt5-account-card--balance"},c.createElement(s.Money,{amount:r.display_balance,currency:r.currency,show_currency:!0})))),c.createElement("div",{className:"mt5-account-card__cta"},c.createElement("div",{className:"mt5-account-card__specs"},c.createElement("table",{className:"mt5-account-card__specs-table"},c.createElement("tbody",null,Object.keys(b).map((function(e,t){return c.createElement("tr",{key:t,className:"mt5-account-card__specs-table-row"},c.createElement("td",{className:"mt5-account-card__specs-table-attribute"},c.createElement("p",{className:"mt5-account-card--paragraph"},e)),c.createElement("td",{className:"mt5-account-card__specs-table-data"},c.createElement("p",{className:"mt5-account-card--paragraph"},b[e])))}))))),(null==r?void 0:r.login)&&_&&c.createElement(Dn,{display_login:r.display_login}),(!r&&n||!_)&&c.createElement("p",{className:"mt5-account-card__commission mt5-account-card--paragraph"},n),r&&_&&c.createElement("div",{className:"mt5-account-card__manage"},c.createElement(s.Button,{onClick:v,type:"button",secondary:!0},"real"===g.category&&c.createElement(u.Localize,{i18n_default_text:"Fund transfer"}),"demo"===g.category&&c.createElement(u.Localize,{i18n_default_text:"Fund top up"})),c.createElement(s.Button,{onClick:function(){w(r.login,h,g.category,g.type)},type:"button",secondary:!0},c.createElement(u.Localize,{i18n_default_text:"Password"}))),!r&&o&&c.createElement(s.Button,{className:"mt5-account-card__account-selection",onClick:y,type:"button"},c.createElement(u.Localize,{i18n_default_text:"Select"})),r&&_&&c.createElement("a",{className:"dc-btn mt5-account-card__account-selection mt5-account-card__account-selection--primary",type:"button",href:ht({category:g.category,loginid:r.display_login}),target:"_blank",rel:"noopener noreferrer"},c.createElement(u.Localize,{i18n_default_text:"Trade on web terminal"})),!r&&!o&&_&&c.createElement(In,{button_label:t,handleClickSwitchAccount:function(){E(!0),O(!0)},has_real_account:i,is_accounts_switcher_on:l,is_button_primary:d,is_disabled:p,is_virtual:f,onSelectAccount:y,type:g})))};function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn=function(e){var t,n,a,r,o,i,s=e.is_eu,l=e.is_eu_country,d=e.has_maltainvest_account,m=e.openAccountNeededModal,p=e.standpoint,_=e.is_loading,f=e.is_logged_in,b=e.landing_companies,h=e.onSelectAccount,g=e.openAccountTransfer,y=e.current_list,v=e.has_mt5_account,w=e.openPasswordManager;return _?c.createElement("div",{className:"mt5-demo-accounts-display"},c.createElement(k.a,null)):c.createElement("div",{className:"mt5-demo-accounts-display"},((null==b||null===(t=b.mt_gaming_company)||void 0===t?void 0:t.financial)||!f)&&c.createElement(Rn,{has_mt5_account:v,title:Object(u.localize)("Synthetic"),type:{category:"demo",type:"synthetic"},is_logged_in:f,existing_data:y["demo.synthetic"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){return h({category:"demo",type:"synthetic"})},onPasswordManager:w,onClickFund:function(){return g(y["demo.synthetic"],{category:"demo",type:"synthetic"})},descriptor:Object(u.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:(n={},Ln(n,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),Ln(n,Object(u.localize)("Margin call"),Object(u.localize)("100%")),Ln(n,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),Ln(n,Object(u.localize)("Number of assets"),Object(u.localize)("10+")),n)}),((null==b||null===(a=b.mt_financial_company)||void 0===a?void 0:a.financial)||!f)&&c.createElement(Rn,{has_mt5_account:v,title:Object(u.localize)("Financial"),is_logged_in:f,type:{category:"demo",type:"financial"},existing_data:y["demo.financial"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){s&&!d&&p.iom?m("maltainvest",Object(u.localize)("Deriv Financial"),Object(u.localize)("DMT5 Demo Financial")):h({category:"demo",type:"financial"})},onPasswordManager:w,onClickFund:function(){return g(y["demo.financial"],{category:"demo",type:"financial"})},descriptor:s||l?Object(u.localize)("Trade commodities, cryptocurrencies, major (standard) and minor currency pairs with high leverage."):Object(u.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:s||l?jn:(r={},Ln(r,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),Ln(r,Object(u.localize)("Margin call"),Object(u.localize)("150%")),Ln(r,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),Ln(r,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),r)}),((null==b||null===(o=b.mt_financial_company)||void 0===o?void 0:o.financial_stp)||!f)&&c.createElement(Rn,{has_mt5_account:v,title:Object(u.localize)("Financial STP"),type:{category:"demo",type:"financial_stp"},is_logged_in:f,existing_data:y["demo.financial_stp"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){return h({category:"demo",type:"financial_stp"})},onPasswordManager:w,onClickFund:function(){return g(y["demo.financial_stp"],{category:"demo",type:"financial_stp"})},descriptor:Object(u.localize)("Trade major, minor, exotic currency pairs, and cryptocurrencies with Straight-Through Processing (STP) of your orders direct to the market."),specs:(i={},Ln(i,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:100")),Ln(i,Object(u.localize)("Margin call"),Object(u.localize)("150%")),Ln(i,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),Ln(i,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),i)}))},Bn=function(e){var t,n,a,r=e.has_real_account,o=e.is_accounts_switcher_on,i=e.is_eu,s=e.is_eu_country,l=e.has_malta_account,d=e.has_maltainvest_account,m=e.is_fully_authenticated,p=e.is_pending_authentication,_=e.is_virtual,f=e.landing_companies,b=e.onSelectAccount,h=e.openAccountTransfer,g=e.openPasswordModal,y=e.current_list,v=e.has_mt5_account,w=e.openPasswordManager,O=e.account_settings,E=e.openAccountNeededModal,j=e.standpoint,S=e.is_logged_in,z=e.toggleAccountsDialog,x=e.toggleShouldShowRealAccountsList,M=O.citizen&&O.tax_identification_number&&O.tax_residence,P=function(e,t,n){return e&&n?c.createElement(u.Localize,{i18n_default_text:"Set your password"}):t?c.createElement(u.Localize,{i18n_default_text:"Pending verification"}):c.createElement(u.Localize,{i18n_default_text:"Add real account"})}(m,p,M),N=!r||p,k=S&&i||!S&&s;return c.createElement("div",{className:"mt5-real-accounts-display"},((null==f||null===(t=f.mt_gaming_company)||void 0===t?void 0:t.financial)||!S)&&c.createElement(Rn,{has_mt5_account:v,title:Object(u.localize)("Synthetic"),is_disabled:!i&&!r,type:{category:"real",type:"synthetic"},is_logged_in:S,existing_data:y["real.synthetic"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){i&&j.malta&&!l?E("malta",Object(u.localize)("Deriv Synthetic"),Object(u.localize)("DMT5 Synthetic")):b({type:"synthetic",category:"real"})},onPasswordManager:w,onClickFund:function(){return h(y["real.synthetic"],{category:"real",type:"synthetic"})},descriptor:Object(u.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:On}),((null==f||null===(n=f.mt_financial_company)||void 0===n?void 0:n.financial)||!S)&&c.createElement(Rn,{has_mt5_account:v,is_disabled:!i&&!r,title:Object(u.localize)("Financial"),type:{category:"real",type:"financial"},existing_data:y["real.financial"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){i&&!d?E("maltainvest",Object(u.localize)("Deriv Financial"),Object(u.localize)("DMT5 Real Financial")):b({type:"financial",category:"real"})},onPasswordManager:w,onClickFund:function(){return h(y["real.financial"],{category:"real",type:"financial"})},descriptor:i||s?Object(u.localize)("Trade commodities, cryptocurrencies, major (standard) and minor currency pairs with high leverage."):Object(u.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:k?jn:En,is_logged_in:S}),((null==f||null===(a=f.mt_financial_company)||void 0===a?void 0:a.financial_stp)||!S)&&c.createElement(Rn,{has_mt5_account:v,title:Object(u.localize)("Financial STP"),type:{category:"real",type:"financial_stp"},is_logged_in:S,existing_data:y["real.financial_stp"],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};m&&M?g(e):(m||N)&&M||b(e)},button_label:P,is_button_primary:p,onPasswordManager:w,onClickFund:function(){return h(y["real.financial_stp"],{category:"real",type:"financial_stp"})},descriptor:Object(u.localize)("Trade major, minor, exotic currency pairs, and cryptocurrencies with Straight-Through Processing (STP) of your orders direct to the market."),specs:Sn,is_disabled:!i&&N,is_virtual:_,has_real_account:r,toggleAccountsDialog:z,toggleShouldShowRealAccountsList:x,is_accounts_switcher_on:o}))};n("./sass/app/modules/mt5/mt5-dashboard.scss");function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Xn(e);if(t){var r=Xn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Kn(this,n)}}function Kn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Gn=function(e){var t=e.children,n=e.is_loading,a=e.loading_component,r=$n(e,["children","is_loading","loading_component"]),o=a;return n?c.createElement(o,null):c.createElement(s.Tabs,r,t)},Zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(d,e);var t,n,a,r,o,i=Hn(d);function d(){var e;qn(this,d);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=i.call.apply(i,[this].concat(n))).state={active_index:0,is_account_needed_modal_open:!1,is_demo_tab:!0,required_account:{},password_manager:{is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:""}},e.openResetPassword=function(){/reset-password/.test(e.props.location.hash)&&e.props.setMt5PasswordResetModal(!0)},e.getIndexToSet=function(){if(e.props.location.hash)return/demo/.test(e.props.location.hash)?0:1},e.updateActiveIndex=function(t){var n={};0===t?n.is_demo_tab=!0:1===t&&(n.is_demo_tab=!1);var a=e.getIndexToSet();e.state.active_index!==a&&(n.active_index=a),Object(l.isEmptyObject)(n)||e.setState(n)},e.openAccountTransfer=function(t,n){"real"===n.category?(e.props.disableMt5PasswordModal(),e.props.history.push(l.routes.cashier_acc_transfer)):(e.props.setCurrentAccount(t,n),e.props.openTopUpModal())},e.togglePasswordManagerModal=function(t,n,a,r){e.setState((function(e){return{active_index:e.active_index,password_manager:{is_visible:!e.password_manager.is_visible,selected_login:"string"==typeof t?t:"",selected_account:"string"==typeof n?n:"",selected_account_group:a,selected_account_type:r}}}))},e.openRealPasswordModal=function(t){e.props.setAccountType(t),e.props.openPasswordModal()},e}return t=d,(n=[{key:"componentDidMount",value:(r=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.is_logged_in){e.next=7;break}return e.next=3,N.a.wait("get_settings");case 3:return e.next=5,N.a.authorized.cache.landingCompany(this.props.residence);case 5:t=e.sent,this.props.isMT5Allowed(t.landing_company)||this.props.history.push(l.routes.trade);case 7:this.updateActiveIndex(this.getIndexToSet()),this.openResetPassword(),this.props.onMount();case 10:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function c(e){Wn(o,n,a,c,i,"next",e)}function i(e){Wn(o,n,a,c,i,"throw",e)}c(void 0)}))},function(){return o.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(e){this.updateActiveIndex(),this.props.checkShouldOpenAccount(),e.is_mt5_allowed===this.props.is_mt5_allowed||this.props.is_mt5_allowed||this.props.history.push(l.routes.trade)}},{key:"render",value:function(){var e=this.props,t=e.account_settings,n=e.account_status,a=e.beginRealSignupForMt5,r=e.createMT5Account,o=e.current_list,i=e.is_accounts_switcher_on,l=e.is_eu,d=e.is_eu_country,m=e.is_fully_authenticated,p=e.is_loading,_=e.is_logged_in,f=e.is_pending_authentication,b=e.is_virtual,h=e.landing_companies,g=e.has_malta_account,y=e.has_maltainvest_account,w=e.has_mt5_account,O=e.has_real_account,E=e.NotificationMessages,j=e.openAccountNeededModal,S=e.standpoint,z=e.toggleAccountsDialog,x=e.toggleShouldShowRealAccountsList,M=!l&&_&&!O;return c.createElement(c.Fragment,null,c.createElement("div",{className:"mt5-dashboard__container"},c.createElement(E,null),c.createElement("div",{className:"mt5-dashboard"},c.createElement("div",{className:"mt5-dashboard__welcome-message"},c.createElement("h1",{className:"mt5-dashboard__welcome-message--heading"},_?c.createElement(u.Localize,{i18n_default_text:"Welcome to your MetaTrader 5 (DMT5 account dashboard)"}):c.createElement(u.Localize,{i18n_default_text:"Welcome to MetaTrader 5 (DMT5 account dashboard)"}))),c.createElement("div",{className:"mt5-dashboard__accounts-display"},c.createElement(Lt,{is_visible:this.state.password_manager.is_visible,selected_login:this.state.password_manager.selected_login,selected_account:this.state.password_manager.selected_account,selected_account_group:this.state.password_manager.selected_account_group,selected_account_type:this.state.password_manager.selected_account_type,toggleModal:this.togglePasswordManagerModal}),c.createElement(Gn,{active_index:this.state.active_index,top:!0,center:!0,is_loading:p,is_logged_in:_,loading_component:A,onTabItemClick:this.updateActiveIndex},c.createElement("div",{label:Object(u.localize)("Demo account")},c.createElement(Fn,{is_eu:l,is_logged_in:_,has_maltainvest_account:y,openAccountNeededModal:j,standpoint:S,is_loading:p,has_mt5_account:w,current_list:o,onSelectAccount:r,landing_companies:h,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal})),c.createElement("div",{label:Object(u.localize)("Real account")},c.createElement(c.Fragment,null,M&&c.createElement(C,{onClickSignup:a}),c.createElement(Bn,{is_accounts_switcher_on:i,is_eu:l,is_eu_country:d,is_logged_in:_,has_maltainvest_account:y,has_malta_account:g,openAccountNeededModal:j,current_list:o,account_status:n,has_mt5_account:w,onSelectAccount:r,account_settings:t,landing_companies:h,is_pending_authentication:f,is_fully_authenticated:m,is_virtual:b,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal,openPasswordModal:this.openRealPasswordModal,has_real_account:O,standpoint:S,toggleAccountsDialog:z,toggleShouldShowRealAccountsList:x})))),c.createElement("div",{className:"mt5-dashboard__info"},c.createElement("div",{className:"mt5-dashboard__info-description"},c.createElement(u.Localize,{i18n_default_text:"Use these in your apps"})),c.createElement(vn,{display_name:"Deriv Limited",text_copy:"Deriv Limited",label:Object(u.localize)("Broker"),info_msg:Object(u.localize)("Click here to copy broker name."),success_msg:Object(u.localize)("Broker name copied!")}),c.createElement(vn,{display_name:ft(this.state.is_demo_tab),text_copy:ft(this.state.is_demo_tab),label:Object(u.localize)("Server"),info_msg:Object(u.localize)("Click here to copy server name."),success_msg:Object(u.localize)("Server name copied!")})),c.createElement(_t,null),c.createElement("div",{className:"mt5-dashboard__maintenance"},c.createElement(s.Icon,{icon:"IcAlertWarning",className:"mt5-dashboard__maintenance-icon"}),c.createElement("div",{className:"mt5-dashboard__maintenance-text"},c.createElement(u.Localize,{i18n_default_text:"Server maintenance starting 03:00 GMT every Sunday. This process may take up to 2 hours to complete. <0 />Service may be disrupted during this time.",components:[c.createElement("br",{key:0})]})))),c.createElement(s.DesktopWrapper,null,c.createElement(gt,null)),c.createElement(s.MobileWrapper,null,c.createElement("div",{className:"mt5-dashboard__download-center"},c.createElement("h1",{className:"mt5-dashboard__download-center--heading"},c.createElement(u.Localize,{i18n_default_text:"Run MT5 from your browser or download the MT5 app for your devices"})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},c.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),c.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},c.createElement("a",{href:bt("android"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),c.createElement("a",{href:bt("ios"),target:"_blank",rel:"noopener noreferrer"},c.createElement(s.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),c.createElement(Gt,null),c.createElement(v,null),c.createElement(P,null),c.createElement(at,null),c.createElement(yn,null),c.createElement(gn,null))))}}])&&Vn(t.prototype,n),a&&Vn(t,a),d}(c.Component),Jn=Object(i.withRouter)(Object(f.b)((function(e){var t=e.client,n=e.modules,a=e.ui;return{beginRealSignupForMt5:n.mt5.beginRealSignupForMt5,checkShouldOpenAccount:n.mt5.checkShouldOpenAccount,createMT5Account:n.mt5.createMT5Account,current_list:n.mt5.current_list,landing_companies:t.landing_companies,is_logged_in:t.is_logged_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableMt5PasswordModal:n.mt5.disableMt5PasswordModal,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:n.mt5.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:n.mt5.enableMt5PasswordModal,openAccountNeededModal:a.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,isMT5Allowed:t.isMT5Allowed,has_mt5_account:n.mt5.has_mt5_account,has_real_account:t.has_active_real_account,setAccountType:n.mt5.setAccountType,setMt5PasswordResetModal:n.mt5.setMt5PasswordResetModal,setCurrentAccount:n.mt5.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:n.mt5.toggleCompareAccountsModal,is_accounts_switcher_on:a.is_accounts_switcher_on,openTopUpModal:a.openTopUpModal,NotificationMessages:a.notification_messages_ui,onMount:n.mt5.onMount,onUnmount:n.mt5.onUnmount,toggleAccountsDialog:a.toggleAccountsDialog,toggleShouldShowRealAccountsList:a.toggleShouldShowRealAccountsList}}))(Zn))},"./sass/app/modules/mt5/mt5-dashboard.scss":function(e,t,n){},"./sass/app/modules/mt5/mt5.scss":function(e,t,n){},"./templates/_common/components/loading.jsx":function(e,t,n){"use strict";var a=n("../node_modules/classnames/index.js"),r=n.n(a),o=n("react");t.a=function(e){var t=e.className,n=e.is_invisible,a=e.theme,c=e.id;return o.createElement("div",{id:c,className:r()("barspinner","barspinner--".concat(a||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.mt5.8925e268a1723abcb4ab.js.map