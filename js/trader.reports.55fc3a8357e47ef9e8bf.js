(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["reports"],{"./Modules/Reports/index.js":function(e,t,n){"use strict";n.r(t);var o=n("mobx-react"),a=n("../node_modules/prop-types/index.js"),r=n.n(a),c=n("react"),i=n("react-router-dom"),l=n("@deriv/components"),s=n("@deriv/shared"),u=n("@deriv/translations"),p=n("./App/Components/Elements/ContentLoader/index.js"),m=n("./App/Components/Elements/PositionsDrawer/helpers/index.js"),_=n("./App/Components/Routes/helpers.js"),d=n("./Modules/Reports/Helpers/market-underlying.js"),f=function(e){var t=e.has_selected_date,n=e.component_icon,o=e.localized_message,a=e.localized_period_message;return c.createElement(c.Fragment,null,c.createElement("div",{className:"empty-trade-history"},c.createElement(l.Icon,{icon:n,className:"empty-trade-history__icon",color:"disabled",size:96}),c.createElement("span",{className:"empty-trade-history__text"},t?a:o)))};f.propTypes={component_icon:r.a.string,has_selected_date:r.a.bool,localized_message:r.a.string,localized_period_message:r.a.string};var y=f,b=n("../node_modules/classnames/index.js"),h=n.n(b),v=n("./App/Components/Elements/PositionsDrawer/ProgressSlider/positions-progress-slider.jsx"),g=n("./Stores/connect.js"),E=n("./Stores/Modules/Portfolio/Helpers/details.js"),w=function(e){var t=e.contract_info,n=e.is_loading;if(!t)return c.createElement("div",null);var o=t.tick_count&&Object(E.a)(t);return c.createElement(v.a,{is_loading:n,expiry_time:t.date_expiry,has_result:!1,current_tick:o,start_time:t.date_start,ticks_count:t.tick_count})};w.propTypes={contract_info:r.a.object,is_loading:r.a.bool};var O=Object(g.b)((function(e){return{is_loading:e.modules.portfolio.is_loading}}))(w),j=n("./App/Components/Elements/PositionsDrawer/PositionsDrawerCard/multiplier-close-actions.jsx"),C=function(e){return+e.replace(/,/g,"")>=0?"profit":"loss"};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(r,e);var t,n,o,a=M(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,e)).state={movement:null,amount:0},t}return t=r,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.setState((function(){return{movement:e.amount>=t.state.amount?"profit":"loss",amount:e.amount}}))}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.currency,o=e.status,a=this.state.movement;return c.createElement("div",{className:"open-positions__indicative"},c.createElement("div",{className:"open-positions__indicative--amount"},c.createElement(l.Money,{amount:Math.abs(t),currency:n}),"no-resale"!==o&&0!==t&&c.createElement(c.Fragment,null,"profit"===a&&c.createElement(l.Icon,{icon:"IcProfit"}),"loss"===a&&c.createElement(l.Icon,{icon:"IcLoss"}))),"no-resale"===o&&c.createElement("div",{className:"open-positions__indicative-no-resale-msg indicative__no-resale-msg"},Object(u.localize)("Resale not offered")))}}])&&D(t.prototype,n),o&&D(t,o),r}(c.PureComponent);S.propTypes={amount:r.a.number,currency:r.a.string,status:r.a.string};var z=S,P=n("./Modules/Reports/Helpers/shortcode.js"),T=n.n(P),Y=function(e){var t=e.payload,n=e.show_description,o=e.should_show_multiplier,a=void 0===o||o,r="string"==typeof t.shortcode,i=T.a.extractInfoFromShortcode(t.shortcode);return r&&i?c.createElement("div",{className:"market-symbol-icon"},c.createElement("div",{className:"market-symbol-icon-name"},c.createElement(l.Popover,{classNameTarget:"market-symbol-icon__popover",classNameBubble:"market-symbol-icon__popover-bubble",alignment:"top",message:Object(d.c)(i.underlying),disable_target_icon:!0},c.createElement(l.Icon,{icon:i.underlying?"IcUnderlying".concat(i.underlying):"IcUnknown",size:32})),n&&t.display_name),c.createElement("div",{className:"market-symbol-icon-category"},c.createElement(l.Popover,{classNameTarget:"category-type-icon__popover",classNameBubble:"category-type-icon__popover-bubble",alignment:"top",message:Object(d.d)(i.category),disable_target_icon:!0},c.createElement(l.IconTradeTypes,{type:T.a.isHighLow({shortcode_info:i})?"".concat(i.category.toLowerCase(),"_barrier"):i.category.toLowerCase(),color:"brand"})),n&&i.category),a&&i.multiplier&&c.createElement("div",{className:"market-symbol-icon__multiplier"},"x",i.multiplier)):["deposit","hold","release","withdrawal"].includes(t.action_type)?c.createElement("div",{className:"market-symbol-icon"},"deposit"===t.action_type&&c.createElement(l.Icon,{icon:"IcCashierDeposit",size:32}),"withdrawal"===t.action_type&&c.createElement(l.Icon,{icon:"IcCashierWithdrawal",size:32}),("hold"===t.action_type||"release"===t.action_type)&&c.createElement(l.Icon,{icon:"IcCashierDp2p",size:32})):c.createElement("svg",{width:"32",height:"32",className:"unknown-icon"},c.createElement("rect",{width:"32",height:"32"}))};Y.propTypes={action:r.a.string,payload:r.a.object,show_description:r.a.bool,should_show_multiplier:r.a.bool};var I=Y,L=function(e){var t=e.value,n=e.children,o=C(t);return c.createElement("span",{className:"amount--".concat(o)},n)};L.propTypes={value:r.a.string};var A=L,F=n("./App/Components/Elements/PositionsDrawer/PositionsDrawerCard/positions-drawer-card.jsx"),B=n("./templates/_common/components/loading.jsx"),U=function(e){var t=e.empty_message_component;return c.createElement(c.Fragment,null,e.is_empty&&c.createElement(t,{component_icon:e.component_icon,has_selected_date:e.has_selected_date,localized_message:e.localized_message,localized_period_message:e.localized_period_message}),e.is_loading&&c.createElement(B.a,null))};U.propTypes={component_icon:r.a.string,empty_message_component:r.a.func,has_selected_date:r.a.bool,localized_message:r.a.string};var W=U,V=n("./Stores/Modules/Contract/Helpers/multiplier.js");function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){return c.createElement(c.Fragment,null,e.is_empty?c.createElement(W,{is_empty:e.is_empty,empty_message_component:y,component_icon:e.component_icon,localized_message:Object(u.localize)("You have no open positions yet.")}):e.children)},ee=function(e){var t=e.className,n=e.columns,o=e.component_icon,a=e.currency,r=e.active_positions,i=e.is_loading,m=e.is_multiplier_tab,_=e.getRowAction,d=e.mobileRowRenderer,f=e.preloaderCheck,b=e.row_size,h=e.totals;return c.createElement(c.Fragment,null,i?c.createElement(W,{is_loading:i,empty_message_component:y,component_icon:o,localized_message:Object(u.localize)("You have no open positions yet.")}):a&&c.createElement(c.Fragment,null,c.createElement(l.DesktopWrapper,null,c.createElement($,{component_icon:o,is_empty:0===r.length},c.createElement(l.DataTable,{className:t,columns:n,preloaderCheck:f,footer:h,data_source:r,getRowAction:_,getRowSize:function(){return b},custom_width:"100%",content_loader:p.b},c.createElement(W,{is_loading:i})))),c.createElement(l.MobileWrapper,null,c.createElement($,{component_icon:o,is_empty:0===r.length},c.createElement(l.DataList,{className:t,data_source:r,footer:h,rowRenderer:d,getRowAction:_,custom_width:"100%",getRowSize:function(){return Object(s.isMobile)()&&m?228:Object(s.isMobile)()?208:194}},c.createElement(W,{is_loading:i}))))))},te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(r,e);var t,n,o,a=Q(r);function r(){var e;G(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={active_index:e.props.is_multiplier?1:0,has_multiplier_contract:!1},e.mobileRowRenderer=function(t){var n=t.row;if(t.is_footer)return c.createElement(c.Fragment,null,c.createElement("div",{className:"open-positions__data-list-footer--content"},c.createElement("div",null,c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.payout})),c.createElement("div",null,c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit}))));var o=e.props,a=o.server_time,r=o.onClickCancel,i=o.onClickSell,s=n.contract_info,u=n.contract_update,p=n.type,_=s.currency,f=s.status,y=s.date_expiry,b=s.date_start,h=Object(d.a)(s.longcode),v=Object(m.e)(a,b,y)/100;return Object(V.a)(p)?c.createElement(F.a,{contract_info:s,contract_update:u,currency:_,is_multiplier:!0,is_link_disabled:!0,onClickCancel:r,onClickSell:i,status:f}):c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.type}),c.createElement(l.ProgressBar,{label:h,value:v})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.reference})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.payout}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit})))},e.getRowAction=function(e){return e.is_unsupported?{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/portfoliows",{legacy:!0})})]})}:Object(_.b)(e.id)},e.isPurchaseReceived=function(e){return isNaN(e.purchase)||!e.purchase},e.getTotals=function(e,t){var n;if(t){var o=0,a=0,r=0,c=0,i=0;e.forEach((function(e){r+=+e.contract_info.buy_price,c+=+e.contract_info.bid_price,i+=+e.purchase,e.contract_info&&(a+=e.contract_info.bid_price-e.contract_info.buy_price,e.contract_info.cancellation&&(o+=e.contract_info.cancellation.ask_price||0))})),n={contract_info:{profit:a,buy_price:r,bid_price:c},purchase:i},o>0&&(n.contract_info.cancellation={ask_price:o})}else{var l=0,s=0,u=0,p=0;e.forEach((function(e){l+=+e.indicative,s+=+e.purchase,u+=e.profit_loss,p+=e.payout})),n={indicative:l,purchase:s,profit_loss:u,payout:p}}return n},e.setActiveTabIndex=function(t){e.setState({active_index:t})},e}return t=r,(n=[{key:"componentDidMount",value:function(){Object(s.isMobile)()||this.props.onMount()}},{key:"componentDidUpdate",value:function(e){if(this.props.active_positions!==e.active_positions&&!this.state.has_multiplier_contract){var t=this.props.active_positions.some((function(e){var t;return Object(V.a)(null===(t=e.contract_info)||void 0===t?void 0:t.contract_type)}));this.setState({has_multiplier_contract:t})}}},{key:"componentWillUnmount",value:function(){Object(s.isMobile)()||this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.active_positions,n=e.component_icon,o=e.is_loading,a=e.error,r=e.currency,i=e.NotificationMessages,p=e.onClickCancel,m=e.onClickSell,_=e.getPositionById,d=this.state,f=d.has_multiplier_contract,y=d.active_index;if(a)return c.createElement("p",null,a);var b=f&&1===y,v=t.filter((function(e){return!e.contract_info||(b?Object(V.a)(e.contract_info.contract_type):!Object(V.a)(e.contract_info.contract_type))})),g=this.getTotals(v,b),E={active_positions:v,component_icon:n,currency:r,is_loading:o,mobileRowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,preloaderCheck:this.isPurchaseReceived,totals:g};return this.columns=b?function(e){var t=e.currency,n=e.onClickCancel,o=e.onClickSell,a=e.getPositionById;return[{title:"Type",col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(u.localize)("Total"):c.createElement(I,{action:t,key:n.id,payload:n.contract_info,should_show_multiplier:!1})}},{title:Object(u.localize)("Multiplier"),col_index:"multiplier",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.multiplier?"x".concat(t.contract_info.multiplier):""}},{title:Object(u.localize)("Stake"),col_index:"buy_price",renderCellContent:function(e){var n=e.row_obj;if(n.contract_info){var o=(n.contract_info.cancellation||{}).ask_price,a=void 0===o?0:o;return c.createElement(l.Money,{amount:n.contract_info.buy_price-a,currency:t})}return""}},{title:Object(u.localize)("Deal cancel. fee"),col_index:"cancellation",renderCellContent:function(e){var n=e.row_obj;return n.contract_info&&n.contract_info.cancellation?c.createElement(l.Money,{amount:n.contract_info.cancellation.ask_price,currency:t}):"-"}},{title:Object(s.isMobile)()?c.createElement(u.Localize,{i18n_default_text:"Total buy price"}):c.createElement(u.Localize,{i18n_default_text:"Buy price"}),col_index:"purchase",renderCellContent:function(e){var n=e.cell_value;return c.createElement(l.Money,{amount:n,currency:t})}},{title:c.createElement(u.Localize,{i18n_default_text:"Take profit<0 />Stop loss",components:[c.createElement("br",{key:0})]}),col_index:"limit_order",renderCellContent:function(e){var n,o=e.row_obj;if(e.is_footer)return"";var a=(null===(n=o.contract_info)||void 0===n?void 0:n.limit_order)||{},r=a.take_profit,i=a.stop_loss;return c.createElement(c.Fragment,null,c.createElement("div",null,r?c.createElement(l.Money,{has_sign:!0,amount:r.order_amount,currency:t}):"-"),c.createElement("div",null,i?c.createElement(l.Money,{has_sign:!0,amount:i.order_amount,currency:t}):"-"))}},{title:Object(u.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(e.is_footer)return"";if(!n.contract_info||!n.contract_info.bid_price)return"-";var o=n.contract_info.bid_price-n.contract_info.buy_price;return c.createElement("div",{className:h()("open-positions__bid_price",{"open-positions__bid_price--negative":o<0,"open-positions__bid_price--positive":o>0})},c.createElement(l.Money,{amount:n.contract_info.bid_price,currency:t}))}},{title:Object(s.isMobile)()?c.createElement(u.Localize,{i18n_default_text:"Total profit/loss"}):c.createElement(u.Localize,{i18n_default_text:"Total<0 />profit/loss",components:[c.createElement("br",{key:0})]}),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var o=n.contract_info.bid_price-n.contract_info.buy_price;return c.createElement("div",{className:h()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(l.Money,{amount:Math.abs(o),currency:t}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(l.Icon,{icon:"IcProfit"}):c.createElement(l.Icon,{icon:"IcLoss"})))}},{title:Object(u.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return c.createElement("div",{className:"open-positions__row-action"});var r=t.contract_info,i=(a(r.contract_id)||{}).is_sell_requested;return c.createElement("div",{className:"open-positions__row-action"},c.createElement(j.a,{contract_info:r,is_sell_requested:i,onClickCancel:n,onClickSell:o}))}}]}({currency:r,onClickCancel:p,onClickSell:m,getPositionById:_}):function(e){return[{title:"Type",col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(u.localize)("Total"):c.createElement(I,{action:t,key:n.id,payload:n.contract_info})}},{title:Object(u.localize)("Ref. ID"),col_index:"reference"},{title:Object(u.localize)("Buy price"),col_index:"purchase",renderCellContent:function(t){var n=t.cell_value;return c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Potential payout"),col_index:"payout",renderCellContent:function(t){var n=t.cell_value;return n?c.createElement(l.Money,{amount:n,currency:e}):c.createElement("span",null,"-")}},{title:Object(u.localize)("Potential profit/loss"),col_index:"profit",renderCellContent:function(t){var n=t.row_obj;if(n.profit_loss||n.contract_info&&n.contract_info.profit){var o=n.profit_loss||n.contract_info.profit;return c.createElement("div",{className:h()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(l.Money,{amount:Math.abs(o),currency:e}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(l.Icon,{icon:"IcProfit"}):c.createElement(l.Icon,{icon:"IcLoss"})))}}},{title:Object(u.localize)("Indicative price"),col_index:"indicative",renderCellContent:function(t){var n=t.cell_value,o=t.row_obj;return c.createElement(z,{amount:+n,currency:e,status:o.contract_info&&!o.is_valid_to_sell?"no-resale":""})}},{title:Object(u.localize)("Remaining time"),col_index:"id",renderCellContent:function(e){var t=e.row_obj;return c.createElement(O,{contract_info:t.contract_info})}}]}(r),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(i,null),f?c.createElement(l.Tabs,{active_index:y,className:"open-positions",onTabItemClick:this.setActiveTabIndex,top:!0,header_fit_content:!Object(s.isMobile)()},c.createElement("div",{label:Object(u.localize)("Options")},c.createElement(ee,q({className:"open-positions",columns:this.columns},E,{row_size:Object(s.isMobile)()?5:63}))),c.createElement("div",{label:Object(u.localize)("Multipliers")},c.createElement(ee,q({className:"open-positions-multiplier open-positions",is_multiplier_tab:!0,columns:this.columns,row_size:Object(s.isMobile)()?3:68},E)))):c.createElement(ee,q({className:"open-positions",columns:this.columns},E,{row_size:Object(s.isMobile)()?5:63})))}}])&&J(t.prototype,n),o&&J(t,o),r}(c.Component);te.propTypes={active_positions:o.PropTypes.arrayOrObservableArray,component_icon:r.a.string,currency:r.a.string,error:r.a.string,history:r.a.object,is_loading:r.a.bool,is_mobile:r.a.bool,is_tablet:r.a.bool,onMount:r.a.func,onUnmount:r.a.func,server_time:r.a.object,totals:r.a.object};var ne=Object(g.b)((function(e){var t=e.modules,n=e.client,o=e.common,a=e.ui;return{currency:n.currency,active_positions:t.portfolio.active_positions,error:t.portfolio.error,getPositionById:t.portfolio.getPositionById,is_loading:t.portfolio.is_loading,onClickCancel:t.portfolio.onClickCancel,onClickSell:t.portfolio.onClickSell,onMount:t.portfolio.onMount,onUnmount:t.portfolio.onUnmount,is_multiplier:t.trade.is_multiplier,NotificationMessages:a.notification_messages_ui,server_time:o.server_time}}))(Object(i.withRouter)(te)),oe=n("react-router"),ae=n("../node_modules/react-loadable/lib/index.js"),re=n.n(ae),ce=n("./App/Components/Form/InputField/input-field.jsx");function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=me(e);if(t){var a=me(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){var t=e.id,n=e.className,o=e.selected_value,a=e.value,r=e.label,i=e.onChange;return c.createElement("label",{htmlFor:t,className:h()("composite-calendar-modal__radio",n,{"composite-calendar-modal__radio--selected":o===a}),onClick:function(){return i({label:r,value:a})}},c.createElement("input",{className:"composite-calendar-modal__radio-input",id:t,type:"radio",value:a}),c.createElement("span",{className:h()("composite-calendar-modal__radio-circle",{"composite-calendar-modal__radio-circle--selected":o===a})}),c.createElement("p",{className:"composite-calendar-modal__radio-label"},r))},de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(r,e);var t,n,o,a=ue(r);function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,e)).applyDateRange=function(){var e=t.state.selected_date_range;e.onClick?t.selectDateRange(e):"custom"===e.value&&t.selectCustomDateRange(),t.setState({applied_date_range:e,open:!1})},t.selectToday=function(){var e={duration:0,label:Object(u.localize)("Today")};t.selectDateRange(e,!0),t.setState({applied_date_range:e,selected_date_range:e,open:!1})},t.selectDate=function(e,n){var o;t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({selected_date_range:{value:"custom"}},n,(null===(o=e.target)||void 0===o?void 0:o.value)?Object(s.toMoment)(e.target.value).format("DD MMM YYYY"):""))},t.onDateRangeChange=function(e){var n=t.props.duration_list.find((function(t){return e&&t.value===e.value}))||e;t.setState({selected_date_range:n})},t.openDialog=function(){var e=t.state.applied_date_range;t.setState({open:!0,selected_date_range:e})};var n=t.props,o=n.duration_list,c=n.input_date_range,i=n.from,l=n.to,p=i&&Object(s.toMoment)(i).format("DD MMM YYYY"),m=i&&Object(s.toMoment)(l).format("DD MMM YYYY"),_=c||o.find((function(e){return"all_time"===e.value}));return t.state={from:p,to:m,applied_date_range:_,selected_date_range:_},t}return t=r,(n=[{key:"selectDateRange",value:function(e,t){var n=e.duration;this.props.onChange({from:t||n?Object(s.toMoment)().startOf("day").subtract(n,"day").add(1,"s").unix():null,to:Object(s.toMoment)().endOf("day").unix(),is_batch:!0},{date_range:e})}},{key:"selectCustomDateRange",value:function(){var e=this.state.selected_date_range,t=Object(s.toMoment)().format("DD MMM YYYY"),n=this.state,o=n.from,a=n.to;o=o||a||t,a=a||t;var r=Object.assign(e,{label:"".concat(o," - ").concat(a)});this.props.onChange({from:Object(s.toMoment)(o,"DD MMM YYYY").startOf("day").add(1,"s").unix(),to:Object(s.toMoment)(a,"DD MMM YYYY").endOf("day").unix(),is_batch:!0},{date_range:r})}},{key:"getMobileFooter",value:function(){var e=this;return c.createElement("div",{className:"composite-calendar-modal__actions"},c.createElement(l.Button,{className:"composite-calendar-modal__actions__cancel",text:Object(u.localize)("Cancel"),onClick:function(){return e.setState({open:!1})},has_effect:!0,secondary:!0,large:!0}),c.createElement(l.Button,{className:"composite-calendar-modal__actions__ok",text:Object(u.localize)("OK"),onClick:this.applyDateRange,has_effect:!0,primary:!0,large:!0}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,o=t.applied_date_range,a=t.selected_date_range,r=this.props.duration_list,i=Object(s.toMoment)().format("YYYY-MM-DD"),p=this.state.to?Object(s.toMoment)(this.state.to,"DD MMM YYYY").format("YYYY-MM-DD"):i,m=this.state.from&&Object(s.toMoment)(this.state.from,"DD MMM YYYY").format("YYYY-MM-DD");return c.createElement(c.Fragment,null,c.createElement("div",{className:"composite-calendar__input-fields composite-calendar__input-fields--fill"},c.createElement(ce.a,{id:"dt_calendar_input",is_read_only:!0,icon:function(){return c.createElement(l.Icon,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:this.openDialog,value:o.label})),c.createElement(l.MobileDialog,{portal_element_id:"modal_root",title:Object(u.localize)("Please select duration"),visible:n,has_content_scroll:!0,onClose:function(){return e.setState({open:!1})},content_height_offset:"94px",footer:this.getMobileFooter()},c.createElement("div",{className:"composite-calendar-modal"},c.createElement("div",{className:"composite-calendar-modal__radio-group"},r.map((function(t){return c.createElement(_e,{id:"composite-calendar-modal__radio__".concat(t.value),key:t.value,value:t.value,label:t.label,selected_value:a.value,onChange:e.onDateRangeChange})}))),c.createElement("div",{className:"composite-calendar-modal__custom"},c.createElement(_e,{id:"composite-calendar-modal__custom-radio",className:"composite-calendar-modal__custom-radio",value:"custom",label:Object(u.localize)("Custom"),selected_value:a.value,onChange:this.onDateRangeChange}),c.createElement("div",{className:"composite-calendar-modal__custom-date-range"},c.createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-start-date",is_nativepicker:!0,placeholder:Object(u.localize)("Start date"),value:this.state.from,max_date:p,onChange:function(t){return e.selectDate(t,"from")}}),c.createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-end-date",is_nativepicker:!0,placeholder:Object(u.localize)("End date"),value:this.state.to,max_date:i,min_date:m,onChange:function(t){return e.selectDate(t,"to")}}))),c.createElement(l.Button,{className:"composite-calendar-modal__actions-today",text:Object(u.localize)("Back to today"),onClick:this.selectToday,has_effect:!0,tertiary:!0,large:!0}))))}}])&&le(t.prototype,n),o&&le(t,o),r}(c.PureComponent);de.propTypes={duration_list:r.a.array,from:r.a.number,onChange:r.a.func,to:r.a.number};var fe=de,ye=function(e){var t=e.onClick,n=e.is_active,o=e.label;return c.createElement("li",{className:h()({"composite-calendar__prepopulated-list--is-active":n}),onClick:t},o)};ye.propTypes={label:r.a.oneOfType([r.a.func,r.a.node,r.a.array]),is_active:r.a.bool,onClick:r.a.func};var be=ye;function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ge=function(e){var t=e.items,n=e.from,o=e.to;return c.createElement("ul",{className:"composite-calendar__prepopulated-list"},t.map((function(e){var t=e.duration,a=ve(e,["duration"]),r=function(e,t,n){return 0===n?Object(s.toMoment)().endOf("day").unix()===t&&null===e:Math.ceil(t/86400)-Math.ceil(e/86400)===n}(n,o,t);return c.createElement(be,he({key:t,is_active:r},a))})))};ge.propTypes={items:r.a.array};var Ee=ge,we=function(e){var t=e.onClick;return c.createElement(l.Icon,{onClick:t,icon:"IcCalendarDatefrom",className:"inline-icon"})};we.propTypes={onClick:r.a.func};var Oe=we;function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Se(e);if(t){var a=Se(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=re()({loader:function(){return n.e("two-month-picker").then(n.bind(null,"./App/Components/Form/CompositeCalendar/two-month-picker.jsx"))},loading:function(){return null},render:function(e,t){var n=e.default;return c.createElement(n,t)}}),Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(r,e);var t,n,o,a=Me(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,e)).state={show_to:!1,show_from:!1,list:[{value:"all_time",label:Object(u.localize)("All time"),onClick:function(){return t.selectDateRange()},duration:0},{value:"last_7_days",label:Object(u.localize)("Last 7 days"),onClick:function(){return t.selectDateRange(7)},duration:7},{value:"last_30_days",label:Object(u.localize)("Last 30 days"),onClick:function(){return t.selectDateRange(30)},duration:30},{value:"last_60_days",label:Object(u.localize)("Last 60 days"),onClick:function(){return t.selectDateRange(60)},duration:60},{value:"last_quarter",label:Object(u.localize)("Last quarter"),onClick:function(){return t.selectDateRange(90)},duration:90}]},t.setWrapperRef=t.setWrapperRef.bind(xe(t)),t.handleClickOutside=t.handleClickOutside.bind(xe(t)),t}return t=r,(n=[{key:"selectDateRange",value:function(e){this.hideCalendar(),this.applyBatch({from:e?Object(s.toMoment)().startOf("day").subtract(e,"day").add(1,"s").unix():null,to:Object(s.toMoment)().endOf("day").unix(),is_batch:!0})}},{key:"hideCalendar",value:function(){this.setState({show_from:!1,show_to:!1})}},{key:"showCalendar",value:function(e){this.setState(ke({},"show_".concat(e),!0))}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),this.hideCalendar())}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setToDate",value:function(e){this.updateState("to",Object(s.epochToMoment)(e).endOf("day").unix())}},{key:"setFromDate",value:function(e){this.updateState("from",e),this.hideCalendar()}},{key:"updateState",value:function(e,t){this.apply(e,t),this.hideCalendar()}},{key:"applyBatch",value:function(e){this.props.onChange(e)}},{key:"apply",value:function(e,t){this.applyBatch(ke({},e,t))}},{key:"isPeriodDisabledTo",value:function(e){return e+1<=this.props.from||e>Object(s.toMoment)().endOf("day").unix()}},{key:"isPeriodDisabledFrom",value:function(e){return e-1>=this.props.to}},{key:"render",value:function(){var e=this.state,t=e.show_from,n=e.show_to,o=e.list,a=this.props,r=a.to,i=a.from;return c.createElement(c.Fragment,null,c.createElement(l.DesktopWrapper,null,c.createElement("div",{id:"dt_composite_calendar_inputs",className:"composite-calendar__input-fields"},c.createElement(ce.a,{id:"dt_calendar_input_from",is_read_only:!0,placeholder:Object(u.localize)("Date from"),icon:Oe,onClick:this.showCalendar.bind(this,"from"),value:this.from_date_label}),c.createElement(ce.a,{id:"dt_calendar_input_to",is_read_only:!0,placeholder:Object(u.localize)("Date to"),icon:Oe,onClick:this.showCalendar.bind(this,"to"),value:this.to_date_label})),n&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(Ee,{from:i,to:r,items:o}),c.createElement(ze,{value:r,onChange:this.setToDate.bind(this),isPeriodDisabled:this.isPeriodDisabledTo.bind(this)})),t&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(Ee,{from:i,to:r,items:o}),c.createElement(ze,{value:i,onChange:this.setFromDate.bind(this),isPeriodDisabled:this.isPeriodDisabledFrom.bind(this)}))),c.createElement(l.MobileWrapper,null,c.createElement(fe,Ce({duration_list:this.state.list},this.props))))}},{key:"to_date_label",get:function(){var e=Object(s.epochToMoment)(this.props.to);return 0===Object(s.daysFromTodayTo)(e)?Object(u.localize)("Today"):e.format("MMM, DD YYYY")}},{key:"from_date_label",get:function(){var e=Object(s.epochToMoment)(this.props.from);return this.props.from?e.format("MMM, DD YYYY"):""}}])&&De(t.prototype,n),o&&De(t,o),r}(c.PureComponent);Pe.propTypes={from:r.a.number,onChange:r.a.func,to:r.a.number};var Te=Pe,Ye=n("./Constants/index.js"),Ie=function(e){var t=e.i18n_heading,n=e.i18n_message,o=e.filter_component,a=e.className,r=e.optional_component;return c.createElement("div",{className:h()("reports__meta",a)},t&&c.createElement("div",{className:"reports__meta-description"},c.createElement("h1",{className:"reports__meta-description--heading"},t),c.createElement("p",{className:"reports__meta-description--paragraph"},n)),r,o&&c.createElement("div",{className:"reports__meta-filter"},o))};function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=He(e);if(t){var a=He(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(r,e);var t,n,o,a=We(r);function r(){var e;Fe(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).mobileRowRenderer=function(t){var n=t.row,o=t.is_footer,a=Object(d.a)(n.longcode,n.shortcode),r="duration-type__".concat(a.toLowerCase());return o?c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.action_type,is_footer:o}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit_loss,is_footer:o})):c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.action_type}),c.createElement("div",{className:h()("duration-type",r)},c.createElement("div",{className:h()("duration-type__background","".concat(r,"__background"))}),c.createElement("span",{className:"".concat(r,"__label")},Object(u.localize)(a)))),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.transaction_id}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.buy_price})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase_time}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.sell_price})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.sell_time}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit_loss})))},e.getRowAction=function(e){return Object(Ye.c)()[T.a.extractInfoFromShortcode(e.shortcode).category.toUpperCase()]?Object(_.b)(e.contract_id):{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/profit_tablews",{legacy:!0})})]})}},e}return t=r,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.component_icon,n=e.currency,o=e.data,a=e.date_from,r=e.date_to,i=e.filtered_date_range,m=e.is_empty,_=e.is_loading,d=e.error,f=e.handleDateChange,b=e.handleScroll,h=e.has_selected_date,v=e.totals;if(d)return c.createElement("p",null,d);var g=c.createElement(Te,{input_date_range:i,onChange:f,from:a,to:r});return this.columns=function(e,t){return[{key:"icon",title:"",col_index:"action_type",renderCellContent:function(e){var n=e.cell_value,o=e.row_obj;return e.is_footer?Object(u.localize)("Profit/loss on the last {{item_count}} contracts",{item_count:t}):c.createElement(I,{action:n,key:o.transaction_id,payload:o})}},{title:Object(u.localize)("Ref. ID"),col_index:"transaction_id"},{title:Object(u.localize)("Buy time"),col_index:"purchase_time",renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{title:Object(u.localize)("Buy price"),col_index:"buy_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Sell time"),col_index:"sell_time",renderHeader:function(e){var t=e.title;return c.createElement("span",null,t)},renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{title:Object(u.localize)("Sell price"),col_index:"sell_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Profit/Loss"),col_index:"profit_loss",renderCellContent:function(t){var n=t.cell_value;return c.createElement(A,{value:n},c.createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}}]}(n,o.length),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(Ie,Ae({},Object(s.isDesktop)()?{i18n_heading:Object(u.localize)("Profit table"),i18n_message:Object(u.localize)("View all trades purchased on your account, and a summary of your total profit/loss.")}:{},{filter_component:g,className:"profit-table__filter"})),this.props.is_switching?c.createElement(W,{is_loading:!0}):c.createElement(c.Fragment,null,0===o.length||m?c.createElement(W,{is_loading:_,has_selected_date:h,is_empty:m,empty_message_component:y,component_icon:t,localized_message:Object(u.localize)("You have no trading activity yet."),localized_period_message:Object(u.localize)("You have no trading activity for this period.")}):c.createElement(c.Fragment,null,c.createElement(l.DesktopWrapper,null,c.createElement(l.DataTable,{className:"profit-table",data_source:o,columns:this.columns,onScroll:b,footer:v,is_empty:m,getRowAction:this.getRowAction,custom_width:"100%",getRowSize:function(){return 63},content_loader:p.b},c.createElement(W,{is_loading:_}))),c.createElement(l.MobileWrapper,null,c.createElement(l.DataList,{className:"profit-table",data_source:o,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:b,footer:v,custom_width:"100%",getRowSize:function(){return 204}},c.createElement(W,{is_loading:_}))))))}}])&&Be(t.prototype,n),o&&Be(t,o),r}(c.Component);qe.propTypes={component_icon:r.a.string,currency:r.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:r.a.number,date_to:r.a.number,error:r.a.string,filtered_date_range:r.a.object,handleDateChange:r.a.func,handleScroll:r.a.func,has_selected_date:r.a.bool,history:r.a.object,is_empty:r.a.bool,is_loading:r.a.bool,is_switching:r.a.bool,onMount:r.a.func,onUnmount:r.a.func,totals:r.a.object};var Ge=Object(g.b)((function(e){var t=e.modules,n=e.client;return{currency:n.currency,is_switching:n.is_switching,data:t.profit_table.data,date_from:t.profit_table.date_from,date_to:t.profit_table.date_to,error:t.profit_table.error,filtered_date_range:t.profit_table.filtered_date_range,handleScroll:t.profit_table.handleScroll,handleDateChange:t.profit_table.handleDateChange,has_selected_date:t.profit_table.has_selected_date,is_empty:t.profit_table.is_empty,is_loading:t.profit_table.is_loading,onMount:t.profit_table.onMount,onUnmount:t.profit_table.onUnmount,totals:t.profit_table.totals}}))(Object(oe.withRouter)(qe)),Je=n("./Services/ws-methods.js");function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=tt(e);if(t){var a=tt(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return et(this,n)}}function et(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(r,e);var t,n,o,a=$e(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,e)).mobileRowRenderer=function(e){var n=e.row;return c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:t.columns_map.icon}),c.createElement(l.DataList.Cell,{row:n,column:t.columns_map.action_type})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:t.columns_map.refid}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:t.columns_map.balance})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:t.columns_map.date}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:t.columns_map.amount})))},t.getRowAction=function(e){var t;return e.id&&["buy","sell"].includes(e.action_type)?t=Object(Ye.c)()[T.a.extractInfoFromShortcode(e.shortcode).category.toUpperCase()]?Object(_.b)(e.id):{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/statementws",{legacy:!0})})]})}:["deposit","withdrawal"].includes(e.action_type)&&(t={message:e.desc}),t},t.state={total_deposits:0,total_withdrawals:0},t}return t=r,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.onMount(),("iom"===this.props.landing_company_shortcode||"malta"===this.props.landing_company_shortcode)&&Je.a.accountStatistics().then((function(t){t.error?e.setState({api_error:t.error.message}):e.setState({total_deposits:t.account_statistics.total_deposits,total_withdrawals:t.account_statistics.total_withdrawals})}))}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"getAccountStatistics",value:function(){var e=this.props.currency;return c.createElement(c.Fragment,null,c.createElement("div",{className:"statement__account-statistics"},c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Total deposits")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:this.state.total_deposits,currency:e}))),c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Total withdrawals")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:this.state.total_withdrawals,currency:e}))),c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Net deposits")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:this.state.total_deposits-this.state.total_withdrawals,currency:e})))))}},{key:"getReportsMetaProps",value:function(e){var t={};return e&&Object.assign(t,{optional_component:this.getAccountStatistics()}),Object(s.isDesktop)()&&Object.assign(t,{i18n_heading:Object(u.localize)("Statement"),i18n_message:Object(u.localize)("View all transactions on your account, including trades, deposits, and withdrawals.")}),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.component_icon,o=t.currency,a=t.data,r=t.date_from,i=t.date_to,s=t.is_empty,m=t.is_loading,_=t.error,d=t.filtered_date_range,f=t.handleScroll,b=t.handleDateChange,h=t.has_selected_date;if(_)return c.createElement("p",null,_);var v=c.createElement(c.Fragment,null,c.createElement(Te,{input_date_range:d,onChange:b,from:r,to:i}));this.columns=function(e){return[{key:"icon",title:Object(u.localize)("Type"),col_index:"icon",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return c.createElement(I,{action:t,key:n.transaction_id,payload:n})}},{title:Object(u.localize)("Ref. ID"),col_index:"refid"},{title:Object(u.localize)("Transaction time"),col_index:"date",renderCellContent:function(e){var t=e.cell_value;return c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{key:"mode",title:Object(u.localize)("Transaction"),col_index:"action_type",renderCellContent:function(e){var t,n,o=e.cell_value,a=e.row_obj;return c.createElement(l.Label,{mode:(t=o,n={buy:"success",deposit:"success",hold:"warn",release:"success",sell:"danger",withdrawal:"info",default:"default"},Object.keys(n).find((function(e){return e===t}))?n[t]:n.default)},a.action)}},{title:Object(u.localize)("Credit/Debit"),col_index:"amount",renderCellContent:function(t){var n=t.cell_value;return c.createElement("div",{className:"amount--".concat(C(n))},c.createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}},{title:Object(u.localize)("Balance"),col_index:"balance",renderCellContent:function(t){var n=t.cell_value;return c.createElement(l.Money,{amount:n.replace(/[,]+/g,""),currency:e})}}]}(o),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{});var g="iom"===this.props.landing_company_shortcode||"malta"===this.props.landing_company_shortcode;return c.createElement(c.Fragment,null,c.createElement(Ie,Qe({className:g?void 0:"reports__meta--statement",filter_component:v},this.getReportsMetaProps(g))),this.props.is_switching?c.createElement(W,{is_loading:!0}):c.createElement(c.Fragment,null,0===a.length||s?c.createElement(W,{is_loading:m,has_selected_date:h,is_empty:s,empty_message_component:y,component_icon:n,localized_message:Object(u.localize)("You have no transactions yet."),localized_period_message:Object(u.localize)("You have no transactions for this period.")}):c.createElement(c.Fragment,null,c.createElement(l.DesktopWrapper,null,c.createElement(l.DataTable,{className:"statement",data_source:a,columns:this.columns,onScroll:f,getRowAction:function(t){return e.getRowAction(t)},is_empty:s,custom_width:"100%",getRowSize:function(){return 63},content_loader:p.b},c.createElement(W,{is_loading:m}))),c.createElement(l.MobileWrapper,null,c.createElement(l.DataList,{className:"statement",data_source:a,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:f,custom_width:"100%",getRowSize:function(){return 176}},c.createElement(W,{is_loading:m}))))))}}])&&Xe(t.prototype,n),o&&Xe(t,o),r}(c.Component);nt.propTypes={component_icon:r.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:r.a.number,date_to:r.a.number,error:r.a.string,filtered_date_range:r.a.object,handleScroll:r.a.func,has_selected_date:r.a.bool,history:r.a.object,is_empty:r.a.bool,is_loading:r.a.bool,is_switching:r.a.bool,landing_company_shortcode:r.a.string,onMount:r.a.func,onUnmount:r.a.func};var ot=Object(g.b)((function(e){var t=e.modules,n=e.client;return{currency:n.currency,date_from:t.statement.date_from,date_to:t.statement.date_to,data:t.statement.data,error:t.statement.error,filtered_date_range:t.statement.filtered_date_range,handleScroll:t.statement.handleScroll,handleDateChange:t.statement.handleDateChange,has_selected_date:t.statement.has_selected_date,is_empty:t.statement.is_empty,is_loading:t.statement.is_loading,is_switching:n.is_switching,landing_company_shortcode:n.landing_company_shortcode,onMount:t.statement.onMount,onUnmount:t.statement.onUnmount}}))(Object(i.withRouter)(nt));n("./sass/app/modules/reports.scss");function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return st(this,n)}}function st(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(r,e);var t,n,o,a=lt(r);function r(){var e;rt(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).onClickClose=function(){return e.props.routeBackInApp(e.props.history)},e.handleRouteChange=function(t){e.props.history.push(t.target.value)},e}return t=r,(n=[{key:"componentDidMount",value:function(){this.props.toggleReports(!0)}},{key:"componentWillUnmount",value:function(){this.props.setVisibilityRealityCheck(1),this.props.toggleReports(!1)}},{key:"render",value:function(){var e=this,t=function(){var t=[];return e.props.routes.forEach((function(e){t.push({default:e.default,icon:e.icon_component,label:e.title,value:e.component,path:e.path})})),t},n=this.props,o=n.routes,a=n.location,r=Object(s.getSelectedRoute)({routes:o,pathname:a.pathname});return c.createElement(l.FadeWrapper,{is_visible:this.props.is_visible,className:"reports-page-wrapper",keyname:"reports-page-wrapper"},c.createElement("div",{className:"reports"},c.createElement(l.PageOverlay,{header:Object(u.localize)("Reports"),onClickClose:this.onClickClose},c.createElement(l.DesktopWrapper,null,c.createElement(l.VerticalTab,{alignment:"center",id:"report",is_floating:!0,classNameHeader:"reports__tab-header",current_path:this.props.location.pathname,is_routed:!0,is_full_width:!0,setVerticalTabIndex:this.props.setTabIndex,vertical_tab_index:r.default?0:this.props.tab_index,list:t()})),c.createElement(l.MobileWrapper,null,c.createElement(l.Div100vhContainer,{className:"reports__mobile-wrapper",height_offset:"80px"},c.createElement(l.SelectNative,{className:"reports__route-selection",list_items:t().map((function(e){return{text:e.label,value:e.path}})),value:r.path,should_show_empty_option:!1,onChange:this.handleRouteChange}),r&&c.createElement(r.component,{component_icon:r.icon_component}))))))}}])&&ct(t.prototype,n),o&&ct(t,o),r}(c.Component);pt.propTypes={history:r.a.object,is_visible:r.a.bool,location:r.a.object,routes:r.a.arrayOf(r.a.object),setTabIndex:r.a.func,setVisibilityRealityCheck:r.a.func,tab_index:r.a.number,toggleReports:r.a.func};var mt=Object(g.b)((function(e){var t=e.client,n=e.common,o=e.ui;return{setVisibilityRealityCheck:t.setVisibilityRealityCheck,routeBackInApp:n.routeBackInApp,is_visible:o.is_reports_visible,setTabIndex:o.setReportsTabIndex,tab_index:o.reports_route_tab_index,toggleReports:o.toggleReports}}))(Object(i.withRouter)(pt));t.default={OpenPositions:ne,ProfitTable:Ge,Statement:ot,Reports:mt}},"./sass/app/modules/reports.scss":function(e,t,n){},"./templates/_common/components/loading.jsx":function(e,t,n){"use strict";var o=n("../node_modules/classnames/index.js"),a=n.n(o),r=n("react");t.a=function(e){var t=e.className,n=e.is_invisible,o=e.theme,c=e.id;return r.createElement("div",{id:c,className:a()("barspinner","barspinner--".concat(o||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return r.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.reports.55fc3a8357e47ef9e8bf.js.map