(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["reports"],{"./Modules/Reports/index.js":function(e,t,n){"use strict";n.r(t);var o=n("mobx-react"),r=n("../node_modules/prop-types/index.js"),a=n.n(r),c=n("react"),i=n("react-router-dom"),l=n("@deriv/components"),s=n("@deriv/shared"),u=n("@deriv/translations"),m=n("./App/Components/Elements/ContentLoader/index.js"),p=n("./App/Components/Routes/helpers.js"),_=n("./Modules/Reports/Helpers/market-underlying.js"),d=function(e){var t=e.has_selected_date,n=e.component_icon,o=e.localized_message,r=e.localized_period_message;return c.createElement(c.Fragment,null,c.createElement("div",{className:"empty-trade-history"},c.createElement(l.Icon,{icon:n,className:"empty-trade-history__icon",color:"disabled",size:96}),c.createElement("span",{className:"empty-trade-history__text"},t?r:o)))};d.propTypes={component_icon:a.a.string,has_selected_date:a.a.bool,localized_message:a.a.string,localized_period_message:a.a.string};var f=d,b=n("../node_modules/classnames/index.js"),y=n.n(b),h=n("./Stores/connect.js"),v=n("./Constants/contract.js"),g=function(e){var t=e.contract_info,n=e.is_loading,o=e.server_time;if(!t)return c.createElement("div",null);var r=t.tick_count&&Object(s.getCurrentTick)(t);return c.createElement(l.ProgressSlider,{current_tick:r,expiry_time:t.date_expiry,getCardLabels:v.a,is_loading:n,server_time:o,start_time:t.date_start,ticks_count:t.tick_count})};g.propTypes={contract_info:a.a.object,is_loading:a.a.bool,server_time:a.a.object};var E=Object(h.b)((function(e){var t=e.common;return{is_loading:e.modules.portfolio.is_loading,server_time:t.server_time}}))(g),w=function(e){return+e.replace(/,/g,"")>=0?"profit":"loss"};function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=M(e);if(t){var r=M(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,o,r=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={movement:null,amount:0},t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.setState((function(){return{movement:e.amount>=t.state.amount?"profit":"loss",amount:e.amount}}))}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.currency,o=e.contract_info,r=e.is_footer,a=e.onClickSell,i=e.is_sell_requested,s=this.state.movement;return c.createElement("div",{className:"open-positions__indicative"},c.createElement("div",{className:"open-positions__indicative--amount"},c.createElement(l.Money,{amount:Math.abs(t),currency:n}),"no-resale"!==status&&0!==t&&c.createElement(c.Fragment,null,"profit"===s&&c.createElement(l.Icon,{icon:"IcProfit"}),"loss"===s&&c.createElement(l.Icon,{icon:"IcLoss"}))),c.createElement(l.DesktopWrapper,null,!r&&c.createElement(l.ContractCard.Sell,{contract_info:o,is_sell_requested:i,getCardLabels:v.a,onClickSell:a})))}}])&&O(t.prototype,n),o&&O(t,o),a}(c.PureComponent);R.propTypes={amount:a.a.number,currency:a.a.string,status:a.a.string,is_footer:a.a.bool,onClickSell:a.a.func};var N=Object(h.b)((function(e){return{onClickSell:e.modules.portfolio.onClickSell}}))(R),x=function(e){var t=e.payload,n=e.show_description,o=e.should_show_multiplier,r=void 0===o||o,a="string"==typeof t.shortcode,i=Object(s.extractInfoFromShortcode)(t.shortcode);return a&&i?c.createElement("div",{className:"market-symbol-icon"},c.createElement("div",{className:"market-symbol-icon-name"},c.createElement(l.Popover,{classNameTarget:"market-symbol-icon__popover",classNameBubble:"market-symbol-icon__popover-bubble",alignment:"top",message:Object(_.c)(i.underlying),disable_target_icon:!0},c.createElement(l.Icon,{icon:i.underlying?"IcUnderlying".concat(i.underlying):"IcUnknown",size:32})),n&&t.display_name),c.createElement("div",{className:"market-symbol-icon-category"},c.createElement(l.Popover,{classNameTarget:"category-type-icon__popover",classNameBubble:"category-type-icon__popover-bubble",alignment:"top",message:Object(_.d)(i.category),disable_target_icon:!0},c.createElement(l.IconTradeTypes,{type:Object(s.isHighLow)({shortcode_info:i})?"".concat(i.category.toLowerCase(),"_barrier"):i.category.toLowerCase(),color:"brand"})),n&&i.category),r&&i.multiplier&&c.createElement("div",{className:"market-symbol-icon__multiplier"},"x",i.multiplier)):["deposit","hold","release","withdrawal"].includes(t.action_type)?c.createElement("div",{className:"market-symbol-icon"},"deposit"===t.action_type&&c.createElement(l.Icon,{icon:"IcCashierDeposit",size:32}),"withdrawal"===t.action_type&&c.createElement(l.Icon,{icon:"IcCashierWithdrawal",size:32}),("hold"===t.action_type||"release"===t.action_type)&&c.createElement(l.Icon,{icon:"IcCashierDp2p",size:32})):["adjustment"].includes(t.action_type)?c.createElement("div",{className:"market-symbol-icon"},c.createElement(l.Icon,{icon:"IcAdjustment",size:32})):c.createElement("svg",{width:"32",height:"32",className:"unknown-icon"},c.createElement("rect",{width:"32",height:"32"}))};x.propTypes={action:a.a.string,payload:a.a.object,show_description:a.a.bool,should_show_multiplier:a.a.bool};var S=x,z=function(e){var t=e.value,n=e.children,o=w(t);return c.createElement("span",{className:"amount--".concat(o)},n)};z.propTypes={value:a.a.string};var T=z,P=n("./App/Components/Elements/PositionsDrawer/PositionsDrawerCard/positions-drawer-card.jsx"),L=n("./templates/_common/components/loading.jsx"),Y=function(e){var t=e.empty_message_component;return c.createElement(c.Fragment,null,e.is_empty&&c.createElement(t,{component_icon:e.component_icon,has_selected_date:e.has_selected_date,localized_message:e.localized_message,localized_period_message:e.localized_period_message}),e.is_loading&&c.createElement(L.a,null))};Y.propTypes={component_icon:a.a.string,empty_message_component:a.a.func,has_selected_date:a.a.bool,localized_message:a.a.string};var I=Y;function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){return c.createElement(c.Fragment,null,e.is_empty?c.createElement(I,{is_empty:e.is_empty,empty_message_component:f,component_icon:e.component_icon,localized_message:Object(u.localize)("You have no open positions yet.")}):e.children)},J=function(e){var t=e.className,n=e.columns,o=e.component_icon,r=e.currency,a=e.active_positions,i=e.is_loading,p=e.is_multiplier_tab,_=e.getRowAction,d=e.mobileRowRenderer,b=e.preloaderCheck,y=e.row_size,h=e.totals;return c.createElement(c.Fragment,null,i?c.createElement(I,{is_loading:i,empty_message_component:f,component_icon:o,localized_message:Object(u.localize)("You have no open positions yet.")}):r&&c.createElement(l.ThemedScrollbars,{className:"reports__scrollbar",is_bypassed:Object(s.isMobile)(),is_only_horizontal:!0},c.createElement(l.DesktopWrapper,null,c.createElement(G,{component_icon:o,is_empty:0===a.length},c.createElement(l.DataTable,{className:t,columns:n,preloaderCheck:b,footer:h,data_source:a,getRowAction:_,getRowSize:function(){return y},custom_width:"100%",content_loader:m.b},c.createElement(I,{is_loading:i})))),c.createElement(l.MobileWrapper,null,c.createElement(G,{component_icon:o,is_empty:0===a.length},c.createElement(l.DataList,{className:t,data_source:a,footer:h,rowRenderer:d,getRowAction:_,custom_width:"100%",getRowSize:function(){return Object(s.isMobile)()&&p?253:Object(s.isMobile)()?245:194}},c.createElement(I,{is_loading:i}))))))},K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(a,e);var t,n,o,r=q(a);function a(){var e;B(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={active_index:e.props.is_multiplier?1:0,has_multiplier_contract:!1},e.mobileRowRenderer=function(t){var n=t.row;if(t.is_footer)return c.createElement(c.Fragment,null,c.createElement("div",{className:"open-positions__data-list-footer--content"},c.createElement("div",null,c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.payout})),c.createElement("div",null,c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit}))));var o=e.props,r=o.server_time,a=o.onClickCancel,i=o.onClickSell,u=n.contract_info,m=n.contract_update,p=n.type,d=n.is_sell_requested,f=u.currency,b=u.status,y=u.date_expiry,h=u.date_start,g=Object(_.a)(u.longcode),E=Object(s.getTimePercentage)(r,h,y)/100;return Object(s.isMultiplierContract)(p)?c.createElement(P.a,{contract_info:u,contract_update:m,currency:f,is_multiplier:!0,is_link_disabled:!0,onClickCancel:a,onClickSell:i,server_time:r,status:b}):c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.type}),c.createElement(l.ProgressBar,{label:g,value:E})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.reference}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.currency})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.payout}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit})),c.createElement("div",{className:"data-list__row-divider"}),c.createElement("div",{className:"data-list__row"},c.createElement(l.ContractCard.Sell,{contract_info:u,is_sell_requested:d,getCardLabels:v.a,onClickSell:i})))},e.getRowAction=function(e){return e.is_unsupported?{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/portfoliows",{legacy:!0})})]})}:Object(p.b)(e.id)},e.isPurchaseReceived=function(e){return isNaN(e.purchase)||!e.purchase},e.getTotals=function(e,t){var n;if(t){var o=0,r=0,a=0,c=0,i=0;e.forEach((function(e){a+=+e.contract_info.buy_price,c+=+e.contract_info.bid_price,i+=+e.purchase,e.contract_info&&(r+=Object(s.getTotalProfit)(e.contract_info),e.contract_info.cancellation&&(o+=e.contract_info.cancellation.ask_price||0))})),n={contract_info:{profit:r,buy_price:a,bid_price:c},purchase:i},o>0&&(n.contract_info.cancellation={ask_price:o})}else{var l=0,u=0,m=0,p=0;e.forEach((function(e){l+=+e.indicative,u+=+e.purchase,m+=e.profit_loss,p+=e.payout})),n={indicative:l,purchase:u,profit_loss:m,payout:p}}return n},e.setActiveTabIndex=function(t){e.setState({active_index:t})},e}return t=a,(n=[{key:"componentDidMount",value:function(){Object(s.isMobile)()||this.props.onMount(),this.checkForMultiplierContract()}},{key:"componentDidUpdate",value:function(e){this.checkForMultiplierContract(e.active_positions)}},{key:"componentWillUnmount",value:function(){Object(s.isMobile)()||this.props.onUnmount()}},{key:"checkForMultiplierContract",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.state.has_multiplier_contract&&this.props.active_positions!==e){var t=this.props.active_positions.some((function(e){var t;return Object(s.isMultiplierContract)(null===(t=e.contract_info)||void 0===t?void 0:t.contract_type)}));this.setState({has_multiplier_contract:t})}}},{key:"render",value:function(){var e=this.props,t=e.active_positions,n=e.component_icon,o=e.is_loading,r=e.error,a=e.currency,i=e.NotificationMessages,m=e.onClickCancel,p=e.onClickSell,_=e.getPositionById,d=e.server_time,f=this.state,b=f.has_multiplier_contract,h=f.active_index;if(r)return c.createElement("p",null,r);var g=b&&1===h,w=t.filter((function(e){return!e.contract_info||(g?Object(s.isMultiplierContract)(e.contract_info.contract_type):!Object(s.isMultiplierContract)(e.contract_info.contract_type))})),C=this.getTotals(w,g),O={active_positions:w,component_icon:n,currency:a,is_loading:o,mobileRowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,preloaderCheck:this.isPurchaseReceived,totals:C};return this.columns=g?function(e){var t=e.currency,n=e.onClickCancel,o=e.onClickSell,r=e.getPositionById,a=e.server_time;return[{title:Object(s.isMobile)()?"":Object(u.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(u.localize)("Total"):c.createElement(S,{action:t,key:n.id,payload:n.contract_info,should_show_multiplier:!1})}},{title:Object(u.localize)("Multiplier"),col_index:"multiplier",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.multiplier?"x".concat(t.contract_info.multiplier):""}},{title:Object(u.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return Object(s.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)}},{title:Object(u.localize)("Stake"),col_index:"buy_price",renderCellContent:function(e){var n=e.row_obj;if(n.contract_info){var o=(n.contract_info.cancellation||{}).ask_price,r=void 0===o?0:o;return c.createElement(l.Money,{amount:n.contract_info.buy_price-r,currency:t})}return""}},{title:Object(u.localize)("Deal cancel. fee"),col_index:"cancellation",renderCellContent:function(e){var n=e.row_obj;return n.contract_info&&n.contract_info.cancellation?c.createElement(l.Money,{amount:n.contract_info.cancellation.ask_price,currency:t}):"-"}},{title:Object(s.isMobile)()?c.createElement(u.Localize,{i18n_default_text:"Total buy price"}):c.createElement(u.Localize,{i18n_default_text:"Buy price"}),col_index:"purchase",renderCellContent:function(e){var n=e.cell_value;return c.createElement(l.Money,{amount:n,currency:t})}},{title:c.createElement(u.Localize,{i18n_default_text:"Take profit<0 />Stop loss",components:[c.createElement("br",{key:0})]}),col_index:"limit_order",renderCellContent:function(e){var n,o=e.row_obj;if(e.is_footer)return"";var r=(null===(n=o.contract_info)||void 0===n?void 0:n.limit_order)||{},a=r.take_profit,i=r.stop_loss;return c.createElement(c.Fragment,null,c.createElement("div",null,(null==a?void 0:a.order_amount)?c.createElement(l.Money,{has_sign:!0,amount:a.order_amount,currency:t}):"-"),c.createElement("div",null,(null==i?void 0:i.order_amount)?c.createElement(l.Money,{has_sign:!0,amount:i.order_amount,currency:t}):"-"))}},{title:Object(u.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(e.is_footer)return"";if(!n.contract_info||!n.contract_info.bid_price)return"-";var o=Object(s.getTotalProfit)(n.contract_info);return c.createElement("div",{className:y()("open-positions__bid_price",{"open-positions__bid_price--negative":o<0,"open-positions__bid_price--positive":o>0})},c.createElement(l.Money,{amount:n.contract_info.bid_price,currency:t}))}},{title:Object(s.isMobile)()?c.createElement(u.Localize,{i18n_default_text:"Total profit/loss"}):c.createElement(u.Localize,{i18n_default_text:"Total<0 />profit/loss",components:[c.createElement("br",{key:0})]}),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var o=Object(s.getTotalProfit)(n.contract_info);return c.createElement("div",{className:y()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(l.Money,{amount:Math.abs(o),currency:t}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(l.Icon,{icon:"IcProfit"}):c.createElement(l.Icon,{icon:"IcLoss"})))}},{title:Object(u.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return c.createElement("div",{className:"open-positions__row-action"});var i=t.contract_info,s=(r(i.contract_id)||{}).is_sell_requested;return c.createElement("div",{className:"open-positions__row-action"},c.createElement(l.ContractCard.MultiplierCloseActions,{contract_info:i,getCardLabels:v.a,is_sell_requested:s,onClickCancel:n,onClickSell:o,server_time:a}))}}]}({currency:a,onClickCancel:m,onClickSell:p,getPositionById:_,server_time:d}):function(e){return[{title:Object(s.isMobile)()?"":Object(u.localize)("Type"),col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(u.localize)("Total"):c.createElement(S,{action:t,key:n.id,payload:n.contract_info})}},{title:Object(u.localize)("Ref. ID"),col_index:"reference"},{title:Object(u.localize)("Currency"),col_index:"currency",renderCellContent:function(e){var t,n=e.row_obj;return Object(s.getCurrencyDisplayCode)(null===(t=n.contract_info)||void 0===t?void 0:t.currency)}},{title:Object(u.localize)("Buy price"),col_index:"purchase",renderCellContent:function(t){var n=t.cell_value;return c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Payout limit"),col_index:"payout",renderCellContent:function(t){var n=t.cell_value;return n?c.createElement(l.Money,{amount:n,currency:e}):c.createElement("span",null,"-")}},{title:Object(u.localize)("Indicative profit/loss"),col_index:"profit",renderCellContent:function(t){var n=t.row_obj;if(n.profit_loss||n.contract_info&&n.contract_info.profit){var o=n.profit_loss||n.contract_info.profit;return c.createElement("div",{className:y()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(l.Money,{amount:Math.abs(o),currency:e}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(l.Icon,{icon:"IcProfit"}):c.createElement(l.Icon,{icon:"IcLoss"})))}}},{title:Object(u.localize)("Indicative price"),col_index:"indicative",renderCellContent:function(t){var n=t.cell_value,o=t.row_obj,r=t.is_footer;return c.createElement(N,{amount:+n,currency:e,contract_info:o.contract_info,is_sell_requested:o.is_sell_requested,is_footer:r})}},{title:Object(u.localize)("Remaining time"),col_index:"id",renderCellContent:function(e){var t=e.row_obj;return c.createElement(E,{contract_info:t.contract_info})}}]}(a),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(i,null),b?c.createElement(l.Tabs,{active_index:h,className:"open-positions",onTabItemClick:this.setActiveTabIndex,top:!0,header_fit_content:!Object(s.isMobile)()},c.createElement("div",{label:Object(u.localize)("Options")},c.createElement(J,F({className:"open-positions",columns:this.columns},O,{row_size:Object(s.isMobile)()?5:63}))),c.createElement("div",{label:Object(u.localize)("Multipliers")},c.createElement(J,F({className:"open-positions-multiplier open-positions",is_multiplier_tab:!0,columns:this.columns,row_size:Object(s.isMobile)()?3:68},O)))):c.createElement(J,F({className:"open-positions",columns:this.columns},O,{row_size:Object(s.isMobile)()?5:63})))}}])&&U(t.prototype,n),o&&U(t,o),a}(c.Component);K.propTypes={active_positions:o.PropTypes.arrayOrObservableArray,component_icon:a.a.string,currency:a.a.string,error:a.a.string,history:a.a.object,is_loading:a.a.bool,is_tablet:a.a.bool,onMount:a.a.func,onUnmount:a.a.func,server_time:a.a.object,totals:a.a.object};var Q=Object(h.b)((function(e){var t=e.modules,n=e.client,o=e.common,r=e.ui;return{currency:n.currency,active_positions:t.portfolio.active_positions,error:t.portfolio.error,getPositionById:t.portfolio.getPositionById,is_loading:t.portfolio.is_loading,onClickCancel:t.portfolio.onClickCancel,onClickSell:t.portfolio.onClickSell,onMount:t.portfolio.onMount,onUnmount:t.portfolio.onUnmount,is_multiplier:t.trade.is_multiplier,NotificationMessages:r.notification_messages_ui,server_time:o.server_time}}))(Object(i.withRouter)(K)),X=n("react-router"),Z=n("../node_modules/react-loadable/lib/index.js"),$=n.n(Z),ee=n("./App/Components/Form/InputField/input-field.jsx");function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ce(e);if(t){var r=ce(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ae(this,n)}}function ae(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){var t=e.id,n=e.className,o=e.selected_value,r=e.value,a=e.label,i=e.onChange;return c.createElement("label",{htmlFor:t,className:y()("composite-calendar-modal__radio",n,{"composite-calendar-modal__radio--selected":o===r}),onClick:function(){return i({label:a,value:r})}},c.createElement("input",{className:"composite-calendar-modal__radio-input",id:t,type:"radio",value:r}),c.createElement("span",{className:y()("composite-calendar-modal__radio-circle",{"composite-calendar-modal__radio-circle--selected":o===r})}),c.createElement("p",{className:"composite-calendar-modal__radio-label"},a))},le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(a,e);var t,n,o,r=re(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).applyDateRange=function(){var e=t.state.selected_date_range;e.onClick?t.selectDateRange(e):"custom"===e.value&&t.selectCustomDateRange(),t.setState({applied_date_range:e,open:!1})},t.selectToday=function(){var e={duration:0,label:Object(u.localize)("Today")};t.selectDateRange(e,!0),t.setState({applied_date_range:e,selected_date_range:e,open:!1})},t.selectDate=function(e,n){var o;t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({selected_date_range:{value:"custom"}},n,(null===(o=e.target)||void 0===o?void 0:o.value)?Object(s.toMoment)(e.target.value).format("DD MMM YYYY"):""))},t.onDateRangeChange=function(e){var n=t.props.duration_list.find((function(t){return e&&t.value===e.value}))||e;t.setState({selected_date_range:n})},t.openDialog=function(){var e=t.state.applied_date_range;t.setState({open:!0,selected_date_range:e})};var n=t.props,o=n.duration_list,c=n.input_date_range,i=n.from,l=n.to,m=i&&Object(s.toMoment)(i).format("DD MMM YYYY"),p=i&&Object(s.toMoment)(l).format("DD MMM YYYY"),_=c||o.find((function(e){return"all_time"===e.value}));return t.state={from:m,to:p,applied_date_range:_,selected_date_range:_},t}return t=a,(n=[{key:"selectDateRange",value:function(e,t){var n=e.duration;this.props.onChange({from:t||n?Object(s.toMoment)().startOf("day").subtract(n,"day").add(1,"s").unix():null,to:Object(s.toMoment)().endOf("day").unix(),is_batch:!0},{date_range:e})}},{key:"selectCustomDateRange",value:function(){var e=this.state.selected_date_range,t=Object(s.toMoment)().format("DD MMM YYYY"),n=this.state,o=n.from,r=n.to;o=o||r||t,r=r||t;var a=Object.assign(e,{label:"".concat(o," - ").concat(r)});this.props.onChange({from:Object(s.toMoment)(o,"DD MMM YYYY").startOf("day").add(1,"s").unix(),to:Object(s.toMoment)(r,"DD MMM YYYY").endOf("day").unix(),is_batch:!0},{date_range:a})}},{key:"getMobileFooter",value:function(){var e=this;return c.createElement("div",{className:"composite-calendar-modal__actions"},c.createElement(l.Button,{className:"composite-calendar-modal__actions__cancel",text:Object(u.localize)("Cancel"),onClick:function(){return e.setState({open:!1})},has_effect:!0,secondary:!0,large:!0}),c.createElement(l.Button,{className:"composite-calendar-modal__actions__ok",text:Object(u.localize)("OK"),onClick:this.applyDateRange,has_effect:!0,primary:!0,large:!0}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,o=t.applied_date_range,r=t.selected_date_range,a=this.props.duration_list,i=Object(s.toMoment)().format("YYYY-MM-DD"),m=this.state.to?Object(s.toMoment)(this.state.to,"DD MMM YYYY").format("YYYY-MM-DD"):i,p=this.state.from&&Object(s.toMoment)(this.state.from,"DD MMM YYYY").format("YYYY-MM-DD");return c.createElement(c.Fragment,null,c.createElement("div",{className:"composite-calendar__input-fields composite-calendar__input-fields--fill"},c.createElement(ee.a,{id:"dt_calendar_input",is_read_only:!0,icon:function(){return c.createElement(l.Icon,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:this.openDialog,value:o.label})),c.createElement(l.MobileDialog,{portal_element_id:"modal_root",title:Object(u.localize)("Please select duration"),visible:n,has_content_scroll:!0,onClose:function(){return e.setState({open:!1})},content_height_offset:"94px",footer:this.getMobileFooter()},c.createElement("div",{className:"composite-calendar-modal"},c.createElement("div",{className:"composite-calendar-modal__radio-group"},a.map((function(t){return c.createElement(ie,{id:"composite-calendar-modal__radio__".concat(t.value),key:t.value,value:t.value,label:t.label,selected_value:r.value,onChange:e.onDateRangeChange})}))),c.createElement("div",{className:"composite-calendar-modal__custom"},c.createElement(ie,{id:"composite-calendar-modal__custom-radio",className:"composite-calendar-modal__custom-radio",value:"custom",label:Object(u.localize)("Custom"),selected_value:r.value,onChange:this.onDateRangeChange}),c.createElement("div",{className:"composite-calendar-modal__custom-date-range"},c.createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-start-date",is_nativepicker:!0,placeholder:Object(u.localize)("Start date"),value:this.state.from,max_date:m,onChange:function(t){return e.selectDate(t,"from")}}),c.createElement(l.DatePicker,{className:"composite-calendar-modal__custom-date-range-end-date",is_nativepicker:!0,placeholder:Object(u.localize)("End date"),value:this.state.to,max_date:i,min_date:p,onChange:function(t){return e.selectDate(t,"to")}}))),c.createElement(l.Button,{className:"composite-calendar-modal__actions-today",text:Object(u.localize)("Back to today"),onClick:this.selectToday,has_effect:!0,tertiary:!0,large:!0}))))}}])&&ne(t.prototype,n),o&&ne(t,o),a}(c.PureComponent);le.propTypes={duration_list:a.a.array,from:a.a.number,onChange:a.a.func,to:a.a.number};var se=le,ue=function(e){var t=e.onClick,n=e.is_active,o=e.label;return c.createElement("li",{className:y()({"composite-calendar__prepopulated-list--is-active":n}),onClick:t},o)};ue.propTypes={label:a.a.oneOfType([a.a.func,a.a.node,a.a.array]),is_active:a.a.bool,onClick:a.a.func};var me=ue;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var de=function(e){var t=e.items,n=e.from,o=e.to;return c.createElement("ul",{className:"composite-calendar__prepopulated-list"},t.map((function(e){var t=e.duration,r=_e(e,["duration"]),a=function(e,t,n){return 0===n?Object(s.toMoment)().endOf("day").unix()===t&&null===e:Math.ceil(t/86400)-Math.ceil(e/86400)===n}(n,o,t);return c.createElement(me,pe({key:t,is_active:a},r))})))};de.propTypes={items:a.a.array};var fe=de,be=function(e){var t=e.onClick;return c.createElement(l.Icon,{onClick:t,icon:"IcCalendarDatefrom",className:"inline-icon"})};be.propTypes={onClick:a.a.func};var ye=be;function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ke(e);if(t){var r=ke(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=$()({loader:function(){return n.e("two-month-picker").then(n.bind(null,"./App/Components/Form/CompositeCalendar/two-month-picker.jsx"))},loading:function(){return null},render:function(e,t){var n=e.default;return c.createElement(n,t)}}),Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,n,o,r=Ce(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={show_to:!1,show_from:!1,list:[{value:"all_time",label:Object(u.localize)("All time"),onClick:function(){return t.selectDateRange()},duration:0},{value:"last_7_days",label:Object(u.localize)("Last 7 days"),onClick:function(){return t.selectDateRange(7)},duration:7},{value:"last_30_days",label:Object(u.localize)("Last 30 days"),onClick:function(){return t.selectDateRange(30)},duration:30},{value:"last_60_days",label:Object(u.localize)("Last 60 days"),onClick:function(){return t.selectDateRange(60)},duration:60},{value:"last_quarter",label:Object(u.localize)("Last quarter"),onClick:function(){return t.selectDateRange(90)},duration:90}]},t.setWrapperRef=t.setWrapperRef.bind(je(t)),t.handleClickOutside=t.handleClickOutside.bind(je(t)),t}return t=a,(n=[{key:"selectDateRange",value:function(e){this.hideCalendar(),this.applyBatch({from:e?Object(s.toMoment)().startOf("day").subtract(e,"day").add(1,"s").unix():null,to:Object(s.toMoment)().endOf("day").unix(),is_batch:!0})}},{key:"hideCalendar",value:function(){this.setState({show_from:!1,show_to:!1})}},{key:"showCalendar",value:function(e){this.setState(ge({},"show_".concat(e),!0))}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),this.hideCalendar())}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setToDate",value:function(e){this.updateState("to",Object(s.epochToMoment)(e).endOf("day").unix())}},{key:"setFromDate",value:function(e){this.updateState("from",e),this.hideCalendar()}},{key:"updateState",value:function(e,t){this.apply(e,t),this.hideCalendar()}},{key:"applyBatch",value:function(e){this.props.onChange(e)}},{key:"apply",value:function(e,t){this.applyBatch(ge({},e,t))}},{key:"isPeriodDisabledTo",value:function(e){return e+1<=this.props.from||e>Object(s.toMoment)().endOf("day").unix()}},{key:"isPeriodDisabledFrom",value:function(e){return e-1>=this.props.to}},{key:"render",value:function(){var e=this.state,t=e.show_from,n=e.show_to,o=e.list,r=this.props,a=r.to,i=r.from;return c.createElement(c.Fragment,null,c.createElement(l.DesktopWrapper,null,c.createElement("div",{id:"dt_composite_calendar_inputs",className:"composite-calendar__input-fields"},c.createElement(ee.a,{id:"dt_calendar_input_from",is_read_only:!0,placeholder:Object(u.localize)("Date from"),icon:ye,onClick:this.showCalendar.bind(this,"from"),value:this.from_date_label}),c.createElement(ee.a,{id:"dt_calendar_input_to",is_read_only:!0,placeholder:Object(u.localize)("Date to"),icon:ye,onClick:this.showCalendar.bind(this,"to"),value:this.to_date_label})),n&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(fe,{from:i,to:a,items:o}),c.createElement(De,{value:a,onChange:this.setToDate.bind(this),isPeriodDisabled:this.isPeriodDisabledTo.bind(this)})),t&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(fe,{from:i,to:a,items:o}),c.createElement(De,{value:i,onChange:this.setFromDate.bind(this),isPeriodDisabled:this.isPeriodDisabledFrom.bind(this)}))),c.createElement(l.MobileWrapper,null,c.createElement(se,ve({duration_list:this.state.list},this.props))))}},{key:"to_date_label",get:function(){var e=Object(s.epochToMoment)(this.props.to);return 0===Object(s.daysFromTodayTo)(e)?Object(u.localize)("Today"):e.format("MMM, DD YYYY")}},{key:"from_date_label",get:function(){var e=Object(s.epochToMoment)(this.props.from);return this.props.from?e.format("MMM, DD YYYY"):""}}])&&Ee(t.prototype,n),o&&Ee(t,o),a}(c.PureComponent);Me.propTypes={from:a.a.number,onChange:a.a.func,to:a.a.number};var Re=Me,Ne=n("./Constants/index.js"),xe=function(e){var t=e.filter_component,n=e.className,o=e.optional_component;return c.createElement("div",{className:y()("reports__meta",n)},o,t&&c.createElement("div",{className:"reports__meta-filter"},t))};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ie(e);if(t){var r=Ie(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(a,e);var t,n,o,r=Le(a);function a(){var e;ze(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).mobileRowRenderer=function(t){var n=t.row,o=t.is_footer,r=Object(_.a)(n.longcode,n.shortcode),a="duration-type__".concat(r.toLowerCase());return o?c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.action_type,is_footer:o}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit_loss,is_footer:o})):c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.action_type}),c.createElement("div",{className:y()("duration-type",a)},c.createElement("div",{className:y()("duration-type__background","".concat(a,"__background"))}),c.createElement("span",{className:"".concat(a,"__label")},Object(u.localize)(r)))),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.transaction_id}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.currency})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.purchase_time}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.buy_price})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.sell_time}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.sell_price})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.profit_loss})))},e.getRowAction=function(e){return Object(Ne.c)()[Object(s.extractInfoFromShortcode)(e.shortcode).category.toUpperCase()]?Object(p.b)(e.contract_id):{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/profit_tablews",{legacy:!0})})]})}},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.component_icon,n=e.currency,o=e.data,r=e.date_from,a=e.date_to,i=e.filtered_date_range,p=e.is_empty,_=e.is_loading,d=e.error,b=e.handleDateChange,y=e.handleScroll,h=e.has_selected_date,v=e.totals;if(d)return c.createElement("p",null,d);var g=c.createElement(Re,{input_date_range:i,onChange:b,from:r,to:a});return this.columns=function(e,t){return[{key:"icon",title:Object(s.isMobile)()?"":Object(u.localize)("Type"),col_index:"action_type",renderCellContent:function(e){var n=e.cell_value,o=e.row_obj;return e.is_footer?Object(u.localize)("Profit/loss on the last {{item_count}} contracts",{item_count:t}):c.createElement(S,{action:n,key:o.transaction_id,payload:o})}},{title:Object(u.localize)("Ref. ID"),col_index:"transaction_id"},{title:Object(u.localize)("Currency"),col_index:"currency",renderCellContent:function(t){return t.is_footer?"":Object(s.getCurrencyDisplayCode)(e)}},{title:Object(u.localize)("Buy time"),col_index:"purchase_time",renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{title:Object(u.localize)("Buy price"),col_index:"buy_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Sell time"),col_index:"sell_time",renderHeader:function(e){var t=e.title;return c.createElement("span",null,t)},renderCellContent:function(e){var t=e.cell_value;return e.is_footer?"":c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{title:Object(u.localize)("Sell price"),col_index:"sell_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(l.Money,{amount:n,currency:e})}},{title:Object(u.localize)("Profit/Loss"),col_index:"profit_loss",renderCellContent:function(t){var n=t.cell_value;return c.createElement(T,{value:n},c.createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}}]}(n,o.length),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(xe,{filter_component:g,className:"profit-table__filter"}),this.props.is_switching?c.createElement(I,{is_loading:!0}):c.createElement(c.Fragment,null,0===o.length||p?c.createElement(I,{is_loading:_,has_selected_date:h,is_empty:p,empty_message_component:f,component_icon:t,localized_message:Object(u.localize)("You have no trading activity yet."),localized_period_message:Object(u.localize)("You have no trading activity for this period.")}):c.createElement(l.ThemedScrollbars,{className:"reports__scrollbar",is_bypassed:Object(s.isMobile)(),is_only_horizontal:!0},c.createElement(l.DesktopWrapper,null,c.createElement(l.DataTable,{className:"profit-table",data_source:o,columns:this.columns,onScroll:y,footer:v,is_empty:p,getRowAction:this.getRowAction,custom_width:"100%",getRowSize:function(){return 63},content_loader:m.b},c.createElement(I,{is_loading:_}))),c.createElement(l.MobileWrapper,null,c.createElement(l.DataList,{className:"profit-table",data_source:o,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:y,footer:v,custom_width:"100%",getRowSize:function(){return 234}},c.createElement(I,{is_loading:_}))))))}}])&&Te(t.prototype,n),o&&Te(t,o),a}(c.Component);Ae.propTypes={component_icon:a.a.string,currency:a.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:a.a.number,date_to:a.a.number,error:a.a.string,filtered_date_range:a.a.object,handleDateChange:a.a.func,handleScroll:a.a.func,has_selected_date:a.a.bool,history:a.a.object,is_empty:a.a.bool,is_loading:a.a.bool,is_switching:a.a.bool,onMount:a.a.func,onUnmount:a.a.func,totals:a.a.object};var Fe=Object(h.b)((function(e){var t=e.modules,n=e.client;return{currency:n.currency,is_switching:n.is_switching,data:t.profit_table.data,date_from:t.profit_table.date_from,date_to:t.profit_table.date_to,error:t.profit_table.error,filtered_date_range:t.profit_table.filtered_date_range,handleScroll:t.profit_table.handleScroll,handleDateChange:t.profit_table.handleDateChange,has_selected_date:t.profit_table.has_selected_date,is_empty:t.profit_table.is_empty,is_loading:t.profit_table.is_loading,onMount:t.profit_table.onMount,onUnmount:t.profit_table.onUnmount,totals:t.profit_table.totals}}))(Object(X.withRouter)(Ae));function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ge(e);if(t){var r=Ge(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(a,e);var t,n,o,r=Ve(a);function a(){var e;Ue(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).mobileRowRenderer=function(t){var n=t.row;return c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.icon}),c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.action_type})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.refid}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.currency})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.date}),c.createElement(l.DataList.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.amount})),c.createElement("div",{className:"data-list__row"},c.createElement(l.DataList.Cell,{row:n,column:e.columns_map.balance})))},e.getRowAction=function(e){var t;return e.id&&["buy","sell"].includes(e.action_type)?t=Object(Ne.c)()[Object(s.extractInfoFromShortcode)(e.shortcode).category.toUpperCase()]?Object(p.b)(e.id):{component:c.createElement(u.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:s.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(s.urlFor)("user/statementws",{legacy:!0})})]})}:e.desc&&["deposit","withdrawal","adjustment"].includes(e.action_type)&&(t={message:e.desc}),t},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"getAccountStatistics",value:function(){var e=this.props,t=e.account_statistics,n=e.currency;return c.createElement(c.Fragment,null,c.createElement("div",{className:"statement__account-statistics"},c.createElement("div",{className:"statement__account-statistics-item"},c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Total deposits")," ","(".concat(n,")")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:t.total_deposits,currency:n})))),c.createElement("div",{className:"statement__account-statistics-item statement__account-statistics-total-withdrawal"},c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Total withdrawals")," ","(".concat(n,")")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:t.total_withdrawals,currency:n})))),c.createElement("div",{className:"statement__account-statistics-item"},c.createElement("div",{className:"statement__account-statistics--is-rectangle"},c.createElement("span",{className:"statement__account-statistics-title"},Object(u.localize)("Net deposits")," ","(".concat(n,")")),c.createElement("span",{className:"statement__account-statistics-amount"},c.createElement(l.Money,{amount:t.total_deposits-t.total_withdrawals,currency:n}))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.component_icon,o=t.currency,r=t.data,a=t.date_from,i=t.date_to,p=t.is_empty,_=t.is_loading,d=t.is_mx_mlt,b=t.is_switching,y=t.error,h=t.filtered_date_range,v=t.handleScroll,g=t.handleDateChange,E=t.has_selected_date;if(y)return c.createElement("p",null,y);var C=c.createElement(c.Fragment,null,c.createElement(Re,{input_date_range:h,onChange:g,from:a,to:i}));return this.columns=function(e){return[{key:"icon",title:Object(s.isMobile)()?"":Object(u.localize)("Type"),col_index:"icon",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return c.createElement(S,{action:t,key:n.transaction_id,payload:n})}},{title:Object(u.localize)("Ref. ID"),col_index:"refid"},{title:Object(u.localize)("Currency"),col_index:"currency",renderCellContent:function(){return Object(s.getCurrencyDisplayCode)(e)}},{title:Object(u.localize)("Transaction time"),col_index:"date",renderCellContent:function(e){var t=e.cell_value;return c.createElement("span",null,t," ",Object(u.localize)("GMT"))}},{key:"mode",title:Object(u.localize)("Transaction"),col_index:"action_type",renderCellContent:function(e){var t,n,o=e.cell_value,r=e.row_obj;return c.createElement(l.Label,{mode:(t=o,n={buy:"success",deposit:"success",hold:"warn",release:"success",sell:"danger",withdrawal:"info",default:"default",adjustment:"adjustment"},Object.keys(n).find((function(e){return e===t}))?n[t]:n.default)},r.action)}},{title:Object(u.localize)("Credit/Debit"),col_index:"amount",renderCellContent:function(t){var n=t.cell_value;return c.createElement("div",{className:"amount--".concat(w(n))},c.createElement(l.Money,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}},{title:Object(u.localize)("Balance"),col_index:"balance",renderCellContent:function(t){var n=t.cell_value;return c.createElement(l.Money,{amount:n.replace(/[,]+/g,""),currency:e})}}]}(o),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(xe,{className:d?void 0:"reports__meta--statement",filter_component:C,optional_component:!b&&d&&this.getAccountStatistics()}),b?c.createElement(I,{is_loading:!0}):c.createElement(c.Fragment,null,0===r.length||p?c.createElement(I,{is_loading:_,has_selected_date:E,is_empty:p,empty_message_component:f,component_icon:n,localized_message:Object(u.localize)("You have no transactions yet."),localized_period_message:Object(u.localize)("You have no transactions for this period.")}):c.createElement(l.ThemedScrollbars,{className:"reports__scrollbar",is_bypassed:Object(s.isMobile)(),is_only_horizontal:!0},c.createElement(l.DesktopWrapper,null,c.createElement(l.DataTable,{className:"statement",data_source:r,columns:this.columns,onScroll:v,getRowAction:function(t){return e.getRowAction(t)},is_empty:p,custom_width:"100%",getRowSize:function(){return 63},content_loader:m.b},c.createElement(I,{is_loading:_}))),c.createElement(l.MobileWrapper,null,c.createElement(l.DataList,{className:"statement",data_source:r,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:v,custom_width:"100%",getRowSize:function(){return 186}},c.createElement(I,{is_loading:_}))))))}}])&&We(t.prototype,n),o&&We(t,o),a}(c.Component);Je.propTypes={component_icon:a.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:a.a.number,date_to:a.a.number,error:a.a.string,filtered_date_range:a.a.object,handleScroll:a.a.func,has_selected_date:a.a.bool,history:a.a.object,is_empty:a.a.bool,is_loading:a.a.bool,is_switching:a.a.bool,is_mx_mlt:a.a.bool,onMount:a.a.func,onUnmount:a.a.func};var Ke=Object(h.b)((function(e){var t=e.modules,n=e.client;return{currency:n.currency,is_mx_mlt:n.standpoint.iom||n.standpoint.malta,account_statistics:t.statement.account_statistics,date_from:t.statement.date_from,date_to:t.statement.date_to,data:t.statement.data,error:t.statement.error,filtered_date_range:t.statement.filtered_date_range,handleScroll:t.statement.handleScroll,handleDateChange:t.statement.handleDateChange,has_selected_date:t.statement.has_selected_date,is_empty:t.statement.is_empty,is_loading:t.statement.is_loading,is_switching:n.is_switching,onMount:t.statement.onMount,onUnmount:t.statement.onUnmount}}))(Object(i.withRouter)(Je));n("./sass/app/modules/reports.scss");function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=nt(e);if(t){var r=nt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(a,e);var t,n,o,r=et(a);function a(){var e;Xe(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).onClickClose=function(){return e.props.routeBackInApp(e.props.history)},e.handleRouteChange=function(t){e.props.history.push(t.target.value)},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.toggleReports(!0)}},{key:"componentWillUnmount",value:function(){this.props.setVisibilityRealityCheck(1),this.props.toggleReports(!1)}},{key:"render",value:function(){var e=this,t=function(){var t=[];return e.props.routes.forEach((function(e){t.push({default:e.default,icon:e.icon_component,label:e.getTitle(),value:e.component,path:e.path})})),t},n=this.props,o=n.routes,r=n.location,a=Object(s.getSelectedRoute)({routes:o,pathname:r.pathname});return c.createElement(l.FadeWrapper,{is_visible:this.props.is_visible,className:"reports-page-wrapper",keyname:"reports-page-wrapper"},c.createElement("div",{className:"reports"},c.createElement(l.PageOverlay,{header:Object(u.localize)("Reports"),onClickClose:this.onClickClose},c.createElement(l.DesktopWrapper,null,c.createElement(l.VerticalTab,{alignment:"center",id:"report",is_floating:!0,classNameHeader:"reports__tab-header",current_path:this.props.location.pathname,is_routed:!0,is_full_width:!0,setVerticalTabIndex:this.props.setTabIndex,vertical_tab_index:a.default?0:this.props.tab_index,list:t()})),c.createElement(l.MobileWrapper,null,c.createElement(l.Div100vhContainer,{className:"reports__mobile-wrapper",height_offset:"80px"},c.createElement(l.SelectNative,{className:"reports__route-selection",list_items:t().map((function(e){return{text:e.label,value:e.path}})),value:a.path,should_show_empty_option:!1,onChange:this.handleRouteChange}),a&&c.createElement(a.component,{component_icon:a.icon_component}))))))}}])&&Ze(t.prototype,n),o&&Ze(t,o),a}(c.Component);ot.propTypes={history:a.a.object,is_visible:a.a.bool,location:a.a.object,routes:a.a.arrayOf(a.a.object),setTabIndex:a.a.func,setVisibilityRealityCheck:a.a.func,tab_index:a.a.number,toggleReports:a.a.func};var rt=Object(h.b)((function(e){var t=e.client,n=e.common,o=e.ui;return{setVisibilityRealityCheck:t.setVisibilityRealityCheck,routeBackInApp:n.routeBackInApp,is_visible:o.is_reports_visible,setTabIndex:o.setReportsTabIndex,tab_index:o.reports_route_tab_index,toggleReports:o.toggleReports}}))(Object(i.withRouter)(ot));t.default={OpenPositions:Q,ProfitTable:Fe,Statement:Ke,Reports:rt}},"./sass/app/modules/reports.scss":function(e,t,n){},"./templates/_common/components/loading.jsx":function(e,t,n){"use strict";var o=n("../node_modules/classnames/index.js"),r=n.n(o),a=n("react");t.a=function(e){var t=e.className,n=e.is_invisible,o=e.theme,c=e.id;return a.createElement("div",{id:c,className:r()("barspinner","barspinner--".concat(o||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return a.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.reports.1698440c57820f489adc.js.map