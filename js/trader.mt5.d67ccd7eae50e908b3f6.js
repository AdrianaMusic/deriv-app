(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["mt5"],{"./Modules/MT5/index.js":function(e,t,a){"use strict";a.r(t),a.d(t,"MT5PasswordModal",(function(){return S})),a.d(t,"MT5ServerErrorDialog",(function(){return M})),a.d(t,"default",(function(){return Sa}));var n=a("../../../node_modules/formik/dist/formik.esm.js"),r=a("../../../node_modules/prop-types/index.js"),o=a.n(r),i=a("react"),c=a("react-router"),s=a("@deriv/components"),l=a("@deriv/shared"),u=a("@deriv/translations"),d=a("../../../node_modules/classnames/index.js"),m=a.n(d),_=function(e){var t=e.classNameMessage,a=void 0===t?void 0:t,n=e.has_cancel,r=e.has_submit,o=e.icon,c=e.message,l=e.onCancel,d=e.onSubmit,_=e.heading,p=e.icon_size,f=e.text_submit,b=e.text_cancel,g=e.is_open,h=e.toggleModal,y=e.title,v=e.has_close_icon,w=e.width,E=void 0===w?void 0:w,O=function(){return o||null},j=function(e){var t=e.className;return i.createElement(s.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})};return i.createElement(s.Modal,{className:"mt5-success-dialog",is_open:g,toggleModal:h,has_close_icon:v,small:!y,title:y,width:E},i.createElement(s.Modal.Body,null,i.createElement("div",{className:m()("success-change__icon-area",{"success-change__icon-area--large":"large"===p,"success-change__icon-area--xlarge":"xlarge"===p})},i.createElement(O,null),i.createElement(j,{className:"bottom-right-overlay"})),!_&&i.createElement("h2",{className:"dc-modal-header__title"},i.createElement(u.Localize,{i18n_default_text:"Success!"})),_&&_,i.isValidElement(c)&&c,!i.isValidElement(c)&&i.createElement("p",{className:a},c)),i.createElement(s.Modal.Footer,null,n&&i.createElement(s.Button,{onClick:l,has_effect:!0,text:b||Object(u.localize)("Maybe later"),secondary:!0,large:!0}),r&&i.createElement(s.Button,{has_effect:!0,onClick:d,text:f,primary:!0,large:!0})))};_.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},_.propTypes={classNameMessage:o.a.string,has_cancel:o.a.bool,has_submit:o.a.bool,heading:o.a.oneOfType([o.a.string,o.a.object]),icon:o.a.object,icon_size:o.a.string,icon_type:o.a.string,message:o.a.oneOfType([o.a.string,o.a.object]),onCancel:o.a.func,onSubmit:o.a.func,text_submit:o.a.string};var p=_,f=(a("./sass/app/modules/mt5/mt5.scss"),a("./Stores/connect.js"));function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var E=function(e,t){return"real"===t?Object(u.localize)("You have created a DMT5 {{account_title}} account. To start trading, transfer funds from your Deriv account into this account.",{account_title:e}):Object(u.localize)("You have created a DMT5 {{account_title}} account.",{account_title:e})},O=function(e){return i.createElement(n.c,{initialValues:{password:""},validate:e.validatePassword,onSubmit:function(t){return e.submitMt5Password(t.password)}},(function(t){var a=t.handleSubmit,n=t.setFieldTouched,r=t.handleChange,o=t.handleBlur,c=t.errors,d=t.values,m=t.touched;return i.createElement("form",{onSubmit:a},i.createElement("div",{className:"mt5-password-modal__content"},i.createElement("h2",{className:"mt5-password-modal__title"},i.createElement(u.Localize,{i18n_default_text:"Choose a password for your DMT5 {{ account_type }} account",values:{account_type:e.account_title}})),i.createElement("div",{className:"dc-modal__container_mt5-password-modal__body"},i.createElement("div",{className:"input-element"},i.createElement(s.PasswordMeter,{input:d.password,has_error:!(!m.password||!c.password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var t=e.has_warning;return i.createElement(s.PasswordInput,{autoComplete:"new-password",label:Object(u.localize)("Create a password"),error:m.password&&c.password,hint:!t&&Object(u.localize)("Minimum of eight lower and uppercase English letters with numbers"),name:"password",value:d.password,onBlur:o,onChange:function(e){n("password",!0),r(e)}})}))),e.is_real_financial_stp&&i.createElement("div",{className:"dc-modal__container_mt5-password-modal__description"},i.createElement(u.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA). All other accounts, including your Deriv account, are not subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA)."})))),i.createElement(s.FormSubmitButton,{is_disabled:!d.password||Object.keys(c).length>0,has_cancel:!0,cancel_label:Object(u.localize)("Cancel"),onCancel:e.closeModal,is_absolute:Object(l.isMobile)(),is_loading:e.is_submitting,label:e.should_show_server_form?Object(u.localize)("Next"):Object(u.localize)("Add account"),form_error:e.form_error}))}))},j=function(e){var t,a,r=w({},e),o=i.useMemo((function(){return r.trading_servers.filter((function(e){return!e.disabled})).map((function(e){var t=r.mt5_login_list.some((function(t){return t.server===e.id}));return y(y({},e),{label:"".concat(e.geolocation.region," ").concat(1===e.geolocation.sequence?"":e.geolocation.sequence," ").concat(t?"(Account created)":""),value:e.id,disabled:t})})).sort((function(e,t){return e.recommended?e:t}))}),[r.trading_servers]);return i.createElement(n.c,{initialValues:{password:r.password,server:null!==(t=null===(a=r.trading_servers.find((function(e){return!e.disabled&&!r.mt5_login_list.some((function(t){return t.server===e.id}))})))||void 0===a?void 0:a.id)&&void 0!==t?t:""},validate:r.validateServer,onSubmit:function(e,t){r.submitMt5Form({password:e.password,server:e.server},t.setSubmitting)}},(function(e){var t,a=e.handleSubmit,n=e.setFieldValue,c=e.errors,d=e.values,m=e.isSubmitting;return i.createElement("form",{onSubmit:a},i.createElement("div",{className:"mt5-password-modal__content"},i.createElement("h2",null,i.createElement(u.Localize,{i18n_default_text:"Choose a server for your DMT5 {{ account_type }} account",values:{account_type:r.account_title}})),i.createElement("div",{className:"dc-modal__container_mt5-password-modal__body"},i.createElement("div",{className:"input-element"},i.createElement(s.RadioGroup,{className:"mt5-password-modal__radio",name:"server",required:!0,selected:null===(t=r.trading_servers.find((function(e){return!e.disabled&&!r.mt5_login_list.some((function(t){return t.server===e.id}))})))||void 0===t?void 0:t.id,onToggle:function(e){e.persist(),n("server",e.target.value)},items:o})))),i.createElement(s.FormSubmitButton,{is_disabled:m||!d.server||Object.keys(c).length>0,has_cancel:!0,cancel_label:Object(u.localize)("Back"),onCancel:r.onBack,is_absolute:Object(l.isMobile)(),is_loading:m,label:Object(u.localize)("Add account"),form_error:r.form_error}))}))},z=function(e){var t=e.account_title,a=e.account_type,n=e.disableMt5PasswordModal,r=e.email,o=e.is_eu,c=e.is_eu_country,d=e.is_logged_in,m=e.form_error,_=e.history,f=e.has_mt5_error,g=e.is_mt5_password_modal_enabled,h=e.is_mt5_success_dialog_enabled,y=e.setMt5SuccessDialog,v=e.setMt5Error,w=e.submitMt5Password,z=e.trading_servers,S=e.mt5_login_list,x=b(i.useState(""),2),M=x[0],N=x[1],P=b(i.useState(!1),2),k=P[0],A=P[1],T=function(e){var t={};return Object(l.validLength)(e.password,{min:8,max:25})?Object(l.validPassword)(e.password)||(t.password=Object(l.getErrorMessages)().password()):t.password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.password.toLowerCase()===r.toLowerCase()&&(t.password=Object(u.localize)("Your password cannot be the same as your email address.")),t},C=function(){y(!1),v(!1),N("")},D=function(){C(),n()},I=function(){return function(e){switch(e){case"synthetic":return i.createElement(s.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return i.createElement(s.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return i.createElement(s.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}(a.type)},L=g&&!f&&!h,F=!f&&h,R="real_financial_stp"===[a.category,a.type].join("_"),B="real_synthetic"===[a.category,a.type].join("_"),W=(d?!o:!c)&&B&&!!M;return i.useEffect((function(){W||!M||k?k&&M&&d&&w({password:M},(function(e){N(""),A(e)})):A(!0)}),[M,W,k]),i.useEffect((function(){(f||h)&&N("")}),[f,h]),i.createElement(i.Fragment,null,i.createElement(s.DesktopWrapper,null,i.createElement(s.Modal,{className:"mt5-password-modal",is_open:L,toggleModal:D,has_close_icon:!0},W?i.createElement(j,{trading_servers:z,mt5_login_list:S,account_title:t,password:M,submitMt5Form:function(e,t){return w(e,t)},onBack:function(){return N("")}}):i.createElement(O,{is_submitting:k,account_title:t,closeModal:D,form_error:m,submitMt5Password:N,is_real_financial_stp:R,validatePassword:T,should_show_server_form:W}))),i.createElement(s.MobileWrapper,null,i.createElement(s.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:L,onClose:D,wrapper_classname:"mt5-password-modal"},W?i.createElement(j,{trading_servers:z,mt5_login_list:S,account_title:t,password:M,submitMt5Form:function(e,t){return w(e,t)},onBack:function(){return N("")}}):i.createElement(O,{is_submitting:k,account_title:t,closeModal:D,form_error:m,is_real_financial_stp:R,submitMt5Password:N,validatePassword:T,should_show_server_form:W}))),i.createElement(p,{is_open:F,toggleModal:D,onCancel:D,onSubmit:function(){n(),C(),"real"===a.category&&_.push(l.routes.cashier_acc_transfer)},classNameMessage:"mt5-password-modal__message",message:E(t,a.category),icon:i.createElement(I,null),icon_size:"xlarge",text_submit:"real"===a.category?Object(u.localize)("Transfer now"):Object(u.localize)("OK"),has_cancel:"real"===a.category}))};z.propTypes={account_title:o.a.string,account_type:o.a.object,disableMt5PasswordModal:o.a.func,email:o.a.string,error_message:o.a.string,has_mt5_error:o.a.bool,is_eu:o.a.bool,is_eu_country:o.a.bool,is_logged_in:o.a.bool,is_mt5_password_modal_enabled:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool,setMt5Error:o.a.func,setMt5SuccessDialog:o.a.func,submitMt5Password:o.a.func};var S=Object(f.b)((function(e){var t=e.client,a=e.modules;return{email:t.email,account_title:a.mt5.account_title,account_type:a.mt5.account_type,disableMt5PasswordModal:a.mt5.disableMt5PasswordModal,error_message:a.mt5.error_message,has_mt5_error:a.mt5.has_mt5_error,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_mt5_success_dialog_enabled:a.mt5.is_mt5_success_dialog_enabled,is_mt5_password_modal_enabled:a.mt5.is_mt5_password_modal_enabled,setMt5Error:a.mt5.setError,setMt5SuccessDialog:a.mt5.setMt5SuccessDialog,submitMt5Password:a.mt5.submitMt5Password,trading_servers:t.trading_servers,mt5_login_list:t.mt5_login_list}}))(Object(c.withRouter)(z)),x=function(e){var t=e.clearMt5Error,a=e.disableApp,n=e.enableApp,r=e.error_message,o=e.has_mt5_error,c=e.is_mt5_success_dialog_enabled,l=o&&!c;return i.createElement(s.Dialog,{title:Object(u.localize)("Something’s not right"),confirm_button_text:Object(u.localize)("OK"),onConfirm:t,disableApp:a,enableApp:n,is_visible:l},r||i.createElement(u.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))};x.propTypes={clearMt5Error:o.a.func,disableApp:o.a.func,enableApp:o.a.func,error_message:o.a.string,has_mt5_error:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool};var M=Object(f.b)((function(e){var t=e.ui,a=e.modules;return{clearMt5Error:a.mt5.clearMt5Error,disableApp:t.disableApp,enableApp:t.enableApp,error_message:a.mt5.error_message,has_mt5_error:a.mt5.has_mt5_error,is_mt5_success_dialog_enabled:a.mt5.is_mt5_success_dialog_enabled}}))(x),N=a("./templates/_common/components/loading.jsx"),P=function(){return i.createElement("div",{className:"mt5-real-accounts-display"},i.createElement(N.a,null))},k=function(e){var t=e.onClickSignup;return i.createElement("div",{className:"mt5-dashboard__missing-real"},i.createElement("h1",{className:"mt5-dashboard__missing-real--heading"},i.createElement(u.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."})),i.createElement(s.Button,{className:"mt5-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},i.createElement("span",{className:"btn__text"},i.createElement(u.Localize,{i18n_default_text:"Create a Deriv account"}))))};k.propTypes={onClickSignup:o.a.func};var A=k,T=a("./Services/ws-methods.js"),C=a("@deriv/account/dist/js/file-uploader-container"),D=a.n(C),I=a("@deriv/account/dist/js/form-sub-header"),L=a.n(I),F=a("@deriv/account/dist/js/poa-expired"),R=a.n(F),B=a("@deriv/account/dist/js/poa-needs-review"),W=a.n(B),U=a("@deriv/account/dist/js/poa-verified"),q=a.n(U),V=a("@deriv/account/dist/js/poa-unverified"),H=a.n(V),Y=a("@deriv/account/dist/js/poa-submitted"),$=a.n(Y),K=a("@deriv/account/dist/js/poa-status-codes"),X=a.n(K);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ae=function(e){var t=e.maxLength,a=e.name,r=e.optional,o=void 0!==r&&r,c=te(e,["maxLength","name","optional"]);return i.createElement(n.a,{name:a},(function(e){var n=e.field,r=e.form,l=r.errors,u=r.touched;return i.createElement(s.Input,ee({type:"text",required:!o,name:a,autoComplete:"off",maxLength:t||"30",error:u[n.name]&&l[n.name]},n,c))}))},ne=function(e){var t,a=e.values,n=e.residence_list,r=e.account_opening_reason,o=e.is_tin_required,c=J(n.filter((function(e){return e.text===a.tax_residence&&e.tin_format})),1)[0],s=J(null!==(t=null==c?void 0:c.tin_format)&&void 0!==t?t:[],1)[0],l=s||"^[A-Za-z0-9./s-]{0,25}$",d={citizen:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!a.tax_residence&&o||s)||!!e},function(e){return!l||e.match(l)}],account_opening_reason:[function(e){return!!e},function(e){return r.map((function(e){return e.value})).includes(e)}]},m={citizen:Object(u.localize)("Citizenship"),tax_residence:Object(u.localize)("Tax residence"),tax_identification_number:Object(u.localize)("Tax identification number"),account_opening_reason:Object(u.localize)("Account opening reason")},_={};return Object.entries(d).forEach((function(e){var t,n=J(e,2),r=n[0],o=n[1].findIndex((function(e){return!e(a[r])}));-1!==o&&(_[r]=i.createElement(i.Fragment,null,(t=m[r],[Object(u.localize)("{{field_name}} is required",{field_name:t}),Object(u.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o]))})),_},re=function(e,t,a,n,r,o){var i=e.citizen,c=e.tax_residence,s=te(e,["citizen","tax_residence"]),l=function(e,t,a){var n,r;return a.forEach((function(a){a.text===e&&(n=a),a.text===t&&(r=a)})),{citizen:n,tax_residence:r}}(i,c,o),u=l.citizen,d=l.tax_residence;n(a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({citizen:void 0!==u?u.value:"",tax_residence:void 0!==d?d.value:""},s),t.setSubmitting,r)},oe=function(e){var t,a,r=e.onSave,o=e.is_fully_authenticated,c=e.is_loading,d=e.landing_company,m=e.residence_list,_=e.onCancel,p=e.onSubmit,f=e.value,b=e.index,g=e.form_error,h=[{text:Object(u.localize)("Hedging"),value:"Hedging"},{text:Object(u.localize)("Income Earning"),value:"Income Earning"},{text:Object(u.localize)("Speculative"),value:"Speculative"},{text:Object(u.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],y=null!==(t=null==d||null===(a=d.config)||void 0===a?void 0:a.tax_details_required)&&void 0!==t&&t,v=function(e){r(b,e),_()};return 0===m.length||c?i.createElement(s.Loading,{is_fullscreen:!1}):i.createElement(n.c,{initialValues:{citizen:f.citizen,tax_residence:f.tax_residence,tax_identification_number:f.tax_identification_number,account_opening_reason:f.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return ne({values:e,residence_list:m,account_opening_reason:h,is_tin_required:y})},onSubmit:function(e,t){return re(e,t,b,p,!Object(l.isDeepEqual)(f,e),m)}},(function(e){var t=e.handleSubmit,a=e.isSubmitting,r=e.handleChange,c=e.handleBlur,d=e.errors,_=e.touched,p=e.values,b=e.setFieldValue,y=e.isValid;return i.createElement(s.AutoHeightWrapper,{default_height:200,height_offset:Object(l.isDesktop)()?148:null},(function(e){var w=e.height,E=e.setRef;return i.createElement("form",{className:"mt5-financial-stp-modal__form",ref:E,onSubmit:t,autoComplete:"off"},i.createElement(s.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:Object(l.isDesktop)()},i.createElement("p",{className:"details-form__description"},i.createElement(u.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),i.createElement(s.ThemedScrollbars,{height:w,is_bypassed:Object(l.isMobile)()},i.createElement("div",{className:"details-form__elements"},i.createElement(L.a,{title:Object(u.localize)("Details")}),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(s.DesktopWrapper,null,i.createElement(n.a,{name:"citizen"},(function(e){var t=e.field;return i.createElement(s.Autocomplete,ee({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:Object(u.localize)("Citizenship"),error:_.citizen&&d.citizen,disabled:f.citizen&&o,list_items:m,onItemSelection:function(e){return b("citizen",e.value?e.text:"",!0)},list_portal_id:"modal_root",required:!0}))}))),i.createElement(s.MobileWrapper,null,i.createElement(s.SelectNative,{placeholder:Object(u.localize)("Please select"),label:Object(u.localize)("Citizenship"),value:p.citizen,list_items:m,error:_.citizen&&d.citizen,disabled:f.citizen&&o,use_text:!0,onChange:function(e){return b("citizen",e.target.value,!0)},required:!0}))),i.createElement(L.a,{title:Object(u.localize)("Tax information")}),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(s.DesktopWrapper,null,i.createElement(n.a,{name:"tax_residence"},(function(e){var t=e.field;return i.createElement(s.Autocomplete,ee({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:Object(u.localize)("Tax residence"),error:_.tax_residence&&d.tax_residence,disabled:f.tax_residence&&o,list_items:m,onItemSelection:function(e){var t=e.value,a=e.text;return b("tax_residence",t?a:"",!0)},list_portal_id:"modal_root"},t))}))),i.createElement(s.MobileWrapper,null,i.createElement(s.SelectNative,{placeholder:Object(u.localize)("Please select"),label:Object(u.localize)("Tax residence"),value:p.tax_residence,error:_.tax_residence&&d.tax_residence,disabled:f.tax_residence&&o,list_items:m,use_text:!0,onChange:function(e){return b("tax_residence",e.target.value,!0)},required:!0}))),i.createElement("fieldset",{className:"account-form__fieldset"},i.createElement(ae,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:Object(u.localize)("Tax identification number"),placeholder:Object(u.localize)("Tax identification number"),value:p.tax_identification_number,onBlur:c,optional:!0})),i.createElement(L.a,{title:Object(u.localize)("Account opening reason")}),i.createElement(n.a,{name:"account_opening_reason"},(function(e){var t=e.field;return i.createElement(i.Fragment,null,i.createElement(s.DesktopWrapper,null,i.createElement(s.Dropdown,ee({placeholder:Object(u.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:h,value:p.account_opening_reason,onChange:r,handleBlur:c,error:_.account_opening_reason&&d.account_opening_reason,list_portal_id:"modal_root"},t))),i.createElement(s.MobileWrapper,null,i.createElement(s.SelectNative,ee({placeholder:Object(u.localize)("Please select"),name:t.name,label:Object(u.localize)("Account opening reason"),list_items:h,value:p.account_opening_reason,error:_.account_opening_reason&&d.account_opening_reason,onChange:function(e){r(e),b("account_opening_reason",e.target.value,!0)}},t))))}))))),i.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},g&&i.createElement(s.FormSubmitErrorMessage,{message:g}),i.createElement(s.FormSubmitButton,{cancel_label:Object(u.localize)("Previous"),is_disabled:a||!y,is_absolute:Object(l.isMobile)(),label:Object(u.localize)("Next"),onCancel:function(){return v(p)}})))}))}))};oe.propTypes={is_fully_authenticated:o.a.bool,is_loading:o.a.bool,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,residence_list:o.a.array,value:o.a.object,landing_company:o.a.object.isRequired};var ie,ce=oe;function se(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function pe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var fe=function(e){var t=e.onSave,a=e.onCancel,r=e.index,o=e.onSubmit,c=e.refreshNotifications,d=pe(e,["onSave","onCancel","index","onSubmit","refreshNotifications"]),m=i.useRef(),_=me(i.useState(!0),2),p=_[0],f=_[1],b=me(Object(s.useStateCallback)({poa_status:"none",resubmit_poa:!1,has_poi:!1,form_error:""}),2),g=b[0],h=b[1],y=me(Object(s.useStateCallback)({files:[],error_message:null}),2),v=y[0],w=y[1],E=me(i.useState({}),2),O=E[0],j=E[1],z=function(e){t(r,e),a()},S=function(){var e,a=(e=regeneratorRuntime.mark((function e(a,n){var i,c,s,l,d,m,_,p,f,b,y,w,E,S,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.document_file,i=pe(a,["document_file"]),n.setSubmitting(!0),e.next=4,T.a.setSettings(i);case 4:if(!(c=e.sent).error){e.next=9;break}return h(ue(ue({},g),{form_error:c.error.message})),n.setSubmitting(!1),e.abrupt("return");case 9:return e.next=11,T.a.authorized.storage.getSettings();case 11:if(s=e.sent,l=s.error,d=s.get_settings,!l){e.next=17;break}return h(ue(ue({},g),{form_error:l.message})),e.abrupt("return");case 17:return m=d.address_line_1,_=d.address_line_2,p=d.address_city,f=d.address_state,b=d.address_postcode,j({address_line_1:m,address_line_2:_,address_city:p,address_postcode:b,address_state:f}),h(ue(ue({},g),{form_error:""})),e.prev=20,e.next=23,ie.current.upload();case 23:if(!(y=e.sent).warning){e.next=28;break}return h(ue(ue({},g),{form_error:y.warning})),n.setSubmitting(!1),e.abrupt("return");case 28:return e.next=30,T.a.authorized.storage.getAccountStatus();case 30:if(w=e.sent,E=w.error,S=w.get_account_status,!E){e.next=37;break}return h(ue(ue({},g),{form_error:l.message})),n.setSubmitting(!1),e.abrupt("return");case 37:(x=S.authentication.identity)&&"none"===x.status?(h(ue(ue({},g),{form_error:Object(u.localize)("Identity confirmation failed. You will be redirected to the previous step.")})),setTimeout((function(){z(d)}),3e3)):(M=void 0,N=void 0,M=v.files,N=v.error_message,o(r,ue(ue(ue({},O),g),{document_file:M,file_error_message:N}))),e.next=45;break;case 42:e.prev=42,e.t0=e.catch(20),h(ue(ue({},g),{form_error:e.t0.message}));case 45:n.setSubmitting(!1),t(r,a),o(r,a,n.setSubmitting);case 48:case"end":return e.stop()}var M,N}),e,null,[[20,42]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){se(o,n,r,i,c,"next",e)}function c(e){se(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();i.useEffect((function(){T.a.authorized.getAccountStatus().then((function(e){T.a.wait("states_list").then((function(){var t=e.get_account_status.authentication,a=t.document,n=t.identity,r=!(!n||"none"!==n.status);h(ue(ue({},g),{poa_status:a.status,has_poi:r}),(function(){f(!1),c()}))}))}))}),[g,c,h]);var x=function(e,t){return g.poa_status!==X.a.verified&&0!==Object.keys(t).length},M=function(){h(ue(ue({},g),{resubmit_poa:!0}))},N=d.states_list,P=d.value,k=P.address_line_1,A=P.address_line_2,C=P.address_city,I=P.address_state,F=P.address_postcode,B=g.form_error,U=g.has_poi,V=g.poa_status,Y=g.resubmit_poa,K=g.submitted_poa,G=!p&&(Y||V===X.a.none);return i.createElement(n.c,{initialValues:{address_line_1:k,address_line_2:A,address_city:C,address_state:I,address_postcode:F,document_file:v.files},validateOnMount:!0,validate:function(e){if([X.a.verified,X.a.pending].includes(g.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return Object(l.validAddress)(e)},function(e){return Object(l.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||Object(l.validAddress)(e)},function(e){return Object(l.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return Object(l.validLength)(e,{min:1,max:35})},function(e){return Object(l.validLetterSymbol)(e)}],address_state:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return!e||Object(l.validLength)(e,{min:1,max:35})}],address_postcode:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return Object(l.validLength)(e,{min:1,max:20})},function(e){return Object(l.validPostCode)(e)}]},a={address_line_1:[Object(u.localize)("First line of address is required"),Object(u.localize)("First line of address is not in a proper format."),Object(u.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[Object(u.localize)("Second line of address is not in a proper format."),Object(u.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[Object(u.localize)("Town/City is required."),Object(u.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),Object(u.localize)("Town/City is not in a proper format.")],address_state:[Object(u.localize)("State/Province is required."),Object(u.localize)("State/Province is not in a proper format.")],address_postcode:[Object(u.localize)("Postal/ZIP code is required"),Object(u.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),Object(u.localize)("Only letters, numbers, space, and hyphen are allowed.")]},n={};return Object.entries(t).forEach((function(t){var r=me(t,2),o=r[0],i=r[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(n[o]=a[o][i])})),n},enableReinitialize:!0,onSubmit:S,innerRef:m},(function(e){e.dirty;var a=e.errors,o=e.handleSubmit,c=e.isSubmitting,d=e.handleBlur,m=e.handleChange,_=e.setFieldTouched,f=e.setFieldValue,b=e.values,g=e.touched;return i.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var h=e.setRef,y=e.height;return i.createElement("form",{ref:h,onSubmit:o,className:"mt5-proof-of-address"},i.createElement(s.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:Object(l.isDesktop)()},p&&i.createElement(s.Loading,{is_fullscreen:!1}),G&&i.createElement(s.ThemedScrollbars,{autohide:!1,height:"".concat(y-77,"px"),is_bypassed:Object(l.isMobile)()},i.createElement("div",{className:"mt5-proof-of-address__field-area"},i.createElement(L.a,{subtitle:Object(u.localize)("(All fields are required)"),title:Object(u.localize)("Address information")}),i.createElement(ae,{name:"address_line_1",maxLength:255,required:!0,label:Object(u.localize)("First line of address*"),placeholder:Object(u.localize)("First line of address*"),onBlur:d}),i.createElement(ae,{name:"address_line_2",maxLength:255,label:Object(u.localize)("Second line of address (optional)"),optional:!0,placeholder:Object(u.localize)("Second line of address"),onBlur:d}),i.createElement("div",{className:"mt5-proof-of-address__inline-fields"},i.createElement(ae,{maxLength:255,name:"address_city",required:!0,label:Object(u.localize)("Town/City*"),placeholder:Object(u.localize)("Town/City*"),onBlur:d}),i.createElement("fieldset",{className:"address-state__fieldset"},(null==N?void 0:N.length)>0?i.createElement(i.Fragment,null,i.createElement(s.DesktopWrapper,null,i.createElement(n.a,{name:"address_state"},(function(e){var t=e.field;return i.createElement(s.Dropdown,{id:"address_state",required:!0,className:"address_state-dropdown",is_align_text_left:!0,list:N,error:g[t.name]&&a[t.name],name:"address_state",value:b.address_state,onChange:m,placeholder:Object(u.localize)("State/Province*"),list_portal_id:"modal_root"})}))),i.createElement(s.MobileWrapper,null,i.createElement(s.SelectNative,{label:Object(u.localize)("State/Province*"),value:b.address_state,list_items:N,error:g.address_state&&a.address_state,onChange:function(e){m(e),f("address_state",e.target.value,!0)},required:!0}))):i.createElement(ae,{name:"address_state",label:Object(u.localize)("State/Province*"),placeholder:Object(u.localize)("State/Province*"),value:b.address_state,required:!0,onBlur:d})),i.createElement(ae,{maxLength:255,name:"address_postcode",label:Object(u.localize)("Postal/ZIP code*"),placeholder:Object(u.localize)("Postal/ZIP code*"),onBlur:d,required:!0})),i.createElement("div",{className:"mt5-proof-of-address__file-upload"},i.createElement(D.a,{onRef:function(e){return ie=e},getSocket:T.a.getSocket,onFileDrop:function(e){return function(e,a,n,o,i){n("document_file",!0),o("document_file",e),w({files:e,error_message:a},(function(){"function"==typeof t&&t(r,ue(ue({},i),{document_file:e}))}))}(e.files,e.error_message,_,f,b)}})))),V!==X.a.none&&!Y&&i.createElement(s.ThemedScrollbars,{height:y,is_bypassed:Object(l.isMobile)()},K&&i.createElement($.a,{is_description_disabled:!0,has_poi:U}),V===X.a.pending&&i.createElement(W.a,{is_description_disabled:!0}),V===X.a.verified&&i.createElement(q.a,{is_description_disabled:!0,has_poi:U}),V===X.a.expired&&i.createElement(R.a,{onClick:M}),(V===X.a.rejected||V===X.a.suspected)&&i.createElement(H.a,null)),i.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},(V===X.a.verified||G)&&i.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:Object(u.localize)("Previous"),is_disabled:x(0,a)||!(V===X.a.verified)&&v.files&&v.files.length<1||!!v.error_message,label:V===X.a.verified?Object(u.localize)("Submit"):Object(u.localize)("Next"),is_absolute:Object(l.isMobile)(),is_loading:c,form_error:B,onCancel:function(){return z(b)}}))))}))}))};fe.propTypes={onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,storeProofOfAddress:o.a.func,value:o.a.object};var be=fe,ge=a("@deriv/account/dist/js/proof-of-identity-container"),he=a.n(ge);function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ee(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Oe=function(e){var t=e.authentication_status,a=e.form_error,r=e.index,o=e.onCancel,c=e.onSubmit,d=e.value,m=Ee(e,["authentication_status","form_error","index","onCancel","onSubmit","value"]),_=t.identity_status,p=ve(i.useState("none"),2),f=p[0],b=p[1],g=i.useCallback((function(){var e={};return["pending","verified"].includes(f)||["pending","verified"].includes(_)||(e.poi_state=!0),e}),[f,_]);return i.createElement(n.c,{initialValues:{poi_state:d.poi_state},validate:g,onSubmit:function(e,t){return c(r,{poi_state:f},t.setSubmitting)}},(function(e){var t=e.handleSubmit;return i.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var n=e.setRef,r=e.height;return i.createElement("form",{ref:n,className:"mt5-proof-of-identity",onSubmit:t},i.createElement("div",{className:"details-form"},i.createElement("input",{type:"hidden",name:"poi_state",value:f,readOnly:!0}),i.createElement(s.Div100vhContainer,{className:"mt5-proof-of-identity__fields",height_offset:"180px",is_disabled:Object(l.isDesktop)()},i.createElement(he.a,ye({},m,{serviceToken:T.a.serviceToken,notificationEvent:T.a.notificationEvent,getAccountStatus:T.a.authorized.getAccountStatus,height:r,onStateChange:function(e){var t=e.status,a=["pending","verified"].includes(_)?_:t;b(a)},is_trading_button_enabled:!1,is_description_enabled:!1}))),i.createElement(s.Modal.Footer,{is_bypassed:Object(l.isMobile)()},i.createElement(s.FormSubmitButton,{has_cancel:!0,cancel_label:Object(u.localize)("Previous"),is_disabled:!["pending","verified"].includes(f),is_absolute:Object(l.isMobile)(),label:Object(u.localize)("Next"),onCancel:o,form_error:a}))))}))}))};Oe.propTypes={authentication_status:o.a.object,form_error:o.a.string,index:o.a.number,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,refreshNotifications:o.a.func,addNotificationByKey:o.a.func,removeNotificationMessage:o.a.func,value:o.a.object};var je=Oe;function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ne(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function Pe(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Ne(o,n,r,i,c,"next",e)}function c(e){Ne(o,n,r,i,c,"throw",e)}i(void 0)}))}}function ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=De(e);if(t){var r=De(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ce(this,a)}}function Ce(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=0,Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(o,e);var t,a,n,r=Te(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).clearError=function(){t.setState({form_error:""})},t.nextStep=function(){t.clearError(),t.has_more_steps?t.goNext():t.finishWizard()},t.finishWizard=function(){t.props.openPendingDialog(),t.props.toggleModal()},t.prevStep=function(){t.setState({step:t.state.step-1,form_error:""})},t.updateValue=function(){var e=Pe(regeneratorRuntime.mark((function e(a,n,r){var o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(i.length>3&&void 0!==i[3])||i[3])||Ie!==a){e.next=10;break}return e.next=4,T.a.setSettings(n);case 4:if(!(o=e.sent).error){e.next=9;break}return t.setState({form_error:o.error.message}),r(!1),e.abrupt("return");case 9:t.initiatePersonalDetails(r);case 10:t.saveFormData(a,n),t.nextStep(r);case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),t.initiatePersonalDetails=function(){var e=Pe(regeneratorRuntime.mark((function e(a){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.authorized.storage.getSettings();case 2:if(!(n=e.sent).error){e.next=7;break}return t.setState({form_error:n.error.message}),"function"==typeof a&&a(!1),e.abrupt("return");case 7:r=Object.assign([],t.state.items),n.get_settings.citizen&&(r[Ie].form_value.citizen=t.transform(n.get_settings.citizen)),n.get_settings.tax_residence&&(r[Ie].form_value.tax_residence=t.transform(n.get_settings.tax_residence)),n.get_settings.tax_identification_number&&(r[Ie].form_value.tax_identification_number=n.get_settings.tax_identification_number),n.get_settings.account_opening_reason&&(r[Ie].form_value.account_opening_reason=n.get_settings.account_opening_reason),t.setState({items:r},t.props.refreshNotifications);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.transform=function(e){var a=xe(t.props.residence_list.filter((function(t){return t.value===e})),1)[0];return Object(l.getPropertyValue)(a,["text"])||e},t.goNext=function(){t.setState({step:t.state.step+1})},t.getCurrent=function(e){return e?t.state.items[t.state_index][e]:t.state.items[t.state_index]},t.saveFormData=function(e,a){var n=Object.assign([],t.state.items);n[e].form_value=a,t.state_index===Ie&&(n[Ie].form_value.citizen=t.transform(a.citizen),n[Ie].form_value.tax_residence=t.transform(a.tax_residence)),t.setState({items:n})},t.state={finished:void 0,step:0,form_error:"",is_loading:!1,items:[{header:{active_title:Object(u.localize)("Complete your personal details"),title:Object(u.localize)("Personal details")},body:ce,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:Object(u.localize)("Complete your proof of identity"),title:Object(u.localize)("Proof of identity")},body:je,form_value:{poi_state:"unknown"},props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:Object(u.localize)("Complete your proof of address"),title:Object(u.localize)("Proof of address")},body:be,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]},t}return t=o,(a=[{key:"componentDidMount",value:function(){var e=this;this.state_index===Ie&&(this.setState({is_loading:!0}),this.initiatePersonalDetails().then((function(){e.setState({is_loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.getCurrent("body"),a=this.getCurrent("form_value"),n=(this.getCurrent("props")||[]).reduce((function(t,a){return Object.assign(t,(n={},r=a,o=e.props[a],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{}),r=this.getCurrent("height")||"auto";return i.createElement(s.Div100vhContainer,{className:"mt5-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:Object(l.isDesktop)(),height_offset:"40px"},i.createElement("div",{className:"mt5-financial-stp-modal__heading"},this.getCurrent()&&i.createElement(i.Fragment,null,i.createElement(s.DesktopWrapper,null,i.createElement(s.FormProgress,{steps:this.state.items,current_step:this.state.step})),i.createElement(s.MobileWrapper,null,i.createElement("div",{className:"mt5-financial-stp-modal__header-steps"},i.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-title"},i.createElement(u.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:this.state.step+1,steps:this.state.items.length,step_title:this.state.items[this.state.step].header.title}})),this.state.items[this.state.step].header.active_title&&i.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-subtitle"},this.state.items[this.state.step].header.active_title))))),i.createElement("div",{className:"mt5-financial-stp-modal__body"},i.createElement(t,Se({value:a,index:this.state_index,onSubmit:this.updateValue,height:r,is_loading:this.state.is_loading,onCancel:this.prevStep,onSave:this.saveFormData,form_error:this.state.form_error},n))))}},{key:"state_index",get:function(){return this.state.step}},{key:"has_more_steps",get:function(){return this.state.step+1<this.state.items.length}}])&&ke(t.prototype,a),n&&ke(t,n),o}(i.Component);Le.propTypes={openPendingDialog:o.a.func,toggleModal:o.a.func};var Fe=Object(f.b)((function(e){var t=e.client,a=e.modules.mt5,n=e.ui;return{addNotificationByKey:n.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:a.openPendingDialog,refreshNotifications:t.refreshNotifications,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:a.storeProofOfAddress}}))(Le),Re=Object(f.b)((function(e){var t=e.ui,a=e.modules;return{disableApp:t.disableApp,disableMt5FinancialStpModal:a.mt5.disableMt5FinancialStpModal,enableApp:t.enableApp,is_mt5_financial_stp_modal_open:a.mt5.is_mt5_financial_stp_modal_open}}))((function(e){var t=e.disableApp,a=e.disableMt5FinancialStpModal,n=e.enableApp,r=e.is_mt5_financial_stp_modal_open;return i.createElement(i.Fragment,null,i.createElement(s.DesktopWrapper,null,i.createElement(s.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:Object(u.localize)("Create a DMT5 real Financial STP account"),enableApp:n,is_open:r,has_close_icon:!0,height:"740px",toggleModal:a},i.createElement(Fe,{toggleModal:a}))),i.createElement(s.MobileWrapper,null,i.createElement(s.MobileDialog,{portal_element_id:"modal_root",title:Object(u.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:r,onClose:a},i.createElement(Fe,{toggleModal:a}))))}));function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(a),!0).forEach((function(t){Ue(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var He=function(e){var t=e.is_visible,a=e.toggleModal,n=e.message;return i.createElement(s.Modal,{is_open:t,small:!0,toggleModal:a},i.createElement(s.Modal.Body,null,n),i.createElement(s.Modal.Footer,null,i.createElement(s.Button,{has_effect:!0,text:Object(u.localize)("OK"),onClick:a,primary:!0})))},Ye=function(e){var t=e.name,a=e.tooltip,n=e.counter,r=qe(i.useState(!1),2),o=r[0],c=r[1],l=function(){return c(!o)};return a?i.createElement(i.Fragment,null,i.createElement("p",{className:"mt5-attribute-describer",onClick:l},t,i.createElement(s.MobileWrapper,null,i.createElement("span",{className:"counter"},n))),i.createElement(s.DesktopWrapper,null,i.createElement(s.Popover,{alignment:"right",icon:"counter",counter:n,message:a,zIndex:9998})),i.createElement(s.MobileWrapper,null,i.createElement(He,{toggleModal:l,is_visible:o,message:a}))):i.createElement("p",{className:"mt5-attribute-describer"},t)},$e=function(e){var t=e.landing_companies,a=e.is_eu,n=e.is_eu_country,r=e.is_logged_in,o=r&&a||!r&&n;return function(e,t,a){return t.map((function(t){var n,r,o,i=t.attribute,c=t.synthetic,s=t.financial_stp,l=t.financial;return a?We(We(We({attribute:i},(null==e||null===(n=e.mt_gaming_company)||void 0===n?void 0:n.financial)?{synthetic:c}:{}),(null==e||null===(r=e.mt_financial_company)||void 0===r?void 0:r.financial)?{financial:l}:{}),(null==e||null===(o=e.mt_financial_company)||void 0===o?void 0:o.financial_stp)?{financial_stp:s}:{}):We(We(We({attribute:i},{synthetic:c}),{financial:l}),{financial_stp:s})}))}(t,[{attribute:i.createElement(Ye,{name:Object(u.localize)("Account currency")}),synthetic:o?Object(u.localize)("EUR"):Object(u.localize)("USD"),financial:o?Object(u.localize)("EUR/GBP"):Object(u.localize)("USD"),financial_stp:Object(u.localize)("USD")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Maximum leverage")}),synthetic:Object(u.localize)("Up to 1:1000"),financial:o?Object(u.localize)("Up to 1:30"):Object(u.localize)("Up to 1:1000"),financial_stp:Object(u.localize)("Up to 1:100")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Order execution")}),synthetic:Object(u.localize)("Market"),financial:Object(u.localize)("Market"),financial_stp:Object(u.localize)("Market")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Spread")}),synthetic:Object(u.localize)("Fixed/Variable"),financial:Object(u.localize)("Variable"),financial_stp:Object(u.localize)("Variable")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Commission")}),synthetic:Object(u.localize)("No"),financial:Object(u.localize)("No"),financial_stp:Object(u.localize)("No")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Minimum deposit")}),synthetic:Object(u.localize)("No"),financial:Object(u.localize)("No"),financial_stp:Object(u.localize)("No")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Margin call")}),synthetic:Object(u.localize)("100%"),financial:o?Object(u.localize)("100%"):Object(u.localize)("150%"),financial_stp:Object(u.localize)("150%")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Stop out level")}),synthetic:Object(u.localize)("50%"),financial:o?Object(u.localize)("50%"):Object(u.localize)("75%"),financial_stp:Object(u.localize)("75%")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Number of assets")}),synthetic:Object(u.localize)("10+"),financial:Object(u.localize)("50+"),financial_stp:Object(u.localize)("50+")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Cryptocurrency trading")}),synthetic:Object(u.localize)("N/A"),financial:Object(u.localize)("24/7"),financial_stp:Object(u.localize)("24/7")},{attribute:i.createElement(Ye,{name:Object(u.localize)("Trading instruments")}),synthetic:Object(u.localize)("Synthetics"),financial:o?Object(u.localize)("FX-majors (standard), FX-minors, Commodities, Cryptocurrencies"):Object(u.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_stp:Object(u.localize)("FX-majors, FX-minors, FX-exotics, Cryptocurrencies")}],r)},Ke=function(){return i.createElement("div",{className:"mt5-compare-account--hint"},i.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},i.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--circle"}),i.createElement(u.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),i.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},i.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--star mt5-compare-accounts__star"},"*"),i.createElement(u.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your MT5 account to support your positions at all times."})))},Xe=function(e){var t,a,n,r=e.is_eu,o=e.landing_companies,c=e.is_eu_country,d=e.is_logged_in,m=qe(i.useState([]),2),_=m[0],p=m[1],f=qe(i.useState("1.5fr 1fr 2fr 1fr"),2),b=f[0],g=f[1];return i.useEffect((function(){var e,t,a;(p($e({landing_companies:o,is_eu:r,is_eu_country:c,is_logged_in:d})),d)&&g("1.5fr ".concat((null==o||null===(e=o.mt_gaming_company)||void 0===e?void 0:e.financial)?"1fr":""," ").concat((null==o||null===(t=o.mt_financial_company)||void 0===t?void 0:t.financial)?"2fr":""," ").concat((null==o||null===(a=o.mt_financial_company)||void 0===a?void 0:a.financial_stp)?" 1fr ":""))}),[o.mt_financial_company,o.mt_gaming_company,r,d,c,o]),i.createElement("div",{className:"mt5-compare-accounts",style:{"--mt5-compare-accounts-template-columns":b}},i.createElement(s.Table,{fixed:!0,scroll_height:Object(l.isMobile)()?"100%":"calc(100% - 130px)"},i.createElement(s.Table.Header,null,i.createElement(s.Table.Row,{className:"mt5-compare-accounts__table-row"},i.createElement(s.Table.Head,{fixed:!0}),d?i.createElement(i.Fragment,null,(null==o||null===(t=o.mt_gaming_company)||void 0===t?void 0:t.financial)&&i.createElement(s.Table.Head,null,Object(u.localize)("Synthetic")),(null==o||null===(a=o.mt_financial_company)||void 0===a?void 0:a.financial)&&i.createElement(s.Table.Head,null,Object(u.localize)("Financial"),i.createElement("span",{className:"mt5-compare-accounts__star"},"*")),(null==o||null===(n=o.mt_financial_company)||void 0===n?void 0:n.financial_stp)&&i.createElement(s.Table.Head,null,Object(u.localize)("Financial STP"),i.createElement("span",{className:"mt5-compare-accounts__star"},"*"))):i.createElement(i.Fragment,null,i.createElement(s.Table.Head,null,Object(u.localize)("Synthetic")),i.createElement(s.Table.Head,null,Object(u.localize)("Financial"),i.createElement("span",{className:"mt5-compare-accounts__star"},"*")),i.createElement(s.Table.Head,null,Object(u.localize)("Financial STP"),i.createElement("span",{className:"mt5-compare-accounts__star"},"*"))))),i.createElement(s.Table.Body,null,_.map((function(e,t){return i.createElement(s.Table.Row,{key:t,className:"mt5-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return i.createElement(s.Table.Cell,{key:a,fixed:0===a},e[t])})))})))),i.createElement(s.DesktopWrapper,null,i.createElement(Ke,null)))},Ge=Object(f.b)((function(e){var t=e.modules,a=e.ui,n=e.client;return{disableApp:a.disableApp,enableApp:a.enableApp,is_compare_accounts_visible:t.mt5.is_compare_accounts_visible,is_loading:n.is_populating_mt5_account_list,is_eu:n.is_eu,is_eu_country:n.is_eu_country,is_logged_in:n.is_logged_in,landing_companies:n.landing_companies,toggleCompareAccounts:t.mt5.toggleCompareAccountsModal}}))((function(e){var t=e.disableApp,a=e.enableApp,n=e.is_compare_accounts_visible,r=e.landing_companies,o=e.is_loading,c=e.is_logged_in,l=e.is_eu,d=e.is_eu_country,m=e.toggleCompareAccounts;return i.createElement("div",{className:"mt5-compare-accounts-modal__wrapper"},i.createElement(s.Button,{className:"mt5-dashboard__welcome-message--button",has_effect:!0,text:Object(u.localize)("Compare accounts"),onClick:m,secondary:!0,disabled:o}),i.createElement(i.Suspense,{fallback:i.createElement(s.UILoader,null)},i.createElement(s.DesktopWrapper,null,i.createElement(s.Modal,{className:"mt5-dashboard__compare-accounts",disableApp:t,enableApp:a,is_open:n,title:Object(u.localize)("Compare accounts"),toggleModal:m,type:"button",height:"696px",width:"903px"},i.createElement(Xe,{is_logged_in:c,is_eu:l,is_eu_country:d,landing_companies:r}))),i.createElement(s.MobileWrapper,null,i.createElement(s.MobileDialog,{portal_element_id:"deriv_app",title:Object(u.localize)("Compare accounts"),wrapper_classname:"mt5-dashboard__compare-accounts",visible:n,onClose:m,footer:i.createElement(Ke,null)},i.createElement(Xe,{is_logged_in:c,is_eu:l,is_eu_country:d,landing_companies:r})))))})),Ze=function(e){return e?"Deriv-Demo":"Deriv-Server"},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||Object(l.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return Qe({category:"real"})}},Qe=function(e){var t=e.category,a=e.loginid,n="demo"===t?"Deriv-Demo":"Deriv-Server",r=null!=a?a:"";return"https://trade.mql5.com/trade?servers=".concat(n,"&trade_server=").concat(n).concat(r&&"&login=".concat(r))},et=function(){return i.createElement("div",{className:"mt5-dashboard__download-center"},i.createElement("h1",{className:"mt5-dashboard__download-center--heading"},i.createElement(u.Localize,{i18n_default_text:"Run MT5 from your browser or download the MT5 app for your devices"})),i.createElement("div",{className:"mt5-dashboard__download-center-options"},i.createElement("div",{className:"mt5-dashboard__download-center-options--desktop"},i.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-links"},i.createElement("div",null,i.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-row"},i.createElement(s.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),i.createElement(s.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),i.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-row"},i.createElement("a",{href:Qe({category:"demo"}),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationWebDemo",width:138,height:40})),i.createElement("a",{href:Qe({category:"real"}),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationWebReal",width:138,height:40})))),i.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-download"},i.createElement("a",{href:Je("windows"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationWindows",width:138,height:40})),i.createElement("a",{href:Je("macos"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationMacos",width:138,height:40})),i.createElement("a",{href:Je("linux"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationLinux",width:138,height:40})))),i.createElement("p",{className:"mt5-dashboard__download-center--hint"},i.createElement(u.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."}))),i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},i.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),i.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},i.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:Je("android"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),i.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:Je("ios"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))},tt=a("./Stores/Modules/MT5/mt5-store.js");function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(Object(a),!0).forEach((function(t){rt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function rt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ot(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var lt=function(e){var t=e.count_from,a=void 0===t?60:t,n=e.onTimeout,r=ct(i.useState(a),2),o=r[0],c=r[1];return i.useEffect((function(){if(0!==o){var e=setTimeout((function(){c(o-1)}),1e3);return function(){return clearTimeout(e)}}return n(),function(){}}),[o]),i.createElement("span",{className:"countdown"},o)},ut=function(e){var t=e.sendVerifyEmail,a=e.account_type,n=e.account_group,r=e.server,o=e.password_type,c=ct(i.useState(!1),2),l=c[0],d=c[1],m=ct(i.useState(!1),2),_=m[0],p=m[1];i.useEffect((function(){localStorage.setItem("mt5_reset_password_intent",[r,n,a].join(".")),localStorage.setItem("mt5_reset_password_type",o),t()}),[]);return i.createElement("div",{className:"mt5-verification-email-sent"},i.createElement(s.Icon,{icon:"IcEmailSent",size:128}),i.createElement("h2",{className:"mt5-verification-email-sent__title"},i.createElement(u.Localize,{i18n_default_text:"We've sent you an email"})),i.createElement("p",{className:"mt5-verification-email-sent__description"},i.createElement(u.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!l&&i.createElement(s.Button,{className:"mt5-verification-email-sent__resend-button",primary:!0,onClick:function(){d(!0)}},i.createElement(u.Localize,{i18n_default_text:"Didn't receive the email?"})),l&&i.createElement(i.Fragment,null,i.createElement("p",{className:"mt5-verification-email-sent__title mt5-verification-email-sent__title--sub"},i.createElement(u.Localize,{i18n_default_text:"Didn't receive the email?"})),i.createElement("p",{className:"mt5-verification-email-sent__description"},i.createElement(u.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),i.createElement(s.Button,{className:"mt5-verification-email-sent__resend-button",large:!0,primary:!0,disabled:_,onClick:function(){t(),p(!0)}},!_&&i.createElement(u.Localize,{i18n_default_text:"Resend email"}),_&&i.createElement(i.Fragment,null,i.createElement(u.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[i.createElement(lt,{key:0,onTimeout:function(){return p(!1)},count_from:60})]})))))},dt=function(e){var t=e.toggleModal,a=e.is_investor;return i.createElement("div",{className:"mt5-password-manager__success"},i.createElement(s.Icon,{icon:"IcPasswordUpdated",size:128}),i.createElement("h1",{className:"mt5-password-manager__success-header"},i.createElement(u.Localize,{i18n_default_text:"Password changed"})),i.createElement("p",{className:"mt5-password-manager__success-paragraph"},a?i.createElement(u.Localize,{i18n_default_text:"Your investor password has been changed."}):i.createElement(u.Localize,{i18n_default_text:"Your password has been changed."})),i.createElement(s.Button,{onClick:t,className:"mt5-password-manager__success-btn",primary:!0,large:!0},i.createElement("p",{className:"dc-btn__text"},Object(u.localize)("OK"))))},mt=function(e){var t=e.multi_step_ref,a=e.steps;return i.createElement(s.MultiStep,{ref:t,steps:a,className:"mt5-password-manager",lbl_previous:Object(u.localize)("Back")})},_t=function(e){var t=e.is_submit_success_main,a=e.toggleModal,r=e.onSubmit,o=e.validatePassword,c=e.error_message_main,d=e.setPasswordType,m=e.multi_step_ref;if(t)return i.createElement(dt,{toggleModal:a});return i.createElement(n.c,{initialValues:{old_password:"",new_password:"",password_type:"main"},validate:o,onSubmit:r},(function(e){var t=e.isSubmitting,a=e.errors,r=e.setFieldTouched,o=e.values,_=e.touched;return i.createElement(n.b,{className:"mt5-password-manager__main-form",noValidate:!0},c&&i.createElement("p",{className:"mt5-password-manager--error-message"},c),i.createElement(n.a,{name:"old_password"},(function(e){var t=e.field;return i.createElement(s.PasswordInput,it({},t,{autoComplete:"current-password",label:Object(u.localize)("Current password"),error:_.old_password&&a.old_password,required:!0}))})),i.createElement(n.a,{name:"new_password"},(function(e){var t=e.field;return i.createElement(s.PasswordMeter,{input:t.value,has_error:!(!_.new_password||!a.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return i.createElement(s.PasswordInput,it({},t,{autoComplete:"new-password",label:Object(u.localize)("New password"),hint:!n&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:_.new_password&&a.new_password,onChange:function(e){r("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),i.createElement("div",{className:"mt5-password-manager__actions"},i.createElement(s.Button,{className:"mt5-password-manager--button",is_disabled:t||!o.old_password||!o.new_password||Object.keys(a).length>0,is_loading:t,text:Object(u.localize)("Change password"),primary:!0,large:!0}),i.createElement(s.Button,{className:"mt5-password-manager--button",type:"button",onClick:function(){var e;d("main"),null===(e=m.current)||void 0===e||e.goNextStep()},text:Object(u.localize)("Reset main password"),tertiary:!0,large:!0})))}))},pt=function(e){var t=e.error_message_investor,a=e.is_submit_success_investor,r=e.multi_step_ref,o=e.onSubmit,c=e.setPasswordType,d=e.toggleModal,m=e.validatePassword;if(a)return i.createElement(dt,{toggleModal:d,is_investor:!0});return i.createElement("div",{className:"mt5-password-manager__investor-wrapper"},i.createElement("p",{className:"mt5-password-manager--paragraph"},i.createElement(u.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),i.createElement("p",{className:"mt5-password-manager--paragraph"},i.createElement(u.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&i.createElement("p",{className:"mt5-password-manager--error-message"},t),i.createElement(n.c,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:m,onSubmit:o},(function(e){var t=e.isSubmitting,a=e.errors,o=e.setFieldTouched,d=e.values,m=e.touched;return i.createElement(n.b,{className:"mt5-password-manager__investor-form",noValidate:!0},i.createElement(n.a,{name:"old_password"},(function(e){var t=e.field;return i.createElement(s.PasswordInput,it({},t,{autoComplete:"current-password",label:Object(u.localize)("Current investor password"),error:m.old_password&&a.old_password,required:!0}))})),i.createElement(n.a,{name:"new_password"},(function(e){var t=e.field;return i.createElement(s.PasswordMeter,{input:t.value,has_error:!(!m.new_password||!a.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return i.createElement(s.PasswordInput,it({},t,{autoComplete:"new-password",label:Object(u.localize)("New investor password"),hint:!n&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:m.new_password&&a.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),i.createElement("div",{className:"mt5-password-manager__actions"},i.createElement(s.Button,{className:"mt5-password-manager--button",is_disabled:t||!d.old_password||!d.new_password||Object.keys(a).length>0,is_loading:t,text:Object(u.localize)("Change investor password"),primary:!0,large:!0}),i.createElement(s.Button,{className:"mt5-password-manager--button",type:"button",onClick:function(){var e;c("investor"),null===(e=r.current)||void 0===e||e.goNextStep()},text:Object(u.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))},ft=function(e){var t=e.toggleModal,a=e.selected_login,n=e.email,r=e.setPasswordType,o=e.multi_step_ref,c=ct(i.useState(0),2),d=c[0],m=c[1],_=ct(i.useState(""),2),p=_[0],f=_[1],b=ct(i.useState(!1),2),g=b[0],h=b[1],y=ct(i.useState(""),2),v=y[0],w=y[1],E=ct(i.useState(!1),2),O=E[0],j=E[1],z=function(e){var t={};return Object(l.validLength)(e.new_password,{min:8,max:25})?Object(l.validPassword)(e.new_password)?e.new_password.toLowerCase()===n.toLowerCase()&&(t.new_password=Object(u.localize)("Your password cannot be the same as your email address.")):t.new_password=Object(l.getErrorMessages)().password():t.new_password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=Object(u.localize)("This field is required")),t},S=function(e){"main"===e?(f(""),h(!0)):(w(""),j(!0))},x=i.useCallback(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tt.a.changePassword(nt({login:a},t));case 4:(n=e.sent)?(r=t.password_type,o=n,"main"===r?f(o):w(o)):S(t.password_type);case 6:case"end":return e.stop()}var r,o}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){ot(o,n,r,i,c,"next",e)}function c(e){ot(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[a]);return i.createElement(i.Fragment,null,i.createElement(s.Tabs,{active_index:d,onTabItemClick:function(e){m(e),f(""),h(!1),w(""),j(!1)},top:!0},i.createElement("div",{label:Object(u.localize)("Main password")},i.createElement(s.DesktopWrapper,null,i.createElement(s.ThemedScrollbars,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",is_bypassed:Object(l.isMobile)(),autohide:!1},i.createElement(_t,{is_submit_success_main:g,toggleModal:t,onSubmit:x,validatePassword:z,error_message_main:p,setPasswordType:r,multi_step_ref:o}))),i.createElement(s.MobileWrapper,null,i.createElement(s.Div100vhContainer,{className:"mt5-password-manager__scroll-wrapper",height_offset:"120px"},i.createElement(_t,{is_submit_success_main:g,toggleModal:t,onSubmit:x,validatePassword:z,error_message_main:p,setPasswordType:r,multi_step_ref:o})))),i.createElement("div",{label:Object(u.localize)("Investor password")},i.createElement(s.DesktopWrapper,null,i.createElement(s.ThemedScrollbars,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)"},i.createElement(pt,{is_submit_success_investor:O,toggleModal:t,error_message_investor:v,validatePassword:z,onSubmit:x,setPasswordType:r,multi_step_ref:o}))),i.createElement(s.MobileWrapper,null,i.createElement(s.Div100vhContainer,{className:"mt5-password-manager__scroll-wrapper",height_offset:"120px"},i.createElement(pt,{is_submit_success_investor:O,toggleModal:t,error_message_investor:v,validatePassword:z,onSubmit:x,setPasswordType:r,multi_step_ref:o}))))))},bt=function(e){var t=e.enableApp,a=e.email,n=e.disableApp,r=e.is_visible,o=e.selected_login,c=e.selected_account,l=e.toggleModal,d=e.selected_account_type,m=e.selected_account_group,_=e.selected_server,p=e.sendVerifyEmail,f=i.useRef(),b=ct(i.useState("main"),2),g=b[0],h=b[1];if(!o)return null;var y=[{component:i.createElement(ft,{email:a,selected_login:o,toggleModal:l,password_type:g,setPasswordType:h,multi_step_ref:f})},{component:i.createElement(ut,{server:_,sendVerifyEmail:p,account_type:d,account_group:m,password_type:g})}];return i.createElement(i.Suspense,{fallback:i.createElement(s.UILoader,null)},i.createElement(s.DesktopWrapper,null,i.createElement(s.Modal,{className:"mt5-password-manager__modal",disableApp:n,enableApp:t,is_open:r,title:"real"===m?Object(u.localize)("Manage DMT5 Real {{account_title}} account password",{account_title:c}):Object(u.localize)("Manage DMT5 Demo {{account_title}} account password",{account_title:c}),toggleModal:l,height:"688px",width:"904px"},i.createElement(mt,{steps:y,multi_step_ref:f}))),i.createElement(s.MobileWrapper,null,i.createElement(s.PageOverlay,{is_open:r,portal_id:"deriv_app",header:Object(u.localize)("Manage password"),onClickClose:l},i.createElement(mt,{steps:y,multi_step_ref:f}))))};bt.propTypes={email:o.a.string,is_visible:o.a.bool,selected_account:o.a.string,selected_server:o.a.string,selected_login:o.a.string,toggleModal:o.a.func};var gt=Object(f.b)((function(e){var t=e.modules.mt5,a=e.client,n=e.ui;return{email:a.email,enableApp:n.enableApp,disableApp:n.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(bt),ht=function(e){var t=e.mt5_companies,a=e.current_account,n=e.closeSuccessTopUpModal,r=e.closeTopUpModal,o=e.is_top_up_virtual_open,c=e.is_top_up_virtual_in_progress,l=e.is_top_up_virtual_success,d=e.topUpVirtual,m=i.useCallback((function(){return t&&a?t[a.category][a.type].title:""}),[t,a]);if(!t||!a)return null;var _={currency:"USD",minimum_amount:1e3,additional_amount:1e4},f=_.currency,b=_.minimum_amount,g=_.additional_amount;return i.createElement(i.Fragment,null,i.createElement(s.Modal,{toggleModal:r,is_open:o,className:"top-up-virtual",title:Object(u.localize)("Fund top up"),width:"384px"},i.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},i.createElement("p",{className:"dc-modal__container_top-up-virtual__description"},i.createElement(u.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[i.createElement(s.Money,{key:0,amount:g,currency:f,show_currency:!0}),i.createElement(s.Money,{key:1,amount:b,currency:f,show_currency:!0})]})),i.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},i.createElement(u.Localize,{i18n_default_text:"DMT5 {{ account_title }} account",values:{account_title:m()}})),i.createElement("div",null,i.createElement("p",{className:"dc-modal__container_top-up-virtual--balance-descriptor"},i.createElement(u.Localize,{i18n_default_text:"Current balance"})),i.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},i.createElement(s.Money,{amount:a.display_balance,currency:a.currency}))),i.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},i.createElement(s.Button,{is_disabled:a.balance>1e3||c,type:"button",is_loading:c,onClick:d,primary:!0,large:!0},!c&&i.createElement(u.Localize,{i18n_default_text:"Top up  <0></0>",components:[i.createElement(s.Money,{key:0,amount:g,currency:f,show_currency:!0})]}))))),i.createElement(p,{is_open:l,toggleModal:function(){n()},has_close_icon:!0,title:Object(u.localize)("Fund top up"),icon:i.createElement(s.Icon,{icon:"IcCashierWallet",size:128}),heading:i.createElement("h3",{className:"mt5-success-topup__heading"},i.createElement(u.Localize,{i18n_default_text:"<0></0> has been credited into your DMT5 {{title}} account.",values:{title:m()},components:[i.createElement(s.Money,{key:0,amount:g,currency:f,show_currency:!0})]})),message:i.createElement("div",{className:"mt5-success-topup__description"},i.createElement("p",null,i.createElement(u.Localize,{i18n_default_text:"New current balance"})),i.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},i.createElement(s.Money,{amount:a.balance,currency:a.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))};ht.propTypes={account_title:o.a.string,closeSuccessTopUpModal:o.a.func,closeTopUpVirtual:o.a.func,currency:o.a.string,display_balance:o.a.string,is_top_up_virtual_open:o.a.bool,is_top_up_virtual_in_progress:o.a.bool,is_top_up_virtual_success:o.a.bool,topUpVirtual:o.a.func};var yt=Object(f.b)((function(e){var t=e.ui,a=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:a.mt5.current_account,mt5_companies:a.mt5.mt5_companies,topUpVirtual:a.mt5.topUpVirtual}}))(ht),vt=a("react-router-dom"),wt=a("./Stores/Modules/MT5/Helpers/mt5-config.js");function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Mt(e);if(t){var r=Mt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return xt(this,a)}}function xt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Tt(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ct=function(e){var t,a,n,r,o,i=e.current_list,c=e.children,s=Tt(e,["current_list","children"]),l=localStorage.getItem("mt5_reset_password_intent"),u=localStorage.getItem("mt5_reset_password_type")||"main";if(l&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(l)&&i){var d=kt(l.split("."),3);o=d[0],t=d[1],a=d[2],n=i["".concat(t,".").concat(a,"@").concat(o)].login,r=Object(wt.a)()[t][a].title}else if(i){var m=kt(Object.keys(i).pop().split("."),3);o=m[0],t=m[1],a=m[2],n=i["".concat(t,".").concat(a,"@").concat(o)].login,r=Object(wt.a)()[t][a].title}else n="",r="";return c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(a),!0).forEach((function(t){Pt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({login:n,title:r,type:u},s))},Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(c,e);var t,a,r,o=St(c);function c(){var e;Ot(this,c);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).state={has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""},e.renderErrorBox=function(t){e.setState({has_error:!0,error_message:t.message})},e.clearAddressBar=function(){localStorage.removeItem("mt5_reset_password_intent"),localStorage.removeItem("mt5_reset_password_type"),localStorage.removeItem("mt5_reset_password_code"),e.props.history.push("".concat(l.routes.mt5))},e.validatePassword=function(t){var a={};return Object(l.validLength)(t.new_password,{min:8,max:25})?Object(l.validPassword)(t.new_password)||(a.new_password=Object(l.getErrorMessages)().password()):a.new_password=Object(u.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t.new_password.toLowerCase()===e.props.email.toLowerCase()&&(a.new_password=Object(u.localize)("Your password cannot be the same as your email address.")),a},e.resetPassword=function(t,a,n,r){var o=r.setSubmitting;o(!0);var i={login:n,password_type:a,new_password:t.new_password,verification_code:localStorage.getItem("mt5_reset_password_code")};T.a.mt5PasswordReset(i).then((function(t){t.error&&"InvalidToken"===t.error.code?e.renderErrorBox(t.error):(e.setState({is_finished:!0,changed_password_type:a}),e.clearAddressBar()),o(!1)}))},e}return t=c,(a=[{key:"render",value:function(){var e=this,t=this.props,a=t.is_mt5_reset_password_modal_enabled,r=t.setMt5PasswordResetModal,o=t.current_list;return i.createElement(s.Modal,{className:"mt5-reset-password-modal",is_open:a,toggleModal:function(){return r(!1)},title:Object(u.localize)("Reset DMT5 password")},!this.is_list_fetched&&!this.state.has_error&&i.createElement(s.Loading,{is_fullscreen:!1}),this.is_list_fetched&&!this.state.has_error&&!this.state.is_finished&&i.createElement(Ct,{current_list:o},(function(t){var a=t.title,r=t.type,o=t.login;return i.createElement(n.c,{initialValues:{new_password:""},validate:e.validatePassword,onSubmit:function(t,a){return e.resetPassword(t,r,o,a)}},(function(e){var t=e.handleSubmit,n=e.errors,o=e.values,c=e.isSubmitting,d=e.handleChange,m=e.handleBlur,_=e.touched;return i.createElement("form",{autoComplete:"off",onSubmit:t},i.createElement("div",{className:"mt5-reset-password"},i.createElement("div",{className:"mt5-reset-password__container"},i.createElement("h2",{className:"mt5-reset-password__heading"},i.createElement(u.Localize,{i18n_default_text:"Reset DMT5 {{title}} password",values:{title:a}})),i.createElement("div",{className:"mt5-reset-password__password-area"},i.createElement(s.PasswordMeter,{input:o.new_password,has_error:!(!_.new_password||!n.new_password),custom_feedback_messages:Object(l.getErrorMessages)().password_warnings},(function(e){var t=e.has_warning;return i.createElement(s.PasswordInput,{autoComplete:"new-password",className:"mt5-reset-password__password-field",name:"new_password",label:Object(u.localize)("New {{type}} password",{type:r}),onChange:d,onBlur:m,error:_.new_password&&n.new_password,value:o.new_password,"data-lpignore":"true",required:!0,hint:!t&&Object(u.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers.")})}))),c&&i.createElement(s.Loading,{is_fullscreen:!1}),!c&&i.createElement(s.FormSubmitButton,{is_disabled:c||!o.new_password||Object.keys(n).length>0,errors:n,is_center:!0,large:!0,label:Object(u.localize)("Create {{type}} password",{type:r})}))))}))})),this.state.has_error&&i.createElement("div",{className:"mt5-reset-password__error"},i.createElement(s.Icon,{icon:"IcMt5Expired",size:128}),i.createElement("p",{className:"mt5-reset-password__heading"},this.state.error_message),i.createElement("p",{className:"mt5-reset-password__description mt5-reset-password__description--is-centered"},i.createElement(u.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),i.createElement(s.Button,{primary:!0,large:!0,onClick:function(){e.clearAddressBar(),r(!1)}},i.createElement(u.Localize,{i18n_default_text:"Ok"}))),this.state.is_finished&&i.createElement("div",{className:"mt5-reset-password__success"},i.createElement(s.Icon,{icon:"IcMt5PasswordUpdated",size:128}),i.createElement("div",{className:"mt5-reset-password__heading"},i.createElement(u.Localize,{i18n_default_text:"Password saved"})),i.createElement("div",{className:"mt5-reset-password__description"},i.createElement(u.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===this.state.changed_password_type?Object(u.localize)("main"):Object(u.localize)("investor")}})),i.createElement(s.Button,{primary:!0,large:!0,onClick:function(){return r(!1)}},i.createElement(u.Localize,{i18n_default_text:"Ok"}))))}},{key:"is_list_fetched",get:function(){return 0!==Object.keys(this.props.current_list).length}}])&&jt(t.prototype,a),r&&jt(t,r),c}(i.Component);Dt.propTypes={email:r.string,is_mt5_reset_password_modal_enabled:r.any,setMt5PasswordResetModal:r.any,current_list:r.any};var It,Lt,Ft,Rt,Bt=Object(vt.withRouter)(Object(f.b)((function(e){var t=e.modules.mt5;return{email:e.client.email,is_mt5_reset_password_modal_enabled:t.is_mt5_reset_password_modal_enabled,setMt5PasswordResetModal:t.setMt5PasswordResetModal,current_list:t.current_list}}))(Dt)),Wt=Object(f.b)((function(e){var t=e.ui,a=e.modules.mt5;return{enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:a.closeMT5PendingDialog,is_mt5_pending_dialog_open:a.is_mt5_pending_dialog_open}}))((function(e){var t=e.enableApp,a=e.disableApp,n=e.toggleModal,r=e.is_mt5_pending_dialog_open;return i.createElement(s.Modal,{title:Object(u.localize)("Thanks for submitting your documents!"),className:"mt5-pending-dialog",is_open:r,disableApp:a,enableApp:t,toggleModal:n,has_close_icon:!1,small:!0},i.createElement(s.Modal.Body,null,i.createElement(u.Localize,{i18n_default_text:"We’ll process your documents within 1-3 days. Once they are verified, we’ll notify you via email."})),i.createElement(s.Modal.Footer,null,i.createElement(s.Button,{has_effect:!0,text:Object(u.localize)("OK"),onClick:n,primary:!0})))})),Ut=function(e){var t=e.display_name,a=e.label,n=e.success_msg,r=e.info_msg,o=e.text_copy;return i.createElement("div",{className:"mt5-dashboard__info-copy"},i.createElement("div",{className:"mt5-dashboard__info-display"},i.createElement("span",{className:"mt5-dashboard__info-label"},a,":"),t),i.createElement(s.Clipboard,{text_copy:o,info_message:r,success_message:n}))};function qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Vt=(qt(It={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),qt(It,Object(u.localize)("Margin call"),Object(u.localize)("100%")),qt(It,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),qt(It,Object(u.localize)("Number of assets"),Object(u.localize)("10+")),It),Ht=(qt(Lt={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),qt(Lt,Object(u.localize)("Margin call"),Object(u.localize)("150%")),qt(Lt,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),qt(Lt,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),Lt),Yt=(qt(Ft={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:30")),qt(Ft,Object(u.localize)("Margin call"),Object(u.localize)("100%")),qt(Ft,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),qt(Ft,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),Ft),$t=(qt(Rt={},Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:100")),qt(Rt,Object(u.localize)("Margin call"),Object(u.localize)("150%")),qt(Rt,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),qt(Rt,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),Rt),Kt=a("../../../node_modules/react-transition-group/esm/CSSTransition.js");function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ta(e);if(t){var r=ta(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ea(this,a)}}function ea(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(o,e);var t,a,n,r=Qt(o);function o(){return Gt(this,o),r.apply(this,arguments)}return t=o,(a=[{key:"render",value:function(){return i.createElement(s.Clipboard,{text_copy:this.props.text,info_message:Object(u.localize)("Click here to copy account login number and paste into the login box in MT5 platform along with your password."),success_message:Object(u.localize)("Account login number copied!")})}}])&&Zt(t.prototype,a),n&&Zt(t,n),o}(i.PureComponent),na={synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform"},ra=i.forwardRef((function(e,t){var a=e.onSelectAccount,n=e.is_disabled;return i.createElement("div",{onClick:n?null:a,className:m()("mt5-account-card__add-server",{"mt5-account-card__add-server--disabled":n}),ref:t},i.createElement("span",{className:"mt5-account-card__add-server--icon"},"+"),i.createElement(u.Localize,{i18n_default_text:"Add more trade servers"}))}));ra.displayName="AddTradeServerButton";var oa=function(e){var t=e.display_login;return i.createElement("div",{className:"mt5-account-card__login"},i.createElement(u.Localize,{i18n_default_text:"<0>Account login no.</0><1>{{display_login}}</1>",values:{display_login:t},components:[i.createElement("span",{key:0}),i.createElement("strong",{key:1})]}),i.createElement(aa,{text:t}))},ia=function(e){var t=e.button_label,a=e.handleClickSwitchAccount,n=e.has_real_account,r=e.is_accounts_switcher_on,o=e.is_button_primary,c=e.is_disabled,l=e.is_virtual,d=e.onSelectAccount,_=e.type;if(l&&n&&"real"===_.category&&"financial_stp"===_.type&&"function"==typeof a)return i.createElement("div",{className:"mt5-account-card__action-wrapper"},i.createElement(u.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a DMT5 Financial STP account.</1>",components:[i.createElement("a",{className:m()("mt5-account-card__action-wrapper__link link link--orange",{"mt5-account-card__action-wrapper__link--disabled":r}),key:0,onClick:a}),i.createElement(s.Text,{key:1,line_height:"s",size:"xxs"})]}));var p="real"===_.category?i.createElement(u.Localize,{i18n_default_text:"Add real account"}):i.createElement(u.Localize,{i18n_default_text:"Add demo account"}),f=t||p;return i.createElement(s.Button,{className:"mt5-account-card__account-selection",onClick:d,type:"button",is_disabled:c,primary:o,secondary:!o,large:!0},f)},ca=function(e){var t=e.button_label,a=e.commission_message,n=e.descriptor,r=e.is_hovered,o=e.existing_data,c=e.has_mt5_account,l=e.has_mt5_account_error,d=e.has_real_account,_=e.is_accounts_switcher_on,p=e.is_button_primary,f=e.is_disabled,b=e.is_logged_in,g=e.is_virtual,h=e.onHover,y=e.specs,v=e.title,w=e.type,E=e.onSelectAccount,O=e.onClickFund,j=e.onPasswordManager,z=e.should_show_trade_servers,S=e.toggleAccountsDialog,x=e.toggleShouldShowRealAccountsList,M=e.trading_servers,N=w.type?i.createElement(s.Icon,{icon:na[w.type],size:64}):null,P="synthetic"===w.type&&"real"===w.category&&!o,k="demo"===w.category,A=o&&"real"===w.category&&"synthetic"===w.type&&M.some((function(e){return e.id===o.server})),T=i.useRef(),C=i.useRef(),D=i.useRef();i.useEffect((function(){if(o){var e,t=function(){null==h||h(o.group)};return T.current.addEventListener("mouseenter",t),null==D||null===(e=D.current)||void 0===e||e.addEventListener("mouseenter",t),function(){var e;T.current.removeEventListener("mouseenter",t),null==D||null===(e=D.current)||void 0===e||e.removeEventListener("mouseenter",(function(){return t}))}}return function(){}}),[h]);var I=i.useCallback((function(e){var t=null==M?void 0:M.find((function(t){return t.id===e.server}));return t?"".concat(t.geolocation.region," ").concat(1===t.geolocation.sequence?"":t.geolocation.sequence):""}),[o,M]);return i.createElement("div",{ref:C,className:m()("mt5-account-card__wrapper"),style:{"--mt5-card-wrapper-grid":"1fr 4rem"}},i.createElement("div",{className:m()("mt5-account-card",{"mt5-account-card__logged-out":!b}),ref:T},P&&i.createElement("div",{className:"mt5-account-card__banner"},i.createElement(u.Localize,{i18n_default_text:"Most popular"})),k&&i.createElement("div",{className:"mt5-account-card__banner mt5-account-card__banner--demo"},i.createElement(u.Localize,{i18n_default_text:"DEMO"})),A&&i.createElement("div",{className:"mt5-account-card__banner mt5-account-card__banner--server"},I(o)),i.createElement("div",{className:m()("mt5-account-card__type",{"mt5-account-card__type--has-banner":P||k}),id:"mt5_".concat(w.category,"_").concat(w.type)},N,i.createElement("div",{className:"mt5-account-card__type--description"},i.createElement("h1",{className:"mt5-account-card--heading"},v),(!o||!b)&&i.createElement("p",{className:"mt5-account-card--paragraph"},n),o&&o.display_balance&&b&&i.createElement("p",{className:"mt5-account-card--balance"},i.createElement(s.Money,{amount:o.display_balance,currency:o.currency,has_sign:o.balance<0,show_currency:!0})))),i.createElement("div",{className:"mt5-account-card__cta"},i.createElement("div",{className:"mt5-account-card__specs"},i.createElement("table",{className:"mt5-account-card__specs-table"},i.createElement("tbody",null,Object.keys(y).map((function(e,t){return i.createElement("tr",{key:t,className:"mt5-account-card__specs-table-row"},i.createElement("td",{className:"mt5-account-card__specs-table-attribute"},i.createElement("p",{className:"mt5-account-card--paragraph"},e)),i.createElement("td",{className:"mt5-account-card__specs-table-data"},i.createElement("p",{className:"mt5-account-card--paragraph"},y[e])))})),A&&o&&"synthetic"===w.type&&"real"===w.category&&i.createElement("tr",{key:o.server,className:"mt5-account-card__specs-table-row"},i.createElement("td",{className:"mt5-account-card__specs-table-attribute"},i.createElement("p",{className:"mt5-account-card--paragraph"},i.createElement(u.Localize,{i18n_default_text:"Trade server: "}))),i.createElement("td",{className:"mt5-account-card__specs-table-data"},i.createElement("p",{className:"mt5-account-card--paragraph"},I(o))))))),(null==o?void 0:o.login)&&b&&i.createElement(oa,{display_login:o.display_login}),(!o&&a||!b)&&i.createElement("div",{className:"mt5-account-card__commission"},i.createElement(s.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},a)),o&&b&&i.createElement("div",{className:"mt5-account-card__manage"},i.createElement(s.Button,{onClick:function(){return O(o)},type:"button",secondary:!0},"real"===w.category&&i.createElement(u.Localize,{i18n_default_text:"Fund transfer"}),"demo"===w.category&&i.createElement(u.Localize,{i18n_default_text:"Fund top up"})),i.createElement(s.Button,{onClick:function(){j(o.login,v,w.category,w.type,o.server)},type:"button",secondary:!0},i.createElement(u.Localize,{i18n_default_text:"Password"}))),!o&&c&&i.createElement(s.Button,{className:"mt5-account-card__account-selection",onClick:E,type:"button"},i.createElement(u.Localize,{i18n_default_text:"Select"})),o&&b&&i.createElement("a",{className:"dc-btn mt5-account-card__account-selection mt5-account-card__account-selection--primary",type:"button",href:Qe({category:w.category,loginid:o.display_login}),target:"_blank",rel:"noopener noreferrer"},i.createElement(u.Localize,{i18n_default_text:"Trade on web terminal"})),!o&&!c&&b&&i.createElement(ia,{button_label:t,handleClickSwitchAccount:function(){x(!0),S(!0)},has_real_account:d,is_accounts_switcher_on:_,is_button_primary:p,is_disabled:f,is_virtual:g,onSelectAccount:E,type:w})),i.createElement(i.Fragment,null,z&&i.createElement(s.MobileWrapper,null,i.createElement(ra,{ref:D,onSelectAccount:E,is_disabled:l})))),i.createElement(s.DesktopWrapper,null,i.createElement(Kt.a,{in:r&&z,timeout:400,classNames:"mt5-account-card__add-server",unmountOnExit:!0},i.createElement(ra,{ref:D,onSelectAccount:E,is_disabled:l}))))};function sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var la=function(e){var t,a,n,r,o,c,s=e.is_eu,l=e.is_eu_country,d=e.has_maltainvest_account,m=e.has_mt5_account_error,_=e.openAccountNeededModal,p=e.standpoint,f=e.is_loading,b=e.is_logged_in,g=e.landing_companies,h=e.onSelectAccount,y=e.openAccountTransfer,v=e.current_list,w=e.has_mt5_account,E=e.openPasswordManager;return f?i.createElement("div",{className:"mt5-demo-accounts-display"},i.createElement(N.a,null)):i.createElement("div",{className:"mt5-demo-accounts-display"},((null==g||null===(t=g.mt_gaming_company)||void 0===t?void 0:t.financial)||!b)&&i.createElement(ca,{has_mt5_account:w,title:Object(u.localize)("Synthetic"),type:{category:"demo",type:"synthetic"},is_disabled:m,is_logged_in:b,existing_data:v[Object.keys(v).find((function(e){return e.startsWith("demo.synthetic")}))],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){return h({category:"demo",type:"synthetic"})},onPasswordManager:E,onClickFund:function(){return y(v[Object.keys(v).find((function(e){return e.startsWith("demo.synthetic")}))],{category:"demo",type:"synthetic"})},descriptor:Object(u.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:(a={},sa(a,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),sa(a,Object(u.localize)("Margin call"),Object(u.localize)("100%")),sa(a,Object(u.localize)("Stop out level"),Object(u.localize)("50%")),sa(a,Object(u.localize)("Number of assets"),Object(u.localize)("10+")),a)}),((null==g||null===(n=g.mt_financial_company)||void 0===n?void 0:n.financial)||!b)&&i.createElement(ca,{has_mt5_account:w,title:Object(u.localize)("Financial"),is_disabled:m,is_logged_in:b,type:{category:"demo",type:"financial"},existing_data:v[Object.keys(v).find((function(e){return e.startsWith("demo.financial@")}))],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){s&&!d&&p.iom?_("maltainvest",Object(u.localize)("Deriv Financial"),Object(u.localize)("DMT5 Demo Financial")):h({category:"demo",type:"financial"})},onPasswordManager:E,onClickFund:function(){return y(v[Object.keys(v).find((function(e){return e.startsWith("demo.financial@")}))],{category:"demo",type:"financial"})},descriptor:s||l?Object(u.localize)("Trade commodities, cryptocurrencies, major (standard) and minor currency pairs with high leverage."):Object(u.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:s||l?Yt:(r={},sa(r,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:1000")),sa(r,Object(u.localize)("Margin call"),Object(u.localize)("150%")),sa(r,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),sa(r,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),r)}),((null==g||null===(o=g.mt_financial_company)||void 0===o?void 0:o.financial_stp)||!b)&&i.createElement(ca,{has_mt5_account:w,title:Object(u.localize)("Financial STP"),type:{category:"demo",type:"financial_stp"},is_disabled:m,is_logged_in:b,existing_data:v[Object.keys(v).find((function(e){return e.startsWith("demo.financial_stp@")}))],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){return h({category:"demo",type:"financial_stp"})},onPasswordManager:E,onClickFund:function(){return y(v[Object.keys(v).find((function(e){return e.startsWith("demo.financial_stp@")}))],{category:"demo",type:"financial_stp"})},descriptor:Object(u.localize)("Trade major, minor, exotic currency pairs, and cryptocurrencies with Straight-Through Processing (STP) of your orders direct to the market."),specs:(c={},sa(c,Object(u.localize)("Leverage"),Object(u.localize)("Up to 1:100")),sa(c,Object(u.localize)("Margin call"),Object(u.localize)("150%")),sa(c,Object(u.localize)("Stop out level"),Object(u.localize)("75%")),sa(c,Object(u.localize)("Number of assets"),Object(u.localize)("50+")),c)}))};function ua(e){return function(e){if(Array.isArray(e))return _a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){if(e){if("string"==typeof e)return _a(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_a(e,t):void 0}}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var pa=function(e){var t,a,n,r=e.has_real_account,o=e.is_accounts_switcher_on,c=e.is_eu,d=e.is_eu_country,m=e.has_malta_account,_=e.has_maltainvest_account,p=e.has_mt5_account_error,f=e.is_fully_authenticated,b=e.is_pending_authentication,g=e.is_virtual,h=e.landing_companies,y=e.onSelectAccount,v=e.openAccountTransfer,w=e.openPasswordModal,E=e.isAccountOfTypeDisabled,O=e.current_list,j=e.has_mt5_account,z=e.openPasswordManager,S=e.account_settings,x=e.openAccountNeededModal,M=e.standpoint,N=e.is_logged_in,P=e.toggleAccountsDialog,k=e.toggleShouldShowRealAccountsList,A=e.trading_servers,T=e.can_have_more_real_synthetic_mt5,C=(N?!c&&r:!d)&&T,D=da(i.useState(0),2),I=D[0],L=D[1],F=S.citizen&&S.tax_identification_number&&S.tax_residence,R=function(e,t,a){return e&&a?i.createElement(u.Localize,{i18n_default_text:"Set your password"}):t?i.createElement(u.Localize,{i18n_default_text:"Pending verification"}):i.createElement(u.Localize,{i18n_default_text:"Add real account"})}(f,b,F),B=!r||b,W=function(){c&&M.malta&&!m?x("malta",Object(u.localize)("Deriv Synthetic"),Object(u.localize)("DMT5 Synthetic")):y({type:"synthetic",category:"real"})},U=function(){return v(O["real.synthetic"],{category:"real",type:"synthetic"})},q=function(e){var t=Object.keys(O).filter((function(e){return e.startsWith("real.synthetic")}));L(t.findIndex((function(t){return O[t].group===e})))},V=function(e){if(p)return!0;if(c){var t=Object(l.getAccountTypeFields)({category:"real",type:e});return E(null==t?void 0:t.account_type)}switch(e){case"synthetic":case"financial":return!r;case"financial_stp":return B;default:return!1}},H=N&&c||!N&&d,Y=((null==h||null===(t=h.mt_gaming_company)||void 0===t?void 0:t.financial)||!N)&&(Object.keys(O).some((function(e){return e.startsWith("real.synthetic")}))?Object.keys(O).filter((function(e){return e.startsWith("real.synthetic")})).reduce((function(e,t){return e.push(O[t]),e}),[]).map((function(e,t){return i.createElement(ca,{key:t,has_mt5_account:j,has_mt5_account_error:p,title:Object(u.localize)("Synthetic"),is_hovered:t===I,is_disabled:V("synthetic"),type:{category:"real",type:"synthetic"},is_logged_in:N,should_show_trade_servers:C,existing_data:e,commission_message:Object(u.localize)("No commission"),onSelectAccount:W,onPasswordManager:z,onClickFund:U,descriptor:Object(u.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Vt,trading_servers:A,onHover:q})})):[i.createElement(ca,{key:"real.synthetic",has_mt5_account:j,title:Object(u.localize)("Synthetic"),is_disabled:V("synthetic"),type:{category:"real",type:"synthetic"},is_logged_in:N,should_show_trade_servers:C,existing_data:void 0,commission_message:Object(u.localize)("No commission"),onSelectAccount:W,onPasswordManager:z,onClickFund:U,descriptor:Object(u.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Vt,trading_servers:A,onHover:q})]),$=((null==h||null===(a=h.mt_financial_company)||void 0===a?void 0:a.financial_stp)||!N)&&i.createElement(ca,{key:"real.financial_stp",has_mt5_account:j,title:Object(u.localize)("Financial STP"),type:{category:"real",type:"financial_stp"},is_logged_in:N,existing_data:O[Object.keys(O).find((function(e){return e.startsWith("real.financial_stp@")}))],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};f&&F?w(e):(f||B)&&F||y(e)},button_label:R,is_button_primary:b,onPasswordManager:z,onClickFund:function(){return v(O["real.financial_stp"],{category:"real",type:"financial_stp"})},descriptor:Object(u.localize)("Trade major, minor, exotic currency pairs, and cryptocurrencies with Straight-Through Processing (STP) of your orders direct to the market."),specs:$t,is_disabled:V("financial_stp"),is_virtual:g,has_real_account:r,toggleAccountsDialog:P,toggleShouldShowRealAccountsList:k,is_accounts_switcher_on:o}),K=((null==h||null===(n=h.mt_financial_company)||void 0===n?void 0:n.financial)||!N)&&i.createElement(ca,{key:"real.financial",has_mt5_account:j,is_disabled:V("financial"),title:Object(u.localize)("Financial"),type:{category:"real",type:"financial"},existing_data:O[Object.keys(O).find((function(e){return e.startsWith("real.financial@")}))],commission_message:Object(u.localize)("No commission"),onSelectAccount:function(){c&&!_?x("maltainvest",Object(u.localize)("Deriv Financial"),Object(u.localize)("DMT5 Real Financial")):y({type:"financial",category:"real"})},onPasswordManager:z,onClickFund:function(){return v(O["real.financial"],{category:"real",type:"financial"})},descriptor:c||d?Object(u.localize)("Trade commodities, cryptocurrencies, major (standard) and minor currency pairs with high leverage."):Object(u.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:H?Yt:Ht,is_logged_in:N}),X=[].concat(ua(Y||[]),[K,$]).filter(Boolean);return i.createElement("div",{className:"mt5-real-accounts-display"},i.createElement(s.DesktopWrapper,null,i.createElement(s.Carousel,{list:X,width:328,nav_position:"middle",show_bullet:!1,item_per_window:3,className:"mt5-real-accounts-display__carousel"})),i.createElement(s.MobileWrapper,null,X.map((function(e){return e}))))};a("./sass/app/modules/mt5/mt5-dashboard.scss");function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ha(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ea(e);if(t){var r=Ea(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return wa(this,a)}}function wa(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ja=function(e){var t=e.children,a=e.is_loading,n=e.loading_component,r=Oa(e,["children","is_loading","loading_component"]),o=n;return a?i.createElement(o,null):i.createElement(s.Tabs,r,t)},za=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(d,e);var t,a,n,r,o,c=va(d);function d(){var e;ga(this,d);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=c.call.apply(c,[this].concat(a))).state={active_index:0,is_account_needed_modal_open:!1,is_demo_tab:!0,required_account:{},password_manager:{is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}},e.openResetPassword=function(){/reset-password/.test(e.props.location.hash)&&e.props.setMt5PasswordResetModal(!0)},e.getIndexToSet=function(){if(e.props.location.hash)return/demo/.test(e.props.location.hash)?1:0},e.updateActiveIndex=function(t){var a={};1===t?a.is_demo_tab=!0:0===t&&(a.is_demo_tab=!1);var n=e.getIndexToSet();e.state.active_index!==n&&(a.active_index=n),Object(l.isEmptyObject)(a)||e.setState(a)},e.openAccountTransfer=function(t,a){"real"===a.category?(e.props.disableMt5PasswordModal(),e.props.history.push(l.routes.cashier_acc_transfer)):(e.props.setCurrentAccount(t,a),e.props.openTopUpModal())},e.togglePasswordManagerModal=function(t,a,n,r,o){e.setState((function(e){return{active_index:e.active_index,password_manager:{is_visible:!e.password_manager.is_visible,selected_login:"string"==typeof t?t:"",selected_account:"string"==typeof a?a:"",selected_account_group:n,selected_account_type:r,selected_server:o}}}))},e.openRealPasswordModal=function(t){e.props.setAccountType(t),e.props.openPasswordModal()},e}return t=d,(a=[{key:"componentDidMount",value:(r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateActiveIndex(this.getIndexToSet()),this.openResetPassword(),this.props.onMount();case 3:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var o=r.apply(e,t);function i(e){ba(o,a,n,i,c,"next",e)}function c(e){ba(o,a,n,i,c,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(){this.updateActiveIndex(),this.props.checkShouldOpenAccount()}},{key:"render",value:function(){var e=this.props,t=e.account_settings,a=e.account_status,n=e.beginRealSignupForMt5,r=e.country,o=e.createMT5Account,c=e.current_list,d=e.isAccountOfTypeDisabled,m=e.is_accounts_switcher_on,_=e.is_eu,p=e.is_eu_country,f=e.is_fully_authenticated,b=e.is_loading,g=e.is_logged_in,h=e.is_logging_in,y=e.is_mt5_allowed,v=e.is_pending_authentication,w=e.is_virtual,E=e.landing_companies,O=e.has_malta_account,j=e.has_maltainvest_account,z=e.has_mt5_account,x=e.has_mt5_account_error,N=e.mt5_disabled_signup_types,k=e.has_real_account,T=e.NotificationMessages,C=e.openAccountNeededModal,D=e.standpoint,I=e.toggleAccountsDialog,L=e.toggleShouldShowRealAccountsList,F=e.trading_servers,R=e.can_have_more_real_synthetic_mt5,B=e.upgradeable_landing_companies,W=!_&&g&&!k&&(null==B?void 0:B.length)>0;return!r&&g||h?i.createElement(s.Loading,null):i.createElement(i.Fragment,null,y||!g?i.createElement("div",{className:"mt5-dashboard__container"},i.createElement(T,null),i.createElement("div",{className:"mt5-dashboard"},i.createElement("div",{className:"mt5-dashboard__welcome-message"},i.createElement("h1",{className:"mt5-dashboard__welcome-message--heading"},g?i.createElement(u.Localize,{i18n_default_text:"Welcome to your MetaTrader 5 (DMT5 account dashboard)"}):i.createElement(u.Localize,{i18n_default_text:"Welcome to MetaTrader 5 (DMT5 account dashboard)"}))),x&&i.createElement("div",{className:"mt5-dashboard__accounts-error"},i.createElement(s.Text,{as:"p",className:"mt5-dashboard__accounts-error-message",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},i.createElement(u.Localize,{i18n_default_text:"Due to an issue on our server, some of your MT5 accounts are unavailable at the moment. Please bear with us and thank you for your patience."}))),i.createElement("div",{className:"mt5-dashboard__accounts-display"},i.createElement(gt,{is_visible:this.state.password_manager.is_visible,selected_login:this.state.password_manager.selected_login,selected_account:this.state.password_manager.selected_account,selected_account_group:this.state.password_manager.selected_account_group,selected_account_type:this.state.password_manager.selected_account_type,selected_server:this.state.password_manager.selected_server,toggleModal:this.togglePasswordManagerModal}),i.createElement(ja,{active_index:this.state.active_index,top:!0,center:!0,is_loading:b,is_logged_in:g,loading_component:P,onTabItemClick:this.updateActiveIndex,should_update_hash:!0},i.createElement("div",{label:Object(u.localize)("Real account"),"data-hash":"real"},i.createElement(i.Fragment,null,W&&i.createElement(A,{onClickSignup:n}),i.createElement(pa,{is_accounts_switcher_on:m,is_eu:_,is_eu_country:p,is_logged_in:g,has_maltainvest_account:j,has_malta_account:O,has_mt5_account_error:N.demo,openAccountNeededModal:C,current_list:c,account_status:a,has_mt5_account:z,onSelectAccount:o,account_settings:t,landing_companies:E,is_pending_authentication:v,is_fully_authenticated:f,is_virtual:w,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal,openPasswordModal:this.openRealPasswordModal,isAccountOfTypeDisabled:d,has_real_account:k,standpoint:D,toggleAccountsDialog:I,toggleShouldShowRealAccountsList:L,trading_servers:F,can_have_more_real_synthetic_mt5:R}))),i.createElement("div",{label:Object(u.localize)("Demo account"),"data-hash":"demo"},i.createElement(la,{is_eu:_,is_logged_in:g,has_maltainvest_account:j,has_mt5_account_error:N.real,openAccountNeededModal:C,standpoint:D,is_loading:b,has_mt5_account:z,current_list:c,onSelectAccount:o,landing_companies:E,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal}))),i.createElement("div",{className:"mt5-dashboard__info"},i.createElement("div",{className:"mt5-dashboard__info-description"},i.createElement(u.Localize,{i18n_default_text:"Use these in your apps"})),i.createElement(Ut,{display_name:"Deriv Limited",text_copy:"Deriv Limited",label:Object(u.localize)("Broker"),info_msg:Object(u.localize)("Click here to copy broker name."),success_msg:Object(u.localize)("Broker name copied!")}),i.createElement(Ut,{display_name:Ze(this.state.is_demo_tab),text_copy:Ze(this.state.is_demo_tab),label:Object(u.localize)("Server"),info_msg:Object(u.localize)("Click here to copy server name."),success_msg:Object(u.localize)("Server name copied!")})),i.createElement(Ge,null),i.createElement("div",{className:"mt5-dashboard__maintenance"},i.createElement(s.Icon,{icon:"IcAlertWarning",size:Object(l.isMobile)()?28:16,className:"mt5-dashboard__maintenance-icon"}),i.createElement("div",{className:"mt5-dashboard__maintenance-text"},i.createElement(u.Localize,{i18n_default_text:"Server maintenance starting 03:00 GMT every Sunday. This process may take up to 2 hours to complete. <0 />Service may be disrupted during this time.",components:[i.createElement("br",{key:0})]})))),i.createElement(s.DesktopWrapper,null,i.createElement(et,null)),i.createElement(s.MobileWrapper,null,i.createElement("div",{className:"mt5-dashboard__download-center"},i.createElement("h1",{className:"mt5-dashboard__download-center--heading"},i.createElement(u.Localize,{i18n_default_text:"Download the MT5 app"})),i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},i.createElement(s.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),i.createElement(s.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),i.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},i.createElement("a",{href:Je("android"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),i.createElement("a",{href:Je("ios"),target:"_blank",rel:"noopener noreferrer"},i.createElement(s.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),i.createElement(yt,null),i.createElement(S,null),i.createElement(M,null),i.createElement(Re,null),i.createElement(Wt,null),i.createElement(Bt,null))):i.createElement(s.PageError,{buttonSize:"medium",header:i.createElement(u.Localize,{i18n_default_text:"DMT5 is not available in {{country}}",values:{country:t.residence},components:[i.createElement("br",{key:0})]}),messages:[i.createElement(u.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[l.routes.trade,l.routes.bot],redirect_labels:[i.createElement(u.Localize,{key:0,i18n_default_text:"Explore DTrader"}),i.createElement(u.Localize,{key:1,i18n_default_text:"Explore DBot"})]}))}}])&&ha(t.prototype,a),n&&ha(t,n),d}(i.Component),Sa=Object(c.withRouter)(Object(f.b)((function(e){var t=e.client,a=e.modules,n=e.ui;return{beginRealSignupForMt5:a.mt5.beginRealSignupForMt5,checkShouldOpenAccount:a.mt5.checkShouldOpenAccount,country:t.account_settings.residence,createMT5Account:a.mt5.createMT5Account,current_list:a.mt5.current_list,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableMt5PasswordModal:a.mt5.disableMt5PasswordModal,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:a.mt5.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:a.mt5.enableMt5PasswordModal,openAccountNeededModal:n.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,has_mt5_account:a.mt5.has_mt5_account,has_mt5_account_error:t.has_account_error_in_mt5_list,has_real_account:t.has_active_real_account,setAccountType:a.mt5.setAccountType,setMt5PasswordResetModal:a.mt5.setMt5PasswordResetModal,setCurrentAccount:a.mt5.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:a.mt5.toggleCompareAccountsModal,is_accounts_switcher_on:n.is_accounts_switcher_on,openTopUpModal:n.openTopUpModal,NotificationMessages:n.notification_messages_ui,onMount:a.mt5.onMount,onUnmount:a.mt5.onUnmount,toggleAccountsDialog:n.toggleAccountsDialog,toggleShouldShowRealAccountsList:n.toggleShouldShowRealAccountsList,trading_servers:t.trading_servers,can_have_more_real_synthetic_mt5:t.can_have_more_real_synthetic_mt5,upgradeable_landing_companies:t.upgradeable_landing_companies}}))(za))},"./sass/app/modules/mt5/mt5-dashboard.scss":function(e,t,a){},"./sass/app/modules/mt5/mt5.scss":function(e,t,a){},"./templates/_common/components/loading.jsx":function(e,t,a){"use strict";var n=a("../../../node_modules/classnames/index.js"),r=a.n(n),o=a("react");t.a=function(e){var t=e.className,a=e.is_invisible,n=e.theme,i=e.id;return o.createElement("div",{id:i,className:r()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.mt5.d67ccd7eae50e908b3f6.js.map