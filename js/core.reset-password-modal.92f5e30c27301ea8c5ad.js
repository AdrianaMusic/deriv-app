(window.webpackJsonp=window.webpackJsonp||[]).push([["reset-password-modal"],{769:function(e,s,t){"use strict";t.r(s),t.d(s,"default",(function(){return g}));var r=t(0),a=t(1),o=t.n(a),n=t(5),i=t.n(n),l=t(11),c=t(6),d=t(4),p=t(2),u=t(10),m=t(9);function _(e,s,t,r,a,o,n){try{var i=e[o](n),l=i.value}catch(e){return void t(e)}i.done?s(l):Promise.resolve(l).then(r,a)}var w=function(e){var s=e.logoutClient,t=e.verification_code,a=function(e,t){if(t.setSubmitting(!1),t.resetForm({password:""}),e)return console.error(e),void t.setStatus({error_msg:e});t.setStatus({reset_complete:!0}),s().then((function(){Object(d.redirectToLogin)(!1,Object(p.getLanguage)())}))};return r.createElement("div",{className:"reset-password"},r.createElement(l.Formik,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var s={};return Object(d.validLength)(e.password,{min:8,max:25})?Object(d.validPassword)(e.password)||(s.password=Object(d.getErrorMessages)().password()):s.password=Object(p.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),s},onSubmit:function(e,s){var r={reset_password:1,new_password:e.password,verification_code:t};m.b.resetPassword(r).then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.error?a(t.error.message,s):a(null,s);case 1:case"end":return e.stop()}}),e)})),function(){var s=this,t=arguments;return new Promise((function(r,a){var o=e.apply(s,t);function n(e){_(o,r,a,n,i,"next",e)}function i(e){_(o,r,a,n,i,"throw",e)}n(void 0)}))});return function(e){return t.apply(this,arguments)}}())}},(function(e){var s=e.handleBlur,t=e.errors,a=e.values,o=e.touched,n=e.isSubmitting,u=e.handleChange,m=e.status;return r.createElement(l.Form,null,r.createElement(r.Fragment,null,m.reset_complete?r.createElement("div",{className:"reset-password__password-selection"},r.createElement(c.Text,{as:"p",weight:"bold",className:"reset-password__heading"},r.createElement(p.Localize,{i18n_default_text:"Your password has been changed"})),r.createElement(c.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},r.createElement(p.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):r.createElement("div",{className:"reset-password__password-selection"},r.createElement(c.Text,{as:"p",weight:"bold",className:"reset-password__heading"},r.createElement(p.Localize,{i18n_default_text:"Choose a new password"})),r.createElement("fieldset",{className:"reset-password__fieldset"},r.createElement(c.PasswordMeter,{input:a.password,has_error:!(!o.password||!t.password),custom_feedback_messages:Object(d.getErrorMessages)().password_warnings},r.createElement(c.PasswordInput,{autoComplete:"new-password",className:"reset-password__password-field",name:"password",label:Object(p.localize)("Create a password"),onChange:u,onBlur:s,error:o.password&&t.password,value:a.password,"data-lpignore":"true",required:!0}))),r.createElement(c.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},m.error_msg?r.createElement(p.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:m.error_msg}}):r.createElement(p.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),r.createElement(c.Button,{className:i()("reset-password__btn",{"reset-password__btn--disabled":!a.password||t.password||n}),type:"submit",is_disabled:!a.password||!!t.password||n,primary:!0},r.createElement(p.Localize,{i18n_default_text:"Reset my password"})))))})))};w.propTypes={logoutClient:o.a.func,verification_code:o.a.string};var b=function(e){var s=e.disableApp,t=e.enableApp,a=e.is_loading,o=e.is_visible,n=e.logoutClient,i=e.verification_code;return r.createElement(c.Dialog,{is_visible:o,disableApp:s,enableApp:t,is_loading:a},r.createElement(w,{verification_code:i,logoutClient:n}))};b.propTypes={disableApp:o.a.func,enableApp:o.a.func,is_loading:o.a.bool,is_visible:o.a.bool,logoutClient:o.a.func,verification_code:o.a.string};var g=Object(u.b)((function(e){var s=e.ui,t=e.client;return{disableApp:s.disableApp,enableApp:s.enableApp,is_loading:s.is_loading,is_visible:s.is_reset_password_modal_visible,logoutClient:t.logout,verification_code:t.verification_code.reset_password}}))(b)}}]);
//# sourceMappingURL=core.reset-password-modal.92f5e30c27301ea8c5ad.js.map